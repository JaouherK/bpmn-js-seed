{"version":3,"file":"bpmn-viewer.min.js","sources":["bpmn-viewer.js"],"names":["e","exports","module","define","amd","f","window","global","self","BpmnJS","t","n","r","s","o","u","a","require","i","Error","call","length",1,"_dereq_","initListeners","diagram","listeners","events","get","forEach","l","on","event","handler","checkValidationError","err","pattern","match","exec","message","Viewer","options","this","_","extend","DEFAULT_OPTIONS","parent","container","$","appendTo","css","width","height","position","logoData","bottom","right","zIndex","attr","Diagram","BpmnModdle","Importer","prototype","importXML","xml","done","moddle","createModdle","fromXML","definitions","importDefinitions","saveXML","toXML","saveSVG","canvas","contentNode","getDefaultLayer","defsNode","_svg","select","contents","innerSVG","defs","outerSVG","bbox","getBBox","svg","x","y","name","invoke","fn","clear","_createDiagram","_init","importBpmnDiagram","__listeners","modules","concat","getModules","additionalModules","unshift","bpmnjs","omit","_modules","destroy","remove","push","./core","./import/Importer","bpmn-moddle","diagram-js","diagram-js/lib/features/overlays","diagram-js/lib/features/selection",2,"__depends__","../draw","../import",3,"BpmnRenderer","styles","pathMap","addMarker","id","element","markers","marker","initMarkers","createMarker","attrs","fill","strokeWidth","strokeLinecap","strokeDasharray","ref","scale","markerWidth","markerHeight","path","circle","stroke","computeStyle","custom","traits","defaultStyles","isArray","style","drawCircle","p","offset","isObject","cx","cy","Math","round","drawRect","rect","drawDiamond","x_2","y_2","points","polygon","drawLine","waypoints","createLine","drawPath","d","as","type","handlers","renderer","renderEventContent","getSemantic","isThrowing","isThrowEvent","isTypedEvent","parallelMultiple","renderLabel","label","textUtil","createText","addClass","renderEmbeddedLabel","align","semantic","box","padding","renderExternalLabel","hidden","fontSize","renderLaneLabel","text","textBox","top","transform","createPathFromConnection","connection","pathData","attachTaskMarkers","taskMarkers","obj","subprocess","contains","seq","parallel","compensation","loop","adhoc","$type","loopCharacteristics","undefined","isSequential","isForCompensation","drawShape","h","DefaultRenderer","apply","drawConnection","renderDataItemCollection","yPosition","getScaledPath","xScaleFactor","yScaleFactor","containerWidth","containerHeight","mx","my","isCollection","elementObjectRef","getDi","businessObject","di","eventDefinitionType","filter","matches","definition","all","val","key","any","eventDefinitions","TASK_BORDER_RADIUS","INNER_OUTER_DIST","LABEL_STYLE","fontFamily","TextUtil","size","bpmn:Event","bpmn:StartEvent","isInterrupting","bpmn:MessageEventDefinition","messagePath","bpmn:TimerEventDefinition","linePathData","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:LinkEventDefinition","bpmn:ErrorEventDefinition","bpmn:CancelEventDefinition","bpmn:CompensateEventDefinition","bpmn:SignalEventDefinition","bpmn:MultipleEventDefinition","bpmn:ParallelMultipleEventDefinition","bpmn:EndEvent","bpmn:TerminateEventDefinition","bpmn:IntermediateEvent","outer","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:Activity","bpmn:Task","bpmn:ServiceTask","task","pathDataBG","abspos","fillPathData","bpmn:UserTask","pathData2","pathData3","bpmn:ManualTask","bpmn:SendTask","bpmn:ReceiveTask","instantiate","bpmn:ScriptTask","bpmn:BusinessRuleTask","headerPathData","businessHeaderPath","headerData","businessPath","bpmn:SubProcess","expanded","DiUtil","isExpanded","isEventSubProcess","triggeredByEvent","bpmn:AdHocSubProcess","bpmn:Transaction","innerAttrs","bpmn:CallActivity","bpmn:Participant","lane","expandedPool","isExpandedPool","text2","participantMultiplicity","bpmn:Lane","bpmn:InclusiveGateway","diamond","bpmn:ExclusiveGateway","bpmn:ComplexGateway","bpmn:ParallelGateway","bpmn:EventBasedGateway","drawEvent","eventGatewayType","parallelPath","innerCircle","bpmn:Gateway","bpmn:SequenceFlow","markerEnd","sequenceFlow","source","conditionExpression","$instanceOf","markerStart","bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:MessageFlow","messageVisibleKind","midPoint","getPointAtLength","getTotalLength","markerPathData","messageAttrs","bpmn:DataObject","elementObject","bpmn:DataObjectReference","bpmn:DataInput","arrowPathData","getRawPath","bpmn:DataOutput","bpmn:DataStoreReference","DATA_STORE_PATH","elementStore","bpmn:BoundaryEvent","cancel","cancelActivity","bpmn:Group","pointerEvents","bpmn:TextAnnotation","textElement","textPathData","ParticipantMultiplicityMarker","subProcessPath","SubProcessMarker","markerRect","ParallelMarker","SequentialMarker","sequentialPath","CompensationMarker","compensationPath","LoopMarker","loopPath","strokeMiterlimit","AdhocMarker","Object","create","$inject","../util/Di","diagram-js/lib/draw/Renderer","diagram-js/lib/util/Text",4,"PathMap","Snap","EVENT_MESSAGE","heightElements","widthElements","EVENT_SIGNAL","EVENT_ESCALATION","EVENT_CONDITIONAL","EVENT_LINK","EVENT_ERROR","EVENT_CANCEL_45","EVENT_COMPENSATION","EVENT_TIMER_WH","EVENT_TIMER_LINE","EVENT_MULTIPLE","EVENT_PARALLEL_MULTIPLE","GATEWAY_EXCLUSIVE","GATEWAY_PARALLEL","GATEWAY_EVENT_BASED","GATEWAY_COMPLEX","DATA_OBJECT_PATH","DATA_OBJECT_COLLECTION_PATH","DATA_ARROW","DATA_STORE","TEXT_ANNOTATION","MARKER_SUB_PROCESS","MARKER_PARALLEL","MARKER_SEQUENTIAL","MARKER_COMPENSATION","MARKER_LOOP","MARKER_ADHOC","TASK_TYPE_SEND","TASK_TYPE_SCRIPT","TASK_TYPE_USER_1","TASK_TYPE_USER_2","TASK_TYPE_USER_3","TASK_TYPE_MANUAL","TASK_TYPE_INSTANTIATING_SEND","TASK_TYPE_SERVICE","TASK_TYPE_SERVICE_FILL","TASK_TYPE_BUSINESS_RULE_HEADER","TASK_TYPE_BUSINESS_RULE_MAIN","MESSAGE_FLOW_MARKER","pathId","param","rawPath","coordinates","heightRatio","widthRatio","heightIndex","widthIndex","format",5,"./BpmnRenderer","./PathMap",6,"elementData","collectWaypoints","collect","BpmnImporter","eventBus","elementFactory","elementRegistry","_eventBus","_canvas","_elementFactory","_elementRegistry","LabelUtil","hasExternalLabel","getExternalLabelBounds","elementToString","add","parentElement","createRoot","setRootElement","collapsed","bounds","createShape","addShape","_getSource","target","_getTarget","createConnection","waypoint","addConnection","addLabel","fire","createLabel","labelTarget","_getEnd","side","refSemantic","$parent","_getElement","../util/Label","./Util",7,"findDisplayCandidate","find","rootElements","BpmnTreeWalker","contextual","ctx","is","visit","gfx","visitRoot","root","visitIfDi","logError","error","console","context","registerDi","bpmnElement","diRefs","bind","handleDiagram","handlePlane","plane","planeElement","handlePlaneElement","handleDefinitions","diagrams","indexOf","rootElement","handleProcess","handleCollaboration","handleUnhandledProcesses","handleDeferred","deferred","process","handleFlowElementsContainer","handleIoSpecification","ioSpecification","handleArtifacts","artifacts","handledProcesses","processes","laneSets","handleMessageFlow","messageFlow","handleMessageFlows","messageFlows","handleDataAssociation","association","handleDataInput","dataInput","handleDataOutput","dataOutput","handleArtifact","artifact","dataInputs","dataOutputs","handleSubProcess","subProcess","handleFlowNode","flowNode","childCtx","handleSequenceFlow","handleDataElement","dataObject","handleBoundaryEvent","handleLane","newContext","childLaneSet","handleLaneSet","filterList","flowNodeRef","handleFlowElements","laneSet","lanes","handleLaneSets","handleNonFlowNodes","flowElements","dataInputAssociations","dataOutputAssociations","handleParticipant","participant","newCtx","processRef","collaboration","participants","Refs","enumerable","object-refs",8,"parse","visitor","importer","parentShape","warnings","walker","./BpmnTreeWalker",9,10,"bpmnImporter","./BpmnImporter",11,"isDefaultExpanded",12,"DEFAULT_LABEL_SIZE","getWaypointsMid","mid","first","floor","second","ceil","getExternalLabelMid","max",13,"./lib/simple",14,"packages","Moddle","ModdleXml","xmlStr","typeName","isString","isFunction","reader","Reader","rootHandler","writer","Writer","result","moddle-xml",15,"bpmn","bpmndi","dc","../resources/bpmn/json/bpmn.json","../resources/bpmn/json/bpmndi.json","../resources/bpmn/json/dc.json","../resources/bpmn/json/di.json","./bpmn-moddle",16,"./lib/Reader","./lib/Writer",17,"parseNodeAttributes","node","nodeAttrs","attributes","reduce","v","ns","local","parseNameNs","prefix","value","normalizeNamespaces","model","defaultNsUri","uri","pkg","getPackage","Context","parseRoot","elementsById","references","addReference","reference","addElement","addWarning","w","BaseHandler","BodyHandler","ReferenceHandler","property","ValueHandler","propertyDesc","BaseElementHandler","ElementHandler","getType","GenericElementHandler","XMLReader","sax","common","Types","types","Stack","parseName","aliasToName","handleEnd","handleText","handleNode","body","createReference","coerceType","isMany","set","parser","handleChild","createElement","descriptor","$descriptor","bodyProperty","Type","instance","prop","propertiesByName","isReference","getPropertyForElement","nameNs","propertyName","localName","$pkg","elementType","properties","isVirtual","isAttribute","hasType","effectiveType","toString","valueHandler","referenceHandler","childHandler","isSimple","newElement","createAny","children","$children","$body","resolveReferences","collection","idx","splice","handleClose","stack","pop","handleOpen","peek","line","column","xmlns","trim","onopentag","oncdata","ontext","onclosetag","onend","defer","write","close","./common","tiny-stack",18,"nsName","getElementNs","isGeneric","nameToAlias","getPropertyNs","getSerializableProperties","hasOwnProperty","escapeAttr","str","escapeMap","\n","\n\r","\"","replace","filterAttributes","props","isAttr","filterContained","ReferenceSerializer","BodySerializer","ValueSerializer","ElementSerializer","TypeSerializer","SavingWriter","FormatingWriter","out","indent","append","appendNewLine","appendIndent","join","unindent","XMLWriter","tree","internalWriter","formatingWriter","preamble","XML_PREAMBLE","build","serializeTo","CDATA_ESCAPE","DEFAULT_NS_MAP","serializeValue","escape","test","otherAttrs","parseNsAttributes","nsTagName","parseGeneric","parseAttributes","parseContainments","parseGenericAttributes","effectiveNs","logNamespaceUsed","nsPropertyTagName","isLocalNs","nsAttributeName","child","genericAttrs","$attrs","logNamespace","addAttribute","warn","isBody","asType","serialize","serializer","getNamespaces","namespaces","prefixMap","uriMap","used","existing","$model","serializeAttributes","collectNsAttrs","hasBody","b","typeNs",19,"capitalize","string","charAt","toUpperCase","slice","lower","toLowerCase","hasLowerCaseAlias","alias","xsi",20,"TinyStack","data","factory","arg",21,"./lib/moddle","./lib/ns","./lib/types",22,"Base",23,"DescriptorBuilder","allTypes","pick","addProperty","addNamedProperty","replaceProperty","oldProperty","newProperty","oldNameNs","setBodyProperty","redefineProperty","nsPrefix","parts","redefines","split","attrName","redefinedProperty","validate","propsByName","assertNotDefined","removeNamedProperty","addIdProperty","definedProperty","definedBy","hasProperty","addTrait","defineProperty","./ns",24,"Factory","createType","ModdleElement","writable","defineModel","defineDescriptor","./base",25,"Properties","registry","Registry","typeCache","cache","getEffectiveDescriptor","nsUri","uriOrPrefix","getPackages","getElementDescriptor","getPropertyDescriptor","./factory","./properties","./registry","./types",26,"defaultPrefix",27,28,"generateId","packageMap","typeMap","registerPackage","registerType","propertyNs","isBuiltIn","definePackage","mapTypes","iterator","superClass","cls","parentNs","builder","./descriptor-builder",29,"BUILTINS","String","Boolean","Integer","Real","Element","TYPE_CONVERTERS","parseInt","parseFloat","converter",30,"associations","isAbstract","default","emumerations","literalValues",31,32,33,"isReadOnly","isUnique","subsettedProperty",34,"./lib/Diagram",35,"bootstrap","bootstrapModules","hasModule","m","addModule","__init__","c","components","injector","Injector","createInjector","configModule","config","coreModule","didi",36,"number","resolution","ensurePx","isNumber","createContainer","document","setAttribute","appendChild","createGroup","group","class","Canvas","graphicsFactory","snap","_snap","_graphicsFactory","setCTM","mstr","Collections","BASE_LAYER","createSnapAt","viewport","_container","_viewport","_layers","parentNode","removeChild","getLayer","layer","getContainer","_updateMarker","getGraphics","removeMarker","getRootElement","_rootElement","override","_ensureValidId","_setParent","_addElement","update","shape","_removeElement","removeShape","removeConnection","sendToFront","bubble","gfxParent","_fireViewboxChange","viewbox","_cachedViewbox","innerBox","matrix","outerBox","getSize","Matrix","translate","localMatrix","inner","scroll","delta","getCTM","dx","dy","createSVGMatrix","multiply","zoom","newScale","center","vbox","min","_setZoom","centerPoint","originalPoint","currentMatrix","scaleMatrix","newMatrix","point","createSVGPoint","currentScale","matrixTransform","inverse","clientWidth","clientHeight","getAbsoluteBBox","transformBBox","../util/Collections",37,"ElementFactory","_uid","Model","../model",38,"ElementRegistry","_elements","ELEMENT_ID","secondaryGfx","elements","map","filtered","keys",39,"Event","EventBus","_listeners","DEFAULT_PRIORITY","stopPropagation","propagationStopped","preventDefault","defaultPrevented","init","priority","callback","listener","_addListener","once","wrappedCallback","arguments","off","_getListeners","originalType","args","Array","shift","handleError",40,"GraphicsFactory","_renderer","GraphicsUtil","Dom","_getChildren","childrenGfx","getChildren","_clear","visual","getVisual","_createContainer","parentGfx","outerGfx","updateContainments","parents","childGfx","reverse","prependTo","../util/Dom","../util/GraphicsUtil",41,"./Canvas","./ElementFactory","./ElementRegistry","./EventBus","./GraphicsFactory",42,"Renderer","CONNECTION_STYLE","SHAPE_STYLE","toSVGPoints","updateLine","gfxGroup","./Snap",43,"snapsvg","./snapsvg-extensions",44,"Styles","defaultTraits","no-fill","no-border","strokeOpacity","no-events","className","additionalAttrs","inject",45,"./Renderer","./Styles",46,"plugin","ch","childNodes","ii","array","getClasses","setClasses","classes","current","hasClass","removeClass","wrap","createElementNS",47,"InteractionEvents","closest","originalEvent","mouseHandler","button","registerEvents","HIT_STYLE","hit","../../draw/Renderer","../../util/Dom","../../util/GraphicsUtil",48,"interactionEvents","./InteractionEvents",49,"Outline","createOutline","OUTLINE_STYLE","updateOutline","outline","OUTLINE_OFFSET",50,"./Outline",51,"Overlays","_ids","ids","_overlayDefaults","show","trigger","minZoom","maxZoom","_overlays","_overlayContainers","_overlayRoot","_getOverlayContainer","overlays","clone","overlay","html","next","_addOverlay","htmlContainer","hide","_updateOverlayContainer","left","_updateOverlay","_createOverlayContainer","_updateRoot","raw","_updateOverlayVisibilty","updateViewbox","deferUpdate","debounce","../../util/IdGenerator",52,"./Overlays",53,"Selection","_selectedElements","deselect","selectedElements","oldSelection","newSelection","isSelected",54,"SelectionBehavior","selection","canExecute","shapes","getOriginalEvent","shiftKey","getOriginal","../../util/Event",55,"SelectionVisuals","MARKER_HOVER","MARKER_SELECTED",56,"selectionVisuals","selectionBehavior","../interaction-events","../outline","./Selection","./SelectionBehavior","./SelectionVisuals",57,"parentRefs","labelRefs","outgoingRefs","incomingRefs","Shape","Root","Label","Connection",58,"isNaN","currentIdx",59,"selector","matchFn","useCapture","addEventListener","removeEventListener","wrappedFn","elementProto","matchPolyfill","ownerDocument","querySelectorAll","mozMatchesSelector","webkitMatchesSelecor","msMatchesSelector",60,"__preventDefault","__stopPropagation","immediate","stopImmediatePropagation","srcEvent","stopEvent","toPoint","pointers","touches","clientX","clientY",61,62,"IdGenerator","_counter","_prefix","random",63,"parseAlign","horizontal","vertical","parsePadding","Text","_config","DEFAULT_BOX_PADDING","layoutNext","lines","fit","fitLine","originalLine","nextLine","remainder","textBBox","getTextBBox","fakeText","textContent","semanticShorten","maxLength","part","shortenedParts","shortenLine","maxWidth","shortenedLine","merge","layouted","ownerSVGElement","totalHeight","sum","tspan",64,"annotate","FN_ARGS","FN_ARG",65,"Module","./annotation","./injector","./module",66,"autoAnnotate","currentlyResolving","providers","_providers","instances","_instances","msg","pivot","returned","dependencies","dep","createPrivateInjectorFactory","privateChildInjector","createChild","forceNewInstances","provider","cacheIdx","privateChildInjectorFactory","fromParentModule","matchedScopes","privateInjectorsCache","privateChildInjectors","privateChildFactories","$scope","scope","factoryMap","arrayUnwrap","__exports__","clonedModule","substring","privateInjector","__modules__","getFromPrivateInjector",67,68,"Collection","./lib/collection","./lib/refs",69,"refs","inverseProperty","unset",70,"defineCollectionProperty","_value","old","ensureBound","./collection"],"mappings":"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","sourcesContent":["!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.BpmnJS=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n'use strict';\n\nvar Diagram = _dereq_('diagram-js'),\n    BpmnModdle = _dereq_('bpmn-moddle'),\n    $ = (window.$),\n    _ = (window._);\n\nvar Importer = _dereq_('./import/Importer');\n\n\nfunction initListeners(diagram, listeners) {\n  var events = diagram.get('eventBus');\n\n  listeners.forEach(function(l) {\n    events.on(l.event, l.handler);\n  });\n}\n\nfunction checkValidationError(err) {\n\n  // check if we can help the user by indicating wrong BPMN 2.0 xml\n  // (in case he or the exporting tool did not get that right)\n\n  var pattern = /unparsable content <([^>]+)> detected([\\s\\S]*)$/;\n  var match = pattern.exec(err.message);\n\n  if (match) {\n    err.message =\n      'unparsable content <' + match[1] + '> detected; ' +\n      'this may indicate an invalid BPMN 2.0 diagram file' + match[2];\n  }\n\n  return err;\n}\n\nvar DEFAULT_OPTIONS = {\n  width: '100%',\n  height: '100%',\n  position: 'relative'\n};\n\n/**\n * A viewer for BPMN 2.0 diagrams\n *\n * @class\n *\n * @param {Object} [options] configuration options to pass to the viewer\n * @param {DOMElement} [options.container] the container to render the viewer in, defaults to body.\n * @param {String|Number} [options.width] the width of the viewer\n * @param {String|Number} [options.height] the height of the viewer\n * @param {Array<didi.Module>} [options.modules] a list of modules to override the default modules\n * @param {Array<didi.Module>} [options.additionalModules] a list of modules to use with the default modules\n */\nfunction Viewer(options) {\n\n  this.options = options = _.extend({}, DEFAULT_OPTIONS, options || {});\n\n  var parent = options.container || $('body');\n\n  var container = $('<div class=\"bjs-container\"></div>').appendTo(parent);\n\n  container.css({\n    width: options.width,\n    height: options.height,\n    position: options.position\n  });\n\n  // unwrap jquery\n  this.container = container.get(0);\n\n\n  /**\n   * The code in the <project-logo></project-logo> area\n   * must not be changed, see http://bpmn.io/license for more information\n   *\n   * <project-logo>\n   */\n\n  /* jshint -W101 */\n\n  // inlined ../resources/bpmnjs.png\n  var logoData = 'iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC';\n\n  /* jshint +W101 */\n\n  var a = $('<a href=\"http://bpmn.io\" target=\"_blank\" class=\"bjs-powered-by\" title=\"Powered by bpmn.io\" />').css({\n    position: 'absolute',\n    bottom: 15,\n    right: 15,\n    zIndex: 100\n  });\n\n  var logo = $('<img/>').attr('src', 'data:image/png;base64,' + logoData).appendTo(a);\n\n  a.appendTo(container);\n\n  /* </project-logo> */\n}\n\nViewer.prototype.importXML = function(xml, done) {\n\n  var self = this;\n\n  this.moddle = this.createModdle();\n\n  this.moddle.fromXML(xml, 'bpmn:Definitions', function(err, definitions) {\n\n    if (err) {\n      err = checkValidationError(err);\n      return done(err);\n    }\n\n    self.importDefinitions(definitions, done);\n  });\n};\n\nViewer.prototype.saveXML = function(options, done) {\n\n  if (!done) {\n    done = options;\n    options = {};\n  }\n\n  var definitions = this.definitions;\n\n  if (!definitions) {\n    return done(new Error('no definitions loaded'));\n  }\n\n  this.moddle.toXML(definitions, options, done);\n};\n\nViewer.prototype.createModdle = function() {\n  return new BpmnModdle();\n};\n\nViewer.prototype.saveSVG = function(options, done) {\n\n  if (!done) {\n    done = options;\n    options = {};\n  }\n\n  var canvas = this.get('canvas');\n\n  var contentNode = canvas.getDefaultLayer(),\n      defsNode = canvas._svg.select('defs');\n\n  var contents = contentNode.innerSVG(),\n      defs = (defsNode && defsNode.outerSVG()) || '';\n\n  var bbox = contentNode.getBBox();\n\n  var svg =\n    '<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n' +\n    '<!-- created with bpmn-js / http://bpmn.io -->\\n' +\n    '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n' +\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" ' +\n         'width=\"' + bbox.width + '\" height=\"' + bbox.height + '\" ' +\n         'viewBox=\"' + bbox.x + ' ' + bbox.y + ' ' + bbox.width + ' ' + bbox.height + '\" version=\"1.1\">' +\n      defs + contents +\n    '</svg>';\n\n  done(null, svg);\n};\n\nViewer.prototype.get = function(name) {\n\n  if (!this.diagram) {\n    throw new Error('no diagram loaded');\n  }\n\n  return this.diagram.get(name);\n};\n\nViewer.prototype.invoke = function(fn) {\n\n  if (!this.diagram) {\n    throw new Error('no diagram loaded');\n  }\n\n  return this.diagram.invoke(fn);\n};\n\nViewer.prototype.importDefinitions = function(definitions, done) {\n\n  // use try/catch to not swallow synchronous exceptions\n  // that may be raised during model parsing\n  try {\n    if (this.diagram) {\n      this.clear();\n    }\n\n    this.definitions = definitions;\n    this.diagram = this._createDiagram(this.options);\n\n    this._init(this.diagram);\n\n    Importer.importBpmnDiagram(this.diagram, definitions, done);\n  } catch (e) {\n    done(e);\n  }\n};\n\nViewer.prototype._init = function(diagram) {\n  initListeners(diagram, this.__listeners || []);\n};\n\nViewer.prototype._createDiagram = function(options) {\n\n  var modules = [].concat(options.modules || this.getModules(), options.additionalModules || []);\n\n  // add self as an available service\n  modules.unshift({\n    bpmnjs: [ 'value', this ],\n    moddle: [ 'value', this.moddle ]\n  });\n\n  options = _.omit(options, 'additionalModules');\n\n  options = _.extend(options, {\n    canvas: { container: this.container },\n    modules: modules\n  });\n\n  return new Diagram(options);\n};\n\n\nViewer.prototype.getModules = function() {\n  return this._modules;\n};\n\n/**\n * Remove all drawn elements from the viewer.\n *\n * After calling this method the viewer can still\n * be reused for opening another diagram.\n */\nViewer.prototype.clear = function() {\n  var diagram = this.diagram;\n\n  if (diagram) {\n    diagram.destroy();\n  }\n};\n\n/**\n * Destroy the viewer instance and remove all its remainders\n * from the document tree.\n */\nViewer.prototype.destroy = function() {\n  // clear underlying diagram\n  this.clear();\n\n  // remove container\n  $(this.container).remove();\n};\n\n/**\n * Register an event listener on the viewer\n *\n * @param {String} event\n * @param {Function} handler\n */\nViewer.prototype.on = function(event, handler) {\n  var diagram = this.diagram,\n      listeners = this.__listeners = this.__listeners || [];\n\n  listeners = this.__listeners || [];\n  listeners.push({ event: event, handler: handler });\n\n  if (diagram) {\n    diagram.get('eventBus').on(event, handler);\n  }\n};\n\n// modules the viewer is composed of\nViewer.prototype._modules = [\n  _dereq_('./core'),\n  _dereq_('diagram-js/lib/features/selection'),\n  _dereq_('diagram-js/lib/features/overlays')\n];\n\nmodule.exports = Viewer;\n\n},{\"./core\":2,\"./import/Importer\":8,\"bpmn-moddle\":13,\"diagram-js\":34,\"diagram-js/lib/features/overlays\":52,\"diagram-js/lib/features/selection\":56}],2:[function(_dereq_,module,exports){\nmodule.exports = {\n  __depends__: [\n    _dereq_('../draw'),\n    _dereq_('../import')\n  ]\n};\n},{\"../draw\":5,\"../import\":10}],3:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar DefaultRenderer = _dereq_('diagram-js/lib/draw/Renderer');\nvar TextUtil = _dereq_('diagram-js/lib/util/Text');\n\nvar DiUtil = _dereq_('../util/Di');\n\nvar createLine = DefaultRenderer.createLine;\n\n\nfunction BpmnRenderer(events, styles, pathMap) {\n\n  DefaultRenderer.call(this, styles);\n\n  var TASK_BORDER_RADIUS = 10;\n  var INNER_OUTER_DIST = 3;\n\n  var LABEL_STYLE = {\n    fontFamily: 'Arial, sans-serif',\n    fontSize: '12px'\n  };\n\n  var textUtil = new TextUtil({\n    style: LABEL_STYLE,\n    size: { width: 100 }\n  });\n\n  var markers = {};\n\n  function addMarker(id, element) {\n    markers[id] = element;\n  }\n\n  function marker(id) {\n    return markers[id];\n  }\n\n  function initMarkers(svg) {\n\n    function createMarker(id, options) {\n      var attrs = _.extend({\n        fill: 'black',\n        strokeWidth: 1,\n        strokeLinecap: 'round',\n        strokeDasharray: 'none'\n      }, options.attrs);\n\n      var ref = options.ref || { x: 0, y: 0 };\n\n      var scale = options.scale || 1;\n\n      // fix for safari / chrome / firefox bug not correctly\n      // resetting stroke dash array\n      if (attrs.strokeDasharray === 'none') {\n        attrs.strokeDasharray = [10000, 1];\n      }\n\n      var marker = options.element\n                     .attr(attrs)\n                     .marker(0, 0, 20, 20, ref.x, ref.y)\n                     .attr({\n                       markerWidth: 20 * scale,\n                       markerHeight: 20 * scale\n                     });\n\n      return addMarker(id, marker);\n    }\n\n\n    createMarker('sequenceflow-end', {\n      element: svg.path('M 1 5 L 11 10 L 1 15 Z'),\n      ref: { x: 11, y: 10 },\n      scale: 0.5\n    });\n\n    createMarker('messageflow-start', {\n      element: svg.circle(6, 6, 5),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: 6, y: 6 }\n    });\n\n    createMarker('messageflow-end', {\n      element: svg.path('M 1 5 L 11 10 L 1 15 Z'),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: 11, y: 10 }\n    });\n\n    createMarker('data-association-end', {\n      element: svg.path('M 1 5 L 11 10 L 1 15'),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: 11, y: 10 },\n      scale: 0.5\n    });\n\n    createMarker('conditional-flow-marker', {\n      element: svg.path('M 0 10 L 8 6 L 16 10 L 8 14 Z'),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: -1, y: 10 },\n      scale: 0.5\n    });\n\n    createMarker('conditional-default-flow-marker', {\n      element: svg.path('M 1 4 L 5 16'),\n      attrs: {\n        stroke: 'black'\n      },\n      ref: { x: -5, y: 10 },\n      scale: 0.5\n    });\n  }\n\n  function computeStyle(custom, traits, defaultStyles) {\n    if (!_.isArray(traits)) {\n      defaultStyles = traits;\n      traits = [];\n    }\n\n    return styles.style(traits || [], _.extend(defaultStyles, custom || {}));\n  }\n\n  function drawCircle(p, width, height, offset, attrs) {\n\n    if (_.isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    var cx = width / 2,\n        cy = height / 2;\n\n    return p.circle(cx, cy, Math.round((width + height) / 4 - offset)).attr(attrs);\n  }\n\n  function drawRect(p, width, height, r, offset, attrs) {\n\n    if (_.isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    return p.rect(offset, offset, width - offset * 2, height - offset * 2, r).attr(attrs);\n  }\n\n  function drawDiamond(p, width, height, attrs) {\n\n    var x_2 = width / 2;\n    var y_2 = height / 2;\n\n    var points = [x_2, 0, width, y_2, x_2, height, 0, y_2 ];\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    return p.polygon(points).attr(attrs);\n  }\n\n  function drawLine(p, waypoints, attrs) {\n    attrs = computeStyle(attrs, [ 'no-fill' ], {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'none'\n    });\n\n    return createLine(waypoints, attrs).appendTo(p);\n  }\n\n  function drawPath(p, d, attrs) {\n\n    attrs = computeStyle(attrs, [ 'no-fill' ], {\n      strokeWidth: 2,\n      stroke: 'black'\n    });\n\n    return p.path(d).attr(attrs);\n  }\n\n  function as(type) {\n    return function(p, element) {\n      return handlers[type](p, element);\n    };\n  }\n\n  function renderer(type) {\n    return handlers[type];\n  }\n\n  function renderEventContent(element, p) {\n\n    var event = getSemantic(element);\n    var isThrowing = isThrowEvent(event);\n\n    if (isTypedEvent(event, 'bpmn:MessageEventDefinition')) {\n      return renderer('bpmn:MessageEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:TimerEventDefinition')) {\n      return renderer('bpmn:TimerEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:ConditionalEventDefinition')) {\n      return renderer('bpmn:ConditionalEventDefinition')(p, element);\n    }\n\n    if (isTypedEvent(event, 'bpmn:SignalEventDefinition')) {\n      return renderer('bpmn:SignalEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition') &&\n      isTypedEvent(event, 'bpmn:TerminateEventDefinition', { parallelMultiple: false })) {\n      return renderer('bpmn:MultipleEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition') &&\n      isTypedEvent(event, 'bpmn:TerminateEventDefinition', { parallelMultiple: true })) {\n      return renderer('bpmn:ParallelMultipleEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:EscalationEventDefinition')) {\n      return renderer('bpmn:EscalationEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:LinkEventDefinition')) {\n      return renderer('bpmn:LinkEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:ErrorEventDefinition')) {\n      return renderer('bpmn:ErrorEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition')) {\n      return renderer('bpmn:CancelEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CompensateEventDefinition')) {\n      return renderer('bpmn:CompensateEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:TerminateEventDefinition')) {\n      return renderer('bpmn:TerminateEventDefinition')(p, element, isThrowing);\n    }\n\n    return null;\n  }\n\n  function renderLabel(p, label, options) {\n    return textUtil.createText(p, label || '', options).addClass('djs-label');\n  }\n\n  function renderEmbeddedLabel(p, element, align) {\n    var semantic = getSemantic(element);\n    return renderLabel(p, semantic.name, { box: element, align: align, padding: 5 });\n  }\n\n  function renderExternalLabel(p, element, align) {\n    var semantic = getSemantic(element);\n\n    if (!semantic.name) {\n      element.hidden = true;\n    }\n\n    return renderLabel(p, semantic.name, { box: element, align: align, style: { fontSize: '11px' } });\n  }\n\n  function renderLaneLabel(p, text, element) {\n    var textBox = renderLabel(p, text, {\n      box: { height: 30, width: element.height },\n      align: 'center-middle'\n    });\n\n    var top = -1 * element.height;\n    textBox.transform(\n      'rotate(270) ' +\n      'translate(' + top + ',' + 0 + ')'\n    );\n  }\n\n  function createPathFromConnection(connection) {\n    var waypoints = connection.waypoints;\n\n    var pathData = 'm  ' + waypoints[0].x + ',' + waypoints[0].y;\n    for (var i = 1; i < waypoints.length; i++) {\n      pathData += 'L' + waypoints[i].x + ',' + waypoints[i].y + ' ';\n    }\n    return pathData;\n  }\n\n  var handlers = {\n    'bpmn:Event': function(p, element, attrs) {\n      return drawCircle(p, element.width, element.height,  attrs);\n    },\n    'bpmn:StartEvent': function(p, element) {\n      var attrs = {};\n      var semantic = getSemantic(element);\n\n      if (!semantic.isInterrupting) {\n        attrs = {\n          strokeDasharray: '6',\n          strokeLinecap: 'round'\n        };\n      }\n\n      var circle = renderer('bpmn:Event')(p, element, attrs);\n\n      renderEventContent(element, p);\n\n      return circle;\n    },\n    'bpmn:MessageEventDefinition': function(p, element, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MESSAGE', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.235,\n          my: 0.315\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'white';\n      var stroke = isThrowing ? 'white' : 'black';\n\n      var messagePath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: stroke\n      });\n\n      return messagePath;\n    },\n    'bpmn:TimerEventDefinition': function(p, element) {\n\n      var circle = drawCircle(p, element.width, element.height, 0.2 * element.height, {\n        strokeWidth: 2\n      });\n\n      var pathData = pathMap.getScaledPath('EVENT_TIMER_WH', {\n        xScaleFactor: 0.75,\n        yScaleFactor: 0.75,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.5,\n          my: 0.5\n        }\n      });\n\n      var path = drawPath(p, pathData, {\n        strokeWidth: 2,\n        strokeLinecap: 'square'\n      });\n\n      for(var i = 0;i < 12;i++) {\n\n        var linePathData = pathMap.getScaledPath('EVENT_TIMER_LINE', {\n          xScaleFactor: 0.75,\n          yScaleFactor: 0.75,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.5,\n            my: 0.5\n          }\n        });\n\n        var width = element.width / 2;\n        var height = element.height / 2;\n\n        var linePath = drawPath(p, linePathData, {\n          strokeWidth: 1,\n          strokeLinecap: 'square',\n          transform: 'rotate(' + (i * 30) + ',' + height + ',' + width + ')'\n        });\n      }\n\n      return circle;\n    },\n    'bpmn:EscalationEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ESCALATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.555\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:ConditionalEventDefinition': function(p, event) {\n      var pathData = pathMap.getScaledPath('EVENT_CONDITIONAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.222\n        }\n      });\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n    },\n    'bpmn:LinkEventDefinition': function(p, event) {\n      var pathData = pathMap.getScaledPath('EVENT_LINK', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.57,\n          my: 0.263\n        }\n      });\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ErrorEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ERROR', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.2,\n          my: 0.722\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:CancelEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_CANCEL_45', {\n        xScaleFactor: 1.0,\n        yScaleFactor: 1.0,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.638,\n          my: -0.055\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      }).transform('rotate(45)');\n    },\n    'bpmn:CompensateEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.201,\n          my: 0.472\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:SignalEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_SIGNAL', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:MultipleEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MULTIPLE', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.222,\n          my: 0.36\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:ParallelMultipleEventDefinition': function(p, event) {\n      var pathData = pathMap.getScaledPath('EVENT_PARALLEL_MULTIPLE', {\n        xScaleFactor: 1.2,\n        yScaleFactor: 1.2,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.458,\n          my: 0.194\n        }\n      });\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n    },\n    'bpmn:EndEvent': function(p, element) {\n      var circle = renderer('bpmn:Event')(p, element, {\n        strokeWidth: 4\n      });\n\n      renderEventContent(element, p, true);\n\n      return circle;\n    },\n    'bpmn:TerminateEventDefinition': function(p, element) {\n      var circle = drawCircle(p, element.width, element.height, 8, {\n        strokeWidth: 4,\n        fill: 'black'\n      });\n\n      return circle;\n    },\n    'bpmn:IntermediateEvent': function(p, element) {\n      var outer = renderer('bpmn:Event')(p, element, { strokeWidth: 1 });\n      var inner = drawCircle(p, element.width, element.height, INNER_OUTER_DIST, { strokeWidth: 1, fill: 'none' });\n\n      renderEventContent(element, p);\n\n      return outer;\n    },\n    'bpmn:IntermediateCatchEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:IntermediateThrowEvent': as('bpmn:IntermediateEvent'),\n\n    'bpmn:Activity': function(p, element, attrs) {\n      return drawRect(p, element.width, element.height, TASK_BORDER_RADIUS, attrs);\n    },\n\n    'bpmn:Task': function(p, element) {\n      var rect = renderer('bpmn:Activity')(p, element);\n      renderEmbeddedLabel(p, element, 'center-middle');\n      attachTaskMarkers(p, element);\n      return rect;\n    },\n    'bpmn:ServiceTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathDataBG = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 12,\n          y: 18\n        }\n      });\n\n      var servicePathBG = drawPath(p, pathDataBG, {\n        strokeWidth: 1,\n        fill: 'none'\n      });\n\n      var fillPathData = pathMap.getScaledPath('TASK_TYPE_SERVICE_FILL', {\n        abspos: {\n          x: 17.2,\n          y: 18\n        }\n      });\n\n      var serviceFillPath = drawPath(p, fillPathData, {\n        strokeWidth: 0,\n        stroke: 'none',\n        fill: 'white'\n      });\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 17,\n          y: 22\n        }\n      });\n\n      var servicePath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'white'\n      });\n\n      return task;\n    },\n    'bpmn:UserTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var x = 15;\n      var y = 12;\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_USER_1', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      var userPath = drawPath(p, pathData, {\n        strokeWidth: 0.5,\n        fill: 'none'\n      });\n\n      var pathData2 = pathMap.getScaledPath('TASK_TYPE_USER_2', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      var userPath2 = drawPath(p, pathData2, {\n        strokeWidth: 0.5,\n        fill: 'none'\n      });\n\n      var pathData3 = pathMap.getScaledPath('TASK_TYPE_USER_3', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      var userPath3 = drawPath(p, pathData3, {\n        strokeWidth: 0.5,\n        fill: 'black'\n      });\n\n      return task;\n    },\n    'bpmn:ManualTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_MANUAL', {\n        abspos: {\n          x: 17,\n          y: 15\n        }\n      });\n\n      var userPath = drawPath(p, pathData, {\n        strokeWidth: 0.25,\n        fill: 'white',\n        stroke: 'black'\n      });\n\n      return task;\n    },\n    'bpmn:SendTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: 21,\n        containerHeight: 14,\n        position: {\n          mx: 0.285,\n          my: 0.357\n        }\n      });\n\n      var sendPath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'black',\n        stroke: 'white'\n      });\n\n      return task;\n    },\n    'bpmn:ReceiveTask' : function(p, element) {\n      var semantic = getSemantic(element);\n\n      var task = renderer('bpmn:Task')(p, element);\n      var pathData;\n\n      if (semantic.instantiate) {\n        drawCircle(p, 28, 28, 20 * 0.22, { strokeWidth: 1 });\n\n        pathData = pathMap.getScaledPath('TASK_TYPE_INSTANTIATING_SEND', {\n          abspos: {\n            x: 7.77,\n            y: 9.52\n          }\n        });\n      } else {\n\n        pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n          xScaleFactor: 0.9,\n          yScaleFactor: 0.9,\n          containerWidth: 21,\n          containerHeight: 14,\n          position: {\n            mx: 0.3,\n            my: 0.4\n          }\n        });\n      }\n\n      var sendPath = drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:ScriptTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SCRIPT', {\n        abspos: {\n          x: 15,\n          y: 20\n        }\n      });\n\n      var scriptPath = drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:BusinessRuleTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var headerPathData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_HEADER', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessHeaderPath = drawPath(p, headerPathData);\n      businessHeaderPath.attr({\n        strokeWidth: 1,\n        fill: 'AAA'\n      });\n\n      var headerData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_MAIN', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessPath = drawPath(p, headerData);\n      businessPath.attr({\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:SubProcess': function(p, element, attrs) {\n      var rect = renderer('bpmn:Activity')(p, element, attrs);\n\n      var semantic = getSemantic(element),\n          di = getDi(element);\n\n      var expanded = DiUtil.isExpanded(semantic);\n\n      var isEventSubProcess = !!semantic.triggeredByEvent;\n      if (isEventSubProcess) {\n        rect.attr({\n          strokeDasharray: '1,2'\n        });\n      }\n\n      renderEmbeddedLabel(p, element, expanded ? 'center-top' : 'center-middle');\n\n      if (expanded) {\n        attachTaskMarkers(p, element);\n      } else {\n        attachTaskMarkers(p, element, ['SubProcessMarker']);\n      }\n\n      return rect;\n    },\n    'bpmn:AdHocSubProcess': function(p, element) {\n      return renderer('bpmn:SubProcess')(p, element);\n    },\n    'bpmn:Transaction': function(p, element) {\n      var outer = renderer('bpmn:SubProcess')(p, element);\n\n      var innerAttrs = styles.style([ 'no-fill', 'no-events' ]);\n      var inner = drawRect(p, element.width, element.height, TASK_BORDER_RADIUS - 2, INNER_OUTER_DIST, innerAttrs);\n\n      return outer;\n    },\n    'bpmn:CallActivity': function(p, element) {\n      return renderer('bpmn:SubProcess')(p, element, {\n        strokeWidth: 5\n      });\n    },\n    'bpmn:Participant': function(p, element) {\n\n      var lane = renderer('bpmn:Lane')(p, element);\n\n      var expandedPool = DiUtil.isExpandedPool(getSemantic(element));\n\n      if (expandedPool) {\n        drawLine(p, [\n          { x: 30, y: 0 },\n          { x: 30, y: element.height }\n        ]);\n        var text = getSemantic(element).name;\n        renderLaneLabel(p, text, element);\n      } else {\n        // Collapsed pool draw text inline\n        var text2 = getSemantic(element).name;\n        renderLabel(p, text2, { box: element, align: 'center-middle' });\n      }\n\n      var participantMultiplicity = !!(getSemantic(element).participantMultiplicity);\n\n      if(participantMultiplicity) {\n        renderer('ParticipantMultiplicityMarker')(p, element);\n      }\n\n      return lane;\n    },\n    'bpmn:Lane': function(p, element) {\n      var rect = drawRect(p, element.width, element.height, 0, {\n        fill: 'none'\n      });\n\n      var semantic = getSemantic(element);\n\n      if (semantic.$type === 'bpmn:Lane') {\n        var text = semantic.name;\n        renderLaneLabel(p, text, element);\n      }\n\n      return rect;\n    },\n    'bpmn:InclusiveGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var circle = drawCircle(p, element.width, element.height, element.height * 0.24, {\n        strokeWidth: 2.5,\n        fill: 'none'\n      });\n\n      return diamond;\n    },\n    'bpmn:ExclusiveGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_EXCLUSIVE', {\n        xScaleFactor: 0.4,\n        yScaleFactor: 0.4,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.32,\n          my: 0.3\n        }\n      });\n\n      if (!!(getDi(element).isMarkerVisible)) {\n        drawPath(p, pathData, {\n          strokeWidth: 1,\n          fill: 'black'\n        });\n      }\n\n      return diamond;\n    },\n    'bpmn:ComplexGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_COMPLEX', {\n        xScaleFactor: 0.5,\n        yScaleFactor:0.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.26\n        }\n      });\n\n      var complexPath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n\n      return diamond;\n    },\n    'bpmn:ParallelGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n        xScaleFactor: 0.6,\n        yScaleFactor:0.6,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.2\n        }\n      });\n\n      var parallelPath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n\n      return diamond;\n    },\n    'bpmn:EventBasedGateway': function(p, element) {\n\n      var semantic = getSemantic(element);\n\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var outerCircle = drawCircle(p, element.width, element.height, element.height * 0.20, {\n        strokeWidth: 1,\n        fill: 'none'\n      });\n\n      var type = semantic.eventGatewayType;\n      var instantiate = !!semantic.instantiate;\n\n      function drawEvent() {\n\n        var pathData = pathMap.getScaledPath('GATEWAY_EVENT_BASED', {\n          xScaleFactor: 0.18,\n          yScaleFactor: 0.18,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.36,\n            my: 0.44\n          }\n        });\n\n        var eventPath = drawPath(p, pathData, {\n          strokeWidth: 2,\n          fill: 'none'\n        });\n      }\n\n      if (type === 'Parallel') {\n\n        var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n          xScaleFactor: 0.4,\n          yScaleFactor:0.4,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.474,\n            my: 0.296\n          }\n        });\n\n        var parallelPath = drawPath(p, pathData);\n        parallelPath.attr({\n          strokeWidth: 1,\n          fill: 'none'\n        });\n      } else if (type === 'Exclusive') {\n\n        if (!instantiate) {\n          var innerCircle = drawCircle(p, element.width, element.height, element.height * 0.26);\n          innerCircle.attr({\n            strokeWidth: 1,\n            fill: 'none'\n          });\n        }\n\n        drawEvent();\n      }\n\n\n      return diamond;\n    },\n    'bpmn:Gateway': function(p, element) {\n      return drawDiamond(p, element.width, element.height);\n    },\n    'bpmn:SequenceFlow': function(p, element) {\n      var pathData = createPathFromConnection(element);\n      var path = drawPath(p, pathData, {\n        markerEnd: marker('sequenceflow-end')\n      });\n\n      var sequenceFlow = getSemantic(element);\n      var source = element.source.businessObject;\n\n      // conditional flow marker\n      if (sequenceFlow.conditionExpression && source.$instanceOf('bpmn:Task')) {\n        path.attr({\n          markerStart: marker('conditional-flow-marker')\n        });\n      }\n\n      // default marker\n      if (source.default && source.$instanceOf('bpmn:Gateway') && source.default === sequenceFlow) {\n        path.attr({\n          markerStart: marker('conditional-default-flow-marker')\n        });\n      }\n\n      return path;\n    },\n    'bpmn:Association': function(p, element, attrs) {\n\n      attrs = _.extend({\n        strokeDasharray: '1,6',\n        strokeLinecap: 'round'\n      }, attrs || {});\n\n      // TODO(nre): style according to directed state\n      return drawLine(p, element.waypoints, attrs);\n    },\n    'bpmn:DataInputAssociation': function(p, element) {\n      return renderer('bpmn:Association')(p, element, {\n        markerEnd: marker('data-association-end')\n      });\n    },\n    'bpmn:DataOutputAssociation': function(p, element) {\n      return renderer('bpmn:Association')(p, element, {\n        markerEnd: marker('data-association-end')\n      });\n    },\n    'bpmn:MessageFlow': function(p, element) {\n\n      var di = getDi(element);\n\n      var pathData = createPathFromConnection(element);\n      var path = drawPath(p, pathData, {\n        markerEnd: marker('messageflow-end'),\n        markerStart: marker('messageflow-start'),\n        strokeDasharray: '10',\n        strokeLinecap: 'round',\n        strokeWidth: 1\n      });\n\n      if (!!di.messageVisibleKind) {\n        var midPoint = path.getPointAtLength(path.getTotalLength() / 2);\n\n        var markerPathData = pathMap.getScaledPath('MESSAGE_FLOW_MARKER', {\n          abspos: {\n            x: midPoint.x,\n            y: midPoint.y\n          }\n        });\n\n        var messageAttrs = { strokeWidth: 1 };\n\n        if (di.messageVisibleKind === 'initiating') {\n          messageAttrs.fill = 'white';\n          messageAttrs.stroke = 'black';\n        } else {\n          messageAttrs.fill = '#888';\n          messageAttrs.stroke = 'white';\n        }\n\n        drawPath(p, markerPathData, messageAttrs);\n      }\n\n      return path;\n    },\n    'bpmn:DataObject': function(p, element) {\n      var pathData = pathMap.getScaledPath('DATA_OBJECT_PATH', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.474,\n          my: 0.296\n        }\n      });\n\n      var elementObject = drawPath(p, pathData, { fill: 'white' });\n\n      var semantic = getSemantic(element);\n\n      if (isCollection(semantic)) {\n        renderDataItemCollection(p, element);\n      }\n\n      return elementObject;\n    },\n    'bpmn:DataObjectReference': as('bpmn:DataObject'),\n    'bpmn:DataInput': function(p, element) {\n\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      // page\n      var elementObject = renderer('bpmn:DataObject')(p, element);\n\n      // arrow\n      var elementInput = drawPath(p, arrowPathData, { strokeWidth: 1 });\n\n      return elementObject;\n    },\n    'bpmn:DataOutput': function(p, element) {\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      // page\n      var elementObject = renderer('bpmn:DataObject')(p, element);\n\n      // arrow\n      var elementInput = drawPath(p, arrowPathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n\n      return elementObject;\n    },\n    'bpmn:DataStoreReference': function(p, element) {\n      var DATA_STORE_PATH = pathMap.getScaledPath('DATA_STORE', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0,\n          my: 0.133\n        }\n      });\n\n      var elementStore = drawPath(p, DATA_STORE_PATH, {\n        strokeWidth: 2,\n        fill: 'white'\n      });\n\n      return elementStore;\n    },\n    'bpmn:BoundaryEvent': function(p, element) {\n\n      var semantic = getSemantic(element),\n          cancel = semantic.cancelActivity;\n\n      var attrs = {\n        strokeLinecap: 'round',\n        strokeWidth: 1\n      };\n\n      if (!cancel) {\n        attrs.strokeDasharray = '6';\n      }\n\n      var outer = renderer('bpmn:Event')(p, element, attrs);\n      var inner = drawCircle(p, element.width, element.height, INNER_OUTER_DIST, attrs);\n\n      renderEventContent(element, p);\n\n      return outer;\n    },\n    'bpmn:Group': function(p, element) {\n      return drawRect(p, element.width, element.height, TASK_BORDER_RADIUS, {\n        strokeWidth: 1,\n        strokeDasharray: '8,3,1,3',\n        fill: 'none',\n        pointerEvents: 'none'\n      });\n    },\n    'label': function(p, element) {\n      return renderExternalLabel(p, element, '');\n    },\n    'bpmn:TextAnnotation': function(p, element) {\n      var style = {\n        'fill': 'none',\n        'stroke': 'none'\n      };\n      var textElement = drawRect(p, element.width, element.height, 0, 0, style);\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n      drawPath(p, textPathData);\n\n      var text = getSemantic(element).text || '';\n      renderLabel(p, text, { box: element, align: 'left-middle', padding: 5 });\n\n      return textElement;\n    },\n    'ParticipantMultiplicityMarker': function(p, element) {\n      var subProcessPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2) / element.width),\n          my: (element.height - 15) / element.height\n        }\n      });\n\n      drawPath(p, subProcessPath);\n    },\n    'SubProcessMarker': function(p, element) {\n      var markerRect = drawRect(p, 14, 14, 0, {\n        strokeWidth: 1\n      });\n\n      // Process marker is placed in the middle of the box\n      // therefore fixed values can be used here\n      markerRect.transform('translate(' + (element.width / 2 - 7.5) + ',' + (element.height - 20) + ')');\n\n      var subProcessPath = pathMap.getScaledPath('MARKER_SUB_PROCESS', {\n        xScaleFactor: 1.5,\n        yScaleFactor: 1.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 - 7.5) / element.width,\n          my: (element.height - 20) / element.height\n        }\n      });\n\n      drawPath(p, subProcessPath);\n    },\n    'ParallelMarker': function(p, element, position) {\n      var subProcessPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.parallel) / element.width),\n          my: (element.height - 20) / element.height\n        }\n      });\n      drawPath(p, subProcessPath);\n    },\n    'SequentialMarker': function(p, element, position) {\n      var sequentialPath = pathMap.getScaledPath('MARKER_SEQUENTIAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.seq) / element.width),\n          my: (element.height - 19) / element.height\n        }\n      });\n      drawPath(p, sequentialPath);\n    },\n    'CompensationMarker': function(p, element, position) {\n      var compensationPath = pathMap.getScaledPath('MARKER_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.compensation) / element.width),\n          my: (element.height - 13) / element.height\n        }\n      });\n      drawPath(p, compensationPath, { strokeWidth: 1 });\n    },\n    'LoopMarker': function(p, element, position) {\n      var loopPath = pathMap.getScaledPath('MARKER_LOOP', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.loop) / element.width),\n          my: (element.height - 7) / element.height\n        }\n      });\n\n      drawPath(p, loopPath, {\n        strokeWidth: 1,\n        fill: 'none',\n        strokeLinecap: 'round',\n        strokeMiterlimit: 0.5\n      });\n    },\n    'AdhocMarker': function(p, element, position) {\n      var loopPath = pathMap.getScaledPath('MARKER_ADHOC', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.adhoc) / element.width),\n          my: (element.height - 15) / element.height\n        }\n      });\n\n      drawPath(p, loopPath, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n    }\n  };\n\n  function attachTaskMarkers(p, element, taskMarkers) {\n    var obj = getSemantic(element);\n\n    var subprocess = _.contains(taskMarkers, 'SubProcessMarker');\n    var position;\n\n    if (subprocess) {\n      position = {\n        seq: -21,\n        parallel: -22,\n        compensation: -42,\n        loop: -18,\n        adhoc: 10\n      };\n    } else {\n      position = {\n        seq: -3,\n        parallel: -6,\n        compensation: -27,\n        loop: 0,\n        adhoc: 10\n      };\n    }\n\n    _.forEach(taskMarkers, function(marker) {\n      renderer(marker)(p, element, position);\n    });\n\n    if (obj.$type === 'bpmn:AdHocSubProcess') {\n      renderer('AdhocMarker')(p, element, position);\n    }\n    if (obj.loopCharacteristics && obj.loopCharacteristics.isSequential === undefined) {\n      renderer('LoopMarker')(p, element, position);\n      return;\n    }\n    if (obj.loopCharacteristics &&\n      obj.loopCharacteristics.isSequential !== undefined &&\n      !obj.loopCharacteristics.isSequential) {\n      renderer('ParallelMarker')(p, element, position);\n    }\n    if (obj.loopCharacteristics && !!obj.loopCharacteristics.isSequential) {\n      renderer('SequentialMarker')(p, element, position);\n    }\n    if (!!obj.isForCompensation) {\n      renderer('CompensationMarker')(p, element, position);\n    }\n  }\n\n  function drawShape(parent, element) {\n    var type = element.type;\n    var h = handlers[type];\n\n    /* jshint -W040 */\n    if (!h) {\n      return DefaultRenderer.prototype.drawShape.apply(this, [ parent, element ]);\n    } else {\n      return h(parent, element);\n    }\n  }\n\n  function drawConnection(parent, element) {\n    var type = element.type;\n    var h = handlers[type];\n\n    /* jshint -W040 */\n    if (!h) {\n      return DefaultRenderer.prototype.drawConnection.apply(this, [ parent, element ]);\n    } else {\n      return h(parent, element);\n    }\n  }\n\n  function renderDataItemCollection(p, element) {\n\n    var yPosition = (element.height - 16) / element.height;\n\n    var pathData = pathMap.getScaledPath('DATA_OBJECT_COLLECTION_PATH', {\n      xScaleFactor: 1,\n      yScaleFactor: 1,\n      containerWidth: element.width,\n      containerHeight: element.height,\n      position: {\n        mx: 0.451,\n        my: yPosition\n      }\n    });\n\n    var collectionPath = drawPath(p, pathData, {\n      strokeWidth: 2\n    });\n  }\n\n  function isCollection(element, filter) {\n    return element.isCollection ||\n           (element.elementObjectRef && element.elementObjectRef.isCollection);\n  }\n\n  function getDi(element) {\n    return element.businessObject.di;\n  }\n\n  function getSemantic(element) {\n    return element.businessObject;\n  }\n\n  /**\n   * Checks if eventDefinition of the given element matches with semantic type.\n   *\n   * @return {boolean} true if element is of the given semantic type\n   */\n  function isTypedEvent(event, eventDefinitionType, filter) {\n\n    function matches(definition, filter) {\n      return _.all(filter, function(val, key) {\n\n        // we want a == conversion here, to be able to catch\n        // undefined == false and friends\n        /* jshint -W116 */\n        return definition[key] == val;\n      });\n    }\n\n    return _.any(event.eventDefinitions, function(definition) {\n      return definition.$type === eventDefinitionType && matches(event, filter);\n    });\n  }\n\n  function isThrowEvent(event) {\n    return (event.$type === 'bpmn:IntermediateThrowEvent') || (event.$type === 'bpmn:EndEvent');\n  }\n\n  // hook onto canvas init event to initialize\n  // connection start/end markers on svg\n  events.on('canvas.init', function(event) {\n    initMarkers(event.svg);\n  });\n\n  this.drawShape = drawShape;\n  this.drawConnection = drawConnection;\n}\n\nBpmnRenderer.prototype = Object.create(DefaultRenderer.prototype);\n\n\nBpmnRenderer.$inject = [ 'eventBus', 'styles', 'pathMap' ];\n\nmodule.exports = BpmnRenderer;\n},{\"../util/Di\":11,\"diagram-js/lib/draw/Renderer\":42,\"diagram-js/lib/util/Text\":63}],4:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Map containing SVG paths needed by BpmnRenderer.\n */\n\nfunction PathMap(Snap) {\n\n  /**\n   * Contains a map of path elements\n   *\n   * <h1>Path definition</h1>\n   * A parameterized path is defined like this:\n   * <pre>\n   * 'GATEWAY_PARALLEL': {\n   *   d: 'm {mx},{my} {e.x0},0 0,{e.x1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} ' +\n          '-{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z',\n   *   height: 17.5,\n   *   width:  17.5,\n   *   heightElements: [2.5, 7.5],\n   *   widthElements: [2.5, 7.5]\n   * }\n   * </pre>\n   * <p>It's important to specify a correct <b>height and width</b> for the path as the scaling\n   * is based on the ratio between the specified height and width in this object and the\n   * height and width that is set as scale target (Note x,y coordinates will be scaled with\n   * individual ratios).</p>\n   * <p>The '<b>heightElements</b>' and '<b>widthElements</b>' array must contain the values that will be scaled.\n   * The scaling is based on the computed ratios.\n   * Coordinates on the y axis should be in the <b>heightElement</b>'s array, they will be scaled using\n   * the computed ratio coefficient.\n   * In the parameterized path the scaled values can be accessed through the 'e' object in {} brackets.\n   *   <ul>\n   *    <li>The values for the y axis can be accessed in the path string using {e.y0}, {e.y1}, ....</li>\n   *    <li>The values for the x axis can be accessed in the path string using {e.x0}, {e.x1}, ....</li>\n   *   </ul>\n   *   The numbers x0, x1 respectively y0, y1, ... map to the corresponding array index.\n   * </p>\n   */\n  this.pathMap = {\n    'EVENT_MESSAGE': {\n      d: 'm {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}',\n      height: 36,\n      width:  36,\n      heightElements: [6, 14],\n      widthElements: [10.5, 21]\n    },\n    'EVENT_SIGNAL': {\n      d: 'M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z',\n      height: 36,\n      width: 36,\n      heightElements: [18],\n      widthElements: [10, 20]\n    },\n    'EVENT_ESCALATION': {\n      d: 'm {mx},{my} c -{e.x1},{e.y0} -{e.x3},{e.y1} -{e.x5},{e.y4} {e.x1},-{e.y3} {e.x3},-{e.y5} {e.x5},-{e.y6} ' +\n        '{e.x0},{e.y3} {e.x2},{e.y5} {e.x4},{e.y6} -{e.x0},-{e.y0} -{e.x2},-{e.y1} -{e.x4},-{e.y4} z',\n      height: 36,\n      width: 36,\n      heightElements: [2.382, 4.764, 4.926, 6.589333, 7.146, 13.178667, 19.768],\n      widthElements: [2.463, 2.808, 4.926, 5.616, 7.389, 8.424]\n    },\n    'EVENT_CONDITIONAL': {\n      d: 'M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z ' +\n         'M {e.x2},{e.y3} l {e.x0},0 ' +\n         'M {e.x2},{e.y4} l {e.x0},0 ' +\n         'M {e.x2},{e.y5} l {e.x0},0 ' +\n         'M {e.x2},{e.y6} l {e.x0},0 ' +\n         'M {e.x2},{e.y7} l {e.x0},0 ' +\n         'M {e.x2},{e.y8} l {e.x0},0 ',\n      height: 36,\n      width:  36,\n      heightElements: [8.5, 14.5, 18, 11.5, 14.5, 17.5, 20.5, 23.5, 26.5],\n      widthElements:  [10.5, 14.5, 12.5]\n    },\n    'EVENT_LINK': {\n      d: 'm {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z',\n      height: 36,\n      width: 36,\n      heightElements: [4.4375, 6.75, 7.8125],\n      widthElements: [9.84375, 13.5]\n    },\n    'EVENT_ERROR': {\n      d: 'm {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z',\n      height: 36,\n      width: 36,\n      heightElements: [0.023, 8.737, 8.151, 16.564, 10.591, 8.714],\n      widthElements: [0.085, 6.672, 6.97, 4.273, 5.337, 6.636]\n    },\n    'EVENT_CANCEL_45': {\n      d: 'm {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 ' +\n        '0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z',\n      height: 36,\n      width: 36,\n      heightElements: [4.75, 8.5],\n      widthElements: [4.75, 8.5]\n    },\n    'EVENT_COMPENSATION': {\n      d: 'm {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x0},0 {e.x0},-{e.y0} 0,{e.y1} z',\n      height: 36,\n      width: 36,\n      heightElements: [5, 10],\n      widthElements: [10]\n    },\n    'EVENT_TIMER_WH': {\n      d: 'M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ',\n      height: 36,\n      width:  36,\n      heightElements: [10, 2],\n      widthElements: [3, 7]\n    },\n    'EVENT_TIMER_LINE': {\n      d:  'M {mx},{my} ' +\n          'm {e.x0},{e.y0} l -{e.x1},{e.y1} ',\n      height: 36,\n      width:  36,\n      heightElements: [10, 3],\n      widthElements: [0, 0]\n    },\n    'EVENT_MULTIPLE': {\n      d:'m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z',\n      height: 36,\n      width:  36,\n      heightElements: [6.28099, 12.56199],\n      widthElements: [3.1405, 9.42149, 12.56198]\n    },\n    'EVENT_PARALLEL_MULTIPLE': {\n      d:'m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} ' +\n        '-{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z',\n      height: 36,\n      width:  36,\n      heightElements: [2.56228, 7.68683],\n      widthElements: [2.56228, 7.68683]\n    },\n    'GATEWAY_EXCLUSIVE': {\n      d:'m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} ' +\n                    '{e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} ' +\n                    '{e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z',\n      height: 17.5,\n      width:  17.5,\n      heightElements: [8.5, 6.5312, -6.5312, -8.5],\n      widthElements:  [6.5, -6.5, 3, -3, 5, -5]\n    },\n    'GATEWAY_PARALLEL': {\n      d:'m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 ' +\n        '0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z',\n      height: 30,\n      width:  30,\n      heightElements: [5, 12.5],\n      widthElements: [5, 12.5]\n    },\n    'GATEWAY_EVENT_BASED': {\n      d:'m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z',\n      height: 11,\n      width:  11,\n      heightElements: [-6, 6, 12, -12],\n      widthElements: [9, -3, -12]\n    },\n    'GATEWAY_COMPLEX': {\n      d:'m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} ' +\n        '{e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} ' +\n        '{e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} ' +\n        '-{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z',\n      height: 17.125,\n      width:  17.125,\n      heightElements: [4.875, 3.4375, 2.125, 3],\n      widthElements: [3.4375, 2.125, 4.875, 3]\n    },\n    'DATA_OBJECT_PATH': {\n      d:'m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0',\n      height: 61,\n      width:  51,\n      heightElements: [10, 50, 60],\n      widthElements: [10, 40, 50, 60]\n    },\n    'DATA_OBJECT_COLLECTION_PATH': {\n      d:'m {mx}, {my} ' +\n        'm  0 15  l 0 -15 ' +\n        'm  4 15  l 0 -15 ' +\n        'm  4 15  l 0 -15 ',\n      height: 61,\n      width:  51,\n      heightElements: [12],\n      widthElements: [1, 6, 12, 15]\n    },\n    'DATA_ARROW': {\n      d:'m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z',\n      height: 61,\n      width:  51,\n      heightElements: [],\n      widthElements: []\n    },\n    'DATA_STORE': {\n      d:'m  {mx},{my} ' +\n        'l  0,{e.y2} ' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 ' +\n        'l  0,-{e.y2} ' +\n        'c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 ' +\n        'm  -{e.x2},{e.y0}' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0' +\n        'm  -{e.x2},{e.y0}' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0',\n      height: 61,\n      width:  61,\n      heightElements: [7, 10, 45],\n      widthElements:  [2, 58, 60]\n    },\n    'TEXT_ANNOTATION': {\n      d: 'm {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0',\n      height: 30,\n      width: 10,\n      heightElements: [30],\n      widthElements: [10]\n    },\n    'MARKER_SUB_PROCESS': {\n      d: 'm{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_PARALLEL': {\n      d: 'm{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_SEQUENTIAL': {\n      d: 'm{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_COMPENSATION': {\n      d: 'm {mx},{my} 8,-5 0,10 z m 9,0 8,-5 0,10 z',\n      height: 10,\n      width: 21,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_LOOP': {\n      d: 'm {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 ' +\n        '-6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 ' +\n        '0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 ' +\n        'l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902',\n      height: 13.9,\n      width: 13.7,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_ADHOC': {\n      d: 'm {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 ' +\n        '3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 ' +\n        '1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 ' +\n        '-3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 ' +\n        '-2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z',\n      height: 4,\n      width: 15,\n      heightElements: [],\n      widthElements: []\n    },\n    'TASK_TYPE_SEND': {\n      d: 'm {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}',\n      height: 14,\n      width:  21,\n      heightElements: [6, 14],\n      widthElements: [10.5, 21]\n    },\n    'TASK_TYPE_SCRIPT': {\n      d: 'm {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 ' +\n        'c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z ' +\n        'm -7,-12 l 5,0 ' +\n        'm -4.5,3 l 4.5,0 ' +\n        'm -3,3 l 5,0' +\n        'm -4,3 l 5,0',\n      height: 15,\n      width:  12.6,\n      heightElements: [6, 14],\n      widthElements: [10.5, 21]\n    },\n    'TASK_TYPE_USER_1': {\n      d: 'm {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 ' +\n        '-4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 ' +\n        '0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 ' +\n        'h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 z' +\n        'm -8,6 l 0,5.5 m 11,0 l 0,-5'\n    },\n    'TASK_TYPE_USER_2': {\n      d: 'm {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 ' +\n        '-2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 '\n    },\n    'TASK_TYPE_USER_3': {\n      d: 'm {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 ' +\n        '4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 ' +\n        '-4.20799998,3.36699999 -4.20699998,4.34799999 z'\n    },\n    'TASK_TYPE_MANUAL': {\n      d: 'm {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 ' +\n        '-0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 ' +\n        '0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 ' +\n        '-1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 ' +\n        '0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 ' +\n        '-10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 ' +\n        '2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 ' +\n        '-0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 ' +\n        '-1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 ' +\n        '-0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 ' +\n        '0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 ' +\n        '-5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z'\n    },\n    'TASK_TYPE_INSTANTIATING_SEND': {\n      d: 'm {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6'\n    },\n    'TASK_TYPE_SERVICE': {\n      d: 'm {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 ' +\n        '0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 ' +\n        '-1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 ' +\n        'v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 ' +\n        '-0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 ' +\n        '-1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 ' +\n        'h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 ' +\n        '-0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 ' +\n        'c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 ' +\n        'l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 ' +\n        '0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 ' +\n        'c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z ' +\n        'm 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 ' +\n        '0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 ' +\n        '0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z'\n    },\n    'TASK_TYPE_SERVICE_FILL': {\n      d: 'm {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 ' +\n        '0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 ' +\n        '0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z'\n    },\n    'TASK_TYPE_BUSINESS_RULE_HEADER': {\n      d: 'm {mx},{my} 0,4 20,0 0,-4 z'\n    },\n    'TASK_TYPE_BUSINESS_RULE_MAIN': {\n      d: 'm {mx},{my} 0,12 20,0 0,-12 z' +\n        'm 0,8 l 20,0 ' +\n        'm -13,-4 l 0,8'\n    },\n    'MESSAGE_FLOW_MARKER': {\n      d: 'm {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6'\n    }\n  };\n\n  this.getRawPath = function getRawPath(pathId) {\n    return this.pathMap[pathId].d;\n  };\n\n  /**\n   * Scales the path to the given height and width.\n   * <h1>Use case</h1>\n   * <p>Use case is to scale the content of elements (event, gateways) based\n   * on the element bounding box's size.\n   * </p>\n   * <h1>Why not transform</h1>\n   * <p>Scaling a path with transform() will also scale the stroke and IE does not support\n   * the option 'non-scaling-stroke' to prevent this.\n   * Also there are use cases where only some parts of a path should be\n   * scaled.</p>\n   *\n   * @param {String} pathId The ID of the path.\n   * @param {Object} param <p>\n   *   Example param object scales the path to 60% size of the container (data.width, data.height).\n   *   <pre>\n   *   {\n   *     xScaleFactor: 0.6,\n   *     yScaleFactor:0.6,\n   *     containerWidth: data.width,\n   *     containerHeight: data.height,\n   *     position: {\n   *       mx: 0.46,\n   *       my: 0.2,\n   *     }\n   *   }\n   *   </pre>\n   *   <ul>\n   *    <li>targetpathwidth = xScaleFactor * containerWidth</li>\n   *    <li>targetpathheight = yScaleFactor * containerHeight</li>\n   *    <li>Position is used to set the starting coordinate of the path. M is computed:\n    *    <ul>\n    *      <li>position.x * containerWidth</li>\n    *      <li>position.y * containerHeight</li>\n    *    </ul>\n    *    Center of the container <pre> position: {\n   *       mx: 0.5,\n   *       my: 0.5,\n   *     }</pre>\n   *     Upper left corner of the container\n   *     <pre> position: {\n   *       mx: 0.0,\n   *       my: 0.0,\n   *     }</pre>\n   *    </li>\n   *   </ul>\n   * </p>\n   *\n   */\n  this.getScaledPath = function getScaledPath(pathId, param) {\n    var rawPath = this.pathMap[pathId];\n\n    // positioning\n    // compute the start point of the path\n    var mx, my;\n\n    if(!!param.abspos) {\n      mx = param.abspos.x;\n      my = param.abspos.y;\n    } else {\n      mx = param.containerWidth * param.position.mx;\n      my = param.containerHeight * param.position.my;\n    }\n\n    var coordinates = {}; //map for the scaled coordinates\n    if(param.position) {\n\n      // path\n      var heightRatio = (param.containerHeight / rawPath.height) * param.yScaleFactor;\n      var widthRatio = (param.containerWidth / rawPath.width) * param.xScaleFactor;\n\n\n      //Apply height ratio\n      for (var heightIndex = 0; heightIndex < rawPath.heightElements.length; heightIndex++) {\n        coordinates['y' + heightIndex] = rawPath.heightElements[heightIndex] * heightRatio;\n      }\n\n      //Apply width ratio\n      for (var widthIndex = 0; widthIndex < rawPath.widthElements.length; widthIndex++) {\n        coordinates['x' + widthIndex] = rawPath.widthElements[widthIndex] * widthRatio;\n      }\n    }\n\n    //Apply value to raw path\n    var path = Snap.format(\n      rawPath.d, {\n        mx: mx,\n        my: my,\n        e: coordinates\n      }\n    );\n    return path;\n  };\n}\n\n\nPathMap.$inject = [ 'snap' ];\n\nmodule.exports = PathMap;\n\n},{}],5:[function(_dereq_,module,exports){\nmodule.exports = {\n  renderer: [ 'type', _dereq_('./BpmnRenderer') ],\n  pathMap: [ 'type', _dereq_('./PathMap') ]\n};\n},{\"./BpmnRenderer\":3,\"./PathMap\":4}],6:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar LabelUtil = _dereq_('../util/Label');\n\nvar hasExternalLabel = LabelUtil.hasExternalLabel,\n    getExternalLabelBounds = LabelUtil.getExternalLabelBounds,\n    isExpanded = _dereq_('../util/Di').isExpanded,\n    elementToString = _dereq_('./Util').elementToString;\n\n\nfunction elementData(semantic, attrs) {\n  return _.extend({\n    id: semantic.id,\n    type: semantic.$type,\n    businessObject: semantic\n  }, attrs);\n}\n\nfunction collectWaypoints(waypoints) {\n  return _.collect(waypoints, function(p) {\n    return { x: p.x, y: p.y };\n  });\n}\n\n\n/**\n * An importer that adds bpmn elements to the canvas\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {ElementFactory} elementFactory\n * @param {ElementRegistry} elementRegistry\n */\nfunction BpmnImporter(eventBus, canvas, elementFactory, elementRegistry) {\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  this._elementFactory = elementFactory;\n  this._elementRegistry = elementRegistry;\n}\n\nBpmnImporter.$inject = [ 'eventBus', 'canvas', 'elementFactory', 'elementRegistry' ];\n\nmodule.exports = BpmnImporter;\n\n\n/**\n * Add bpmn element (semantic) to the canvas onto the\n * specified parent shape.\n */\nBpmnImporter.prototype.add = function(semantic, parentElement) {\n\n  var di = semantic.di,\n      element;\n\n  // ROOT ELEMENT\n  // handle the special case that we deal with a\n  // invisible root element (process or collaboration)\n  if (di.$instanceOf('bpmndi:BPMNPlane')) {\n\n    // add a virtual element (not being drawn)\n    element = this._elementFactory.createRoot(elementData(semantic));\n\n    this._canvas.setRootElement(element);\n  }\n\n  // SHAPE\n  else if (di.$instanceOf('bpmndi:BPMNShape')) {\n\n    var collapsed = !isExpanded(semantic);\n    var hidden = parentElement && (parentElement.hidden || parentElement.collapsed);\n\n    var bounds = semantic.di.bounds;\n\n    element = this._elementFactory.createShape(elementData(semantic, {\n      collapsed: collapsed,\n      hidden: hidden,\n      x: Math.round(bounds.x),\n      y: Math.round(bounds.y),\n      width: Math.round(bounds.width),\n      height: Math.round(bounds.height)\n    }));\n\n    this._canvas.addShape(element, parentElement);\n  }\n\n  // CONNECTION\n  else if (di.$instanceOf('bpmndi:BPMNEdge')) {\n\n    var source = this._getSource(semantic),\n        target = this._getTarget(semantic);\n\n    element = this._elementFactory.createConnection(elementData(semantic, {\n      source: source,\n      target: target,\n      waypoints: collectWaypoints(semantic.di.waypoint)\n    }));\n\n    this._canvas.addConnection(element, parentElement);\n  } else {\n    throw new Error('unknown di ' + elementToString(di) + ' for element ' + elementToString(semantic));\n  }\n\n  // (optional) LABEL\n  if (hasExternalLabel(semantic)) {\n    this.addLabel(semantic, element);\n  }\n\n\n  this._eventBus.fire('bpmnElement.added', { element: element });\n\n  return element;\n};\n\n\n/**\n * add label for an element\n */\nBpmnImporter.prototype.addLabel = function(semantic, element) {\n  var bounds = getExternalLabelBounds(semantic, element);\n\n  var label = this._elementFactory.createLabel(elementData(semantic, {\n    id: semantic.id + '_label',\n    labelTarget: element,\n    type: 'label',\n    hidden: element.hidden,\n    x: Math.round(bounds.x),\n    y: Math.round(bounds.y),\n    width: Math.round(bounds.width),\n    height: Math.round(bounds.height)\n  }));\n\n  return this._canvas.addShape(label, element.parent);\n};\n\n/**\n * Return the drawn connection end based on the given side.\n *\n * @throws {Error} if the end is not yet drawn\n */\nBpmnImporter.prototype._getEnd = function(semantic, side) {\n\n  var element,\n      refSemantic,\n      refIsParent,\n      type = semantic.$type;\n\n  refSemantic = semantic[side + 'Ref'];\n\n  // handle mysterious isMany DataAssociation#sourceRef\n  if (side === 'source' && type === 'bpmn:DataInputAssociation') {\n    refSemantic = refSemantic && refSemantic[0];\n  }\n\n  // fix source / target for DataInputAssociation / DataOutputAssociation\n  if (side === 'source' && type === 'bpmn:DataOutputAssociation' ||\n      side === 'target' && type === 'bpmn:DataInputAssociation') {\n\n    refSemantic = semantic.$parent;\n  }\n\n  element = refSemantic && this._getElement(refSemantic);\n\n  if (element) {\n    return element;\n  }\n\n  if (refSemantic) {\n    throw new Error(\n      'element ' + elementToString(refSemantic) + ' referenced by ' +\n      elementToString(semantic) + '#' + side + 'Ref not yet drawn');\n  } else {\n    throw new Error(elementToString(semantic) + '#' + side + 'Ref not specified');\n  }\n};\n\nBpmnImporter.prototype._getSource = function(semantic) {\n  return this._getEnd(semantic, 'source');\n};\n\nBpmnImporter.prototype._getTarget = function(semantic) {\n  return this._getEnd(semantic, 'target');\n};\n\n\nBpmnImporter.prototype._getElement = function(semantic) {\n  return this._elementRegistry.get(semantic.id);\n};\n\n},{\"../util/Di\":11,\"../util/Label\":12,\"./Util\":9}],7:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Refs = _dereq_('object-refs');\n\nvar elementToString = _dereq_('./Util').elementToString;\n\nvar diRefs = new Refs({ name: 'bpmnElement', enumerable: true }, { name: 'di' });\n\n\n/**\n * Find a suitable display candidate for definitions where the DI does not\n * correctly specify one.\n */\nfunction findDisplayCandidate(definitions) {\n  return _.find(definitions.rootElements, function(e) {\n    return e.$instanceOf('bpmn:Process') || e.$instanceOf('bpmn:Collaboration');\n  });\n}\n\n\nfunction BpmnTreeWalker(handler) {\n\n  // list of containers already walked\n  var handledProcesses = [];\n\n  // list of elements to handle deferred to ensure\n  // prerequisites are drawn\n  var deferred = [];\n\n  ///// Helpers /////////////////////////////////\n\n  function contextual(fn, ctx) {\n    return function(e) {\n      fn(e, ctx);\n    };\n  }\n\n  function is(element, type) {\n    return element.$instanceOf(type);\n  }\n\n  function visit(element, ctx) {\n\n    var gfx = element.gfx;\n\n    // avoid multiple rendering of elements\n    if (gfx) {\n      throw new Error('already rendered ' + elementToString(element));\n    }\n\n    // call handler\n    return handler.element(element, ctx);\n  }\n\n  function visitRoot(element, diagram) {\n    return handler.root(element, diagram);\n  }\n\n  function visitIfDi(element, ctx) {\n    try {\n      return element.di && visit(element, ctx);\n    } catch (e) {\n      logError(e.message, { element: element, error: e });\n\n      console.error('failed to import ' + elementToString(element));\n      console.error(e);\n    }\n  }\n\n  function logError(message, context) {\n    handler.error(message, context);\n  }\n\n  ////// DI handling ////////////////////////////\n\n  function registerDi(di) {\n    var bpmnElement = di.bpmnElement;\n\n    if (bpmnElement) {\n      if (bpmnElement.di) {\n        logError('multiple DI elements defined for ' + elementToString(bpmnElement), { element: bpmnElement });\n      } else {\n        diRefs.bind(bpmnElement, 'di');\n        bpmnElement.di = di;\n      }\n    } else {\n      logError('no bpmnElement referenced in ' + elementToString(di), { element: di });\n    }\n  }\n\n  function handleDiagram(diagram) {\n    handlePlane(diagram.plane);\n  }\n\n  function handlePlane(plane) {\n    registerDi(plane);\n\n    _.forEach(plane.planeElement, handlePlaneElement);\n  }\n\n  function handlePlaneElement(planeElement) {\n    registerDi(planeElement);\n  }\n\n\n  ////// Semantic handling //////////////////////\n\n  function handleDefinitions(definitions, diagram) {\n    // make sure we walk the correct bpmnElement\n\n    var diagrams = definitions.diagrams;\n\n    if (diagram && diagrams.indexOf(diagram) === -1) {\n      throw new Error('diagram not part of bpmn:Definitions');\n    }\n\n    if (!diagram && diagrams && diagrams.length) {\n      diagram = diagrams[0];\n    }\n\n    // no diagram -> nothing to import\n    if (!diagram) {\n      return;\n    }\n\n    // load DI from selected diagram only\n    handleDiagram(diagram);\n\n\n    var plane = diagram.plane;\n\n    if (!plane) {\n      throw new Error('no plane for ' + elementToString(diagram));\n    }\n\n\n    var rootElement = plane.bpmnElement;\n\n    // ensure we default to a suitable display candidate (process or collaboration),\n    // even if non is specified in DI\n    if (!rootElement) {\n      rootElement = findDisplayCandidate(definitions);\n\n      if (!rootElement) {\n        throw new Error('do not know what to display');\n      } else {\n\n        logError('correcting missing bpmnElement on ' + elementToString(plane) + ' to ' + elementToString(rootElement));\n\n        // correct DI on the fly\n        plane.bpmnElement = rootElement;\n        registerDi(plane);\n      }\n    }\n\n\n    var ctx = visitRoot(rootElement, plane);\n\n    if (is(rootElement, 'bpmn:Process')) {\n      handleProcess(rootElement, ctx);\n    } else if (is(rootElement, 'bpmn:Collaboration')) {\n      handleCollaboration(rootElement, ctx);\n\n      // force drawing of everything not yet drawn that is part of the target DI\n      handleUnhandledProcesses(definitions.rootElements, ctx);\n    } else {\n      throw new Error('unsupported bpmnElement for ' + elementToString(plane) + ' : ' + elementToString(rootElement));\n    }\n\n    // handle all deferred elements\n    handleDeferred(deferred);\n  }\n\n  function handleDeferred(deferred) {\n    _.forEach(deferred, function(d) { d(); });\n  }\n\n  function handleProcess(process, context) {\n    handleFlowElementsContainer(process, context);\n    handleIoSpecification(process.ioSpecification, context);\n\n    handleArtifacts(process.artifacts, context);\n\n    // log process handled\n    handledProcesses.push(process);\n  }\n\n  function handleUnhandledProcesses(rootElements) {\n\n    // walk through all processes that have not yet been drawn and draw them\n    // if they contain lanes with DI information.\n    // we do this to pass the free-floating lane test cases in the MIWG test suite\n    var processes = _.filter(rootElements, function(e) {\n      return is(e, 'bpmn:Process') && e.laneSets && handledProcesses.indexOf(e) === -1;\n    });\n\n    processes.forEach(contextual(handleProcess));\n  }\n\n  function handleMessageFlow(messageFlow, context) {\n    visitIfDi(messageFlow, context);\n  }\n\n  function handleMessageFlows(messageFlows, context) {\n    _.forEach(messageFlows, contextual(handleMessageFlow, context));\n  }\n\n  function handleDataAssociation(association, context) {\n    visitIfDi(association, context);\n  }\n\n  function handleDataInput(dataInput, context) {\n    visitIfDi(dataInput, context);\n  }\n\n  function handleDataOutput(dataOutput, context) {\n    visitIfDi(dataOutput, context);\n  }\n\n  function handleArtifact(artifact, context) {\n\n    // bpmn:TextAnnotation\n    // bpmn:Group\n    // bpmn:Association\n\n    visitIfDi(artifact, context);\n  }\n\n  function handleArtifacts(artifacts, context) {\n\n    _.forEach(artifacts, function(e) {\n      if (is(e, 'bpmn:Association')) {\n        deferred.push(function() {\n          handleArtifact(e, context);\n        });\n      } else {\n        handleArtifact(e, context);\n      }\n    });\n  }\n\n  function handleIoSpecification(ioSpecification, context) {\n\n    if (!ioSpecification) {\n      return;\n    }\n\n    _.forEach(ioSpecification.dataInputs, contextual(handleDataInput, context));\n    _.forEach(ioSpecification.dataOutputs, contextual(handleDataOutput, context));\n  }\n\n  function handleSubProcess(subProcess, context) {\n    handleFlowElementsContainer(subProcess, context);\n    handleArtifacts(subProcess.artifacts, context);\n  }\n\n  function handleFlowNode(flowNode, context) {\n    var childCtx = visitIfDi(flowNode, context);\n\n    if (is(flowNode, 'bpmn:SubProcess')) {\n      handleSubProcess(flowNode, childCtx || context);\n    }\n  }\n\n  function handleSequenceFlow(sequenceFlow, context) {\n    visitIfDi(sequenceFlow, context);\n  }\n\n  function handleDataElement(dataObject, context) {\n    visitIfDi(dataObject, context);\n  }\n\n  function handleBoundaryEvent(dataObject, context) {\n    visitIfDi(dataObject, context);\n  }\n\n  function handleLane(lane, context) {\n    var newContext = visitIfDi(lane, context);\n\n    if (lane.childLaneSet) {\n      handleLaneSet(lane.childLaneSet, newContext || context);\n    } else {\n      var filterList = _.filter(lane.flowNodeRef, function(e) {\n        return e.$type !== 'bpmn:BoundaryEvent';\n      });\n      handleFlowElements(filterList, newContext || context);\n    }\n  }\n\n  function handleLaneSet(laneSet, context) {\n    _.forEach(laneSet.lanes, contextual(handleLane, context));\n  }\n\n  function handleLaneSets(laneSets, context) {\n    _.forEach(laneSets, contextual(handleLaneSet, context));\n  }\n\n  function handleFlowElementsContainer(container, context) {\n\n    if (container.laneSets) {\n      handleLaneSets(container.laneSets, context);\n      handleNonFlowNodes(container.flowElements);\n    } else {\n      handleFlowElements(container.flowElements, context);\n    }\n  }\n\n  function handleNonFlowNodes(flowElements, context) {\n    _.forEach(flowElements, function(e) {\n      if (is(e, 'bpmn:SequenceFlow')) {\n        deferred.push(function() {\n          handleSequenceFlow(e, context);\n        });\n      } else if (is(e, 'bpmn:BoundaryEvent')) {\n        deferred.unshift(function() {\n          handleBoundaryEvent(e, context);\n        });\n      } else if (is(e, 'bpmn:DataObject')) {\n        // SKIP (assume correct referencing via DataObjectReference)\n      } else if (is(e, 'bpmn:DataStoreReference')) {\n        handleDataElement(e, context);\n      } else if (is(e, 'bpmn:DataObjectReference')) {\n        handleDataElement(e, context);\n      }\n    });\n  }\n\n  function handleFlowElements(flowElements, context) {\n    _.forEach(flowElements, function(e) {\n      if (is(e, 'bpmn:SequenceFlow')) {\n        deferred.push(function() {\n          handleSequenceFlow(e, context);\n        });\n      } else if (is(e, 'bpmn:BoundaryEvent')) {\n        deferred.unshift(function() {\n          handleBoundaryEvent(e, context);\n        });\n      } else if (is(e, 'bpmn:FlowNode')) {\n        handleFlowNode(e, context);\n\n        if (is(e, 'bpmn:Activity')) {\n\n          handleIoSpecification(e.ioSpecification, context);\n\n          // defer handling of associations\n          deferred.push(function() {\n            _.forEach(e.dataInputAssociations, contextual(handleDataAssociation, context));\n            _.forEach(e.dataOutputAssociations, contextual(handleDataAssociation, context));\n          });\n        }\n      } else if (is(e, 'bpmn:DataObject')) {\n        // SKIP (assume correct referencing via DataObjectReference)\n      } else if (is(e, 'bpmn:DataStoreReference')) {\n        handleDataElement(e, context);\n      } else if (is(e, 'bpmn:DataObjectReference')) {\n        handleDataElement(e, context);\n      } else {\n        logError(\n          'unrecognized flowElement ' + elementToString(e) + ' in context ' +\n          (context ? elementToString(context.businessObject) : null),\n          { element: e, context: context });\n      }\n    });\n  }\n\n  function handleParticipant(participant, context) {\n    var newCtx = visitIfDi(participant, context);\n\n    var process = participant.processRef;\n    if (process) {\n      handleProcess(process, newCtx || context);\n    }\n  }\n\n  function handleCollaboration(collaboration) {\n\n    _.forEach(collaboration.participants, contextual(handleParticipant));\n\n    handleArtifacts(collaboration.artifacts);\n\n    handleMessageFlows(collaboration.messageFlows);\n  }\n\n\n  ///// API ////////////////////////////////\n\n  return {\n    handleDefinitions: handleDefinitions\n  };\n}\n\nmodule.exports = BpmnTreeWalker;\n},{\"./Util\":9,\"object-refs\":68}],8:[function(_dereq_,module,exports){\n'use strict';\n\nvar BpmnTreeWalker = _dereq_('./BpmnTreeWalker');\n\n\n/**\n * Import the definitions into a diagram.\n *\n * Errors and warnings are reported through the specified callback.\n *\n * @param  {Diagram} diagram\n * @param  {ModdleElement} definitions\n * @param  {Function} done the callback, invoked with (err, [ warning ]) once the import is done\n */\nfunction importBpmnDiagram(diagram, definitions, done) {\n\n  var importer = diagram.get('bpmnImporter'),\n      eventBus = diagram.get('eventBus');\n\n  var error,\n      warnings = [];\n\n  function parse(definitions) {\n\n    var visitor = {\n\n      root: function(element) {\n        return importer.add(element);\n      },\n\n      element: function(element, parentShape) {\n        return importer.add(element, parentShape);\n      },\n\n      error: function(message, context) {\n        warnings.push({ message: message, context: context });\n      }\n    };\n\n    var walker = new BpmnTreeWalker(visitor);\n\n    // import\n    walker.handleDefinitions(definitions);\n  }\n\n  eventBus.fire('import.start');\n\n  try {\n    parse(definitions);\n  } catch (e) {\n    error = e;\n  }\n\n  eventBus.fire(error ? 'import.error' : 'import.success', { error: error, warnings: warnings });\n  done(error, warnings);\n}\n\nmodule.exports.importBpmnDiagram = importBpmnDiagram;\n},{\"./BpmnTreeWalker\":7}],9:[function(_dereq_,module,exports){\nmodule.exports.elementToString = function(e) {\n  if (!e) {\n    return '<null>';\n  }\n\n  return '<' + e.$type + (e.id ? ' id=\"' + e.id : '') + '\" />';\n};\n},{}],10:[function(_dereq_,module,exports){\nmodule.exports = {\n  bpmnImporter: [ 'type', _dereq_('./BpmnImporter') ]\n};\n},{\"./BpmnImporter\":6}],11:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports.isExpandedPool = function(semantic) {\n  return !!semantic.processRef;\n};\n\nmodule.exports.isExpanded = function(semantic) {\n\n  // Is type expanded by default?\n  var isDefaultExpanded = !(semantic.$instanceOf('bpmn:SubProcess') || semantic.$instanceOf('bpmn:CallActivity'));\n\n  // For non default expanded types -> evaluate the expanded flag\n  var isExpanded = isDefaultExpanded || semantic.di.isExpanded;\n\n  return isExpanded;\n};\n\n},{}],12:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\nvar DEFAULT_LABEL_SIZE = module.exports.DEFAULT_LABEL_SIZE = {\n  width: 90,\n  height: 20\n};\n\n\n/**\n * Returns true if the given semantic has an external label\n *\n * @param {BpmnElement} semantic\n * @return {Boolean} true if has label\n */\nmodule.exports.hasExternalLabel = function(semantic) {\n\n  return semantic.$instanceOf('bpmn:Event') ||\n         semantic.$instanceOf('bpmn:Gateway') ||\n         semantic.$instanceOf('bpmn:DataStoreReference') ||\n         semantic.$instanceOf('bpmn:DataObjectReference') ||\n         semantic.$instanceOf('bpmn:SequenceFlow') ||\n         semantic.$instanceOf('bpmn:MessageFlow');\n};\n\n\n/**\n * Get the middle of a number of waypoints\n *\n * @param  {Array<Point>} waypoints\n * @return {Point} the mid point\n */\nvar getWaypointsMid = module.exports.getWaypointsMid = function(waypoints) {\n\n  var mid = waypoints.length / 2 - 1;\n\n  var first = waypoints[Math.floor(mid)];\n  var second = waypoints[Math.ceil(mid + 0.01)];\n\n  return {\n    x: first.x + (second.x - first.x) / 2,\n    y: first.y + (second.y - first.y) / 2\n  };\n};\n\n\nvar getExternalLabelMid = module.exports.getExternalLabelMid = function(element) {\n\n  if (element.waypoints) {\n    return getWaypointsMid(element.waypoints);\n  } else {\n    return {\n      x: element.x + element.width / 2,\n      y: element.y + element.height + DEFAULT_LABEL_SIZE.height / 2\n    };\n  }\n};\n\n/**\n * Returns the bounds of an elements label, parsed from the elements DI or\n * generated from its bounds.\n *\n * @param {BpmnElement} semantic\n * @param {djs.model.Base} element\n */\nmodule.exports.getExternalLabelBounds = function(semantic, element) {\n\n  var mid,\n      size,\n      bounds,\n      di = semantic.di,\n      label = di.label;\n\n  if (label && label.bounds) {\n    bounds = label.bounds;\n\n    size = {\n      width: Math.max(DEFAULT_LABEL_SIZE.width, bounds.width),\n      height: bounds.height\n    };\n\n    mid = {\n      x: bounds.x + bounds.width / 2,\n      y: bounds.y + bounds.height / 2\n    };\n  } else {\n\n    mid = getExternalLabelMid(element);\n\n    size = DEFAULT_LABEL_SIZE;\n  }\n\n  return _.extend({\n    x: mid.x - size.width / 2,\n    y: mid.y - size.height / 2\n  }, size);\n};\n},{}],13:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./lib/simple');\n},{\"./lib/simple\":15}],14:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Moddle = _dereq_('moddle'),\n    ModdleXml = _dereq_('moddle-xml');\n\n\nfunction createModel(packages) {\n  return new Moddle(packages);\n}\n\n/**\n * A sub class of {@link Moddle} with support for import and export of BPMN 2.0 xml files.\n *\n * @class BpmnModdle\n * @extends Moddle\n *\n * @param {Object|Array} packages to use for instantiating the model\n * @param {Object} [options] additional options to pass over\n */\nfunction BpmnModdle(packages, options) {\n  Moddle.call(this, packages, options);\n}\n\nBpmnModdle.prototype = Object.create(Moddle.prototype);\n\nmodule.exports = BpmnModdle;\n\n\n/**\n * Instantiates a BPMN model tree from a given xml string.\n *\n * @param {String}   xmlStr\n * @param {String}   [typeName]   name of the root element, defaults to 'bpmn:Definitions'\n * @param {Object}   [options]    options to pass to the underlying reader\n * @param {Function} done         callback that is invoked with (err, result, parseContext) once the import completes\n */\nBpmnModdle.prototype.fromXML = function(xmlStr, typeName, options, done) {\n\n  if (!_.isString(typeName)) {\n    done = options;\n    options = typeName;\n    typeName = 'bpmn:Definitions';\n  }\n\n  if (_.isFunction(options)) {\n    done = options;\n    options = {};\n  }\n\n  var reader = new ModdleXml.Reader(this, options);\n  var rootHandler = reader.handler(typeName);\n\n  reader.fromXML(xmlStr, rootHandler, done);\n};\n\n\n/**\n * Serializes a BPMN 2.0 object tree to XML.\n *\n * @param {String}   element    the root element, typically an instance of `bpmn:Definitions`\n * @param {Object}   [options]  to pass to the underlying writer\n * @param {Function} done       callback invoked with (err, xmlStr) once the import completes\n */\nBpmnModdle.prototype.toXML = function(element, options, done) {\n\n  if (_.isFunction(options)) {\n    done = options;\n    options = {};\n  }\n\n  var writer = new ModdleXml.Writer(options);\n  try {\n    var result = writer.toXML(element);\n    done(null, result);\n  } catch (e) {\n    done(e);\n  }\n};\n\n},{\"moddle\":21,\"moddle-xml\":16}],15:[function(_dereq_,module,exports){\nvar BpmnModdle = _dereq_('./bpmn-moddle');\n\nvar packages = {\n  bpmn: _dereq_('../resources/bpmn/json/bpmn.json'),\n  bpmndi: _dereq_('../resources/bpmn/json/bpmndi.json'),\n  dc: _dereq_('../resources/bpmn/json/dc.json'),\n  di: _dereq_('../resources/bpmn/json/di.json')\n};\n\nmodule.exports = function() {\n  return new BpmnModdle(packages);\n};\n},{\"../resources/bpmn/json/bpmn.json\":30,\"../resources/bpmn/json/bpmndi.json\":31,\"../resources/bpmn/json/dc.json\":32,\"../resources/bpmn/json/di.json\":33,\"./bpmn-moddle\":14}],16:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports.Reader = _dereq_('./lib/Reader');\nmodule.exports.Writer = _dereq_('./lib/Writer');\n},{\"./lib/Reader\":17,\"./lib/Writer\":18}],17:[function(_dereq_,module,exports){\n'use strict';\n\nvar sax = (window.sax),\n    _ = (window._);\n\nvar common = _dereq_('./common'),\n    Types = _dereq_('moddle').types,\n    Stack = _dereq_('tiny-stack'),\n    parseNameNs = _dereq_('moddle').ns.parseName,\n    aliasToName = common.aliasToName;\n\n\nfunction parseNodeAttributes(node) {\n  var nodeAttrs = node.attributes;\n\n  return _.reduce(nodeAttrs, function(result, v, k) {\n    var name, ns;\n\n    if (!v.local) {\n      name = v.prefix;\n    } else {\n      ns = parseNameNs(v.name, v.prefix);\n      name = ns.name;\n    }\n\n    result[name] = v.value;\n    return result;\n  }, {});\n}\n\n/**\n * Normalizes namespaces for a node given an optional default namespace and a\n * number of mappings from uris to default prefixes.\n *\n * @param  {XmlNode} node\n * @param  {Model} model the model containing all registered namespaces\n * @param  {Uri} defaultNsUri\n */\nfunction normalizeNamespaces(node, model, defaultNsUri) {\n  var uri, childUri, prefix;\n\n  uri = node.uri || defaultNsUri;\n\n  if (uri) {\n    var pkg = model.getPackage(uri);\n\n    if (pkg) {\n      prefix = pkg.prefix;\n    } else {\n      prefix = node.prefix;\n    }\n\n    node.prefix = prefix;\n    node.uri = uri;\n  }\n\n  _.forEach(node.attributes, function(attr) {\n    normalizeNamespaces(attr, model, null);\n  });\n}\n\n/**\n * A parse context.\n *\n * @class\n *\n * @param {ElementHandler} parseRoot the root handler for parsing a document\n */\nfunction Context(parseRoot) {\n\n  var elementsById = {};\n  var references = [];\n\n  var warnings = [];\n\n  this.addReference = function(reference) {\n    references.push(reference);\n  };\n\n  this.addElement = function(id, element) {\n\n    if (!id || !element) {\n      throw new Error('[xml-reader] id or ctx must not be null');\n    }\n\n    elementsById[id] = element;\n  };\n\n  this.addWarning = function (w) {\n    warnings.push(w);\n  };\n\n  this.warnings = warnings;\n  this.references = references;\n\n  this.elementsById = elementsById;\n\n  this.parseRoot = parseRoot;\n}\n\n\nfunction BaseHandler() {}\n\nBaseHandler.prototype.handleEnd = function() {};\nBaseHandler.prototype.handleText = function() {};\nBaseHandler.prototype.handleNode = function() {};\n\nfunction BodyHandler() {}\n\nBodyHandler.prototype = new BaseHandler();\n\nBodyHandler.prototype.handleText = function(text) {\n  this.body = (this.body || '') + text;\n};\n\nfunction ReferenceHandler(property, context) {\n  this.property = property;\n  this.context = context;\n}\n\nReferenceHandler.prototype = new BodyHandler();\n\nReferenceHandler.prototype.handleNode = function(node) {\n\n  if (this.element) {\n    throw new Error('expected no sub nodes');\n  } else {\n    this.element = this.createReference(node);\n  }\n\n  return this;\n};\n\nReferenceHandler.prototype.handleEnd = function() {\n  this.element.id = this.body;\n};\n\nReferenceHandler.prototype.createReference = function() {\n  return {\n    property: this.property.ns.name,\n    id: ''\n  };\n};\n\nfunction ValueHandler(propertyDesc, element) {\n  this.element = element;\n  this.propertyDesc = propertyDesc;\n}\n\nValueHandler.prototype = new BodyHandler();\n\nValueHandler.prototype.handleEnd = function() {\n\n  var value = this.body,\n      element = this.element,\n      propertyDesc = this.propertyDesc;\n\n  value = Types.coerceType(propertyDesc.type, value);\n\n  if (propertyDesc.isMany) {\n    element.get(propertyDesc.name).push(value);\n  } else {\n    element.set(propertyDesc.name, value);\n  }\n};\n\n\nfunction BaseElementHandler() {}\n\nBaseElementHandler.prototype = Object.create(BodyHandler.prototype);\n\nBaseElementHandler.prototype.handleNode = function(node) {\n  var parser = this;\n\n  if (!this.element) {\n    this.element = this.createElement(node);\n    var id = this.element.id;\n\n    if (id) {\n      this.context.addElement(id, this.element);\n    }\n  } else {\n    parser = this.handleChild(node);\n  }\n\n  return parser;\n};\n\n/**\n * @class XMLReader.ElementHandler\n *\n */\nfunction ElementHandler(model, type, context) {\n  this.model = model;\n  this.type = model.getType(type);\n  this.context = context;\n}\n\nElementHandler.prototype = new BaseElementHandler();\n\nElementHandler.prototype.addReference = function(reference) {\n  this.context.addReference(reference);\n};\n\nElementHandler.prototype.handleEnd = function() {\n\n  var value = this.body,\n      element = this.element,\n      descriptor = element.$descriptor,\n      bodyProperty = descriptor.bodyProperty;\n\n  if (bodyProperty && value !== undefined) {\n    value = Types.coerceType(bodyProperty.type, value);\n    element.set(bodyProperty.name, value);\n  }\n};\n\n/**\n * Create an instance of the model from the given node.\n *\n * @param  {Element} node the xml node\n */\nElementHandler.prototype.createElement = function(node) {\n  var attributes = parseNodeAttributes(node),\n      Type = this.type,\n      descriptor = Type.$descriptor,\n      context = this.context,\n      instance = new Type({});\n\n  _.forEach(attributes, function(value, name) {\n\n    var prop = descriptor.propertiesByName[name];\n\n    if (prop && prop.isReference) {\n      context.addReference({\n        element: instance,\n        property: prop.ns.name,\n        id: value\n      });\n    } else {\n      if (prop) {\n        value = Types.coerceType(prop.type, value);\n      }\n\n      instance.set(name, value);\n    }\n  });\n\n  return instance;\n};\n\nElementHandler.prototype.getPropertyForElement = function(nameNs) {\n  if (_.isString(nameNs)) {\n    nameNs = parseNameNs(nameNs);\n  }\n\n  var type = this.type,\n      model = this.model,\n      descriptor = type.$descriptor;\n\n  var propertyName = nameNs.name;\n\n  var property = descriptor.propertiesByName[propertyName];\n\n  // search for properties by name first\n  if (property) {\n    return property;\n  }\n\n  var pkg = model.getPackage(nameNs.prefix);\n\n  if (pkg) {\n    var typeName = nameNs.prefix + ':' + aliasToName(nameNs.localName, descriptor.$pkg),\n        elementType = model.getType(typeName);\n\n    // search for collection members later\n    property = _.find(descriptor.properties, function(p) {\n      return !p.isVirtual && !p.isReference && !p.isAttribute && elementType.hasType(p.type);\n    });\n\n    if (property) {\n      return _.extend({}, property, { effectiveType: elementType.$descriptor.name });\n    }\n  } else {\n    // parse unknown element (maybe extension)\n    property = _.find(descriptor.properties, function(p) {\n      return !p.isReference && !p.isAttribute && p.type === 'Element';\n    });\n\n    if (property) {\n      return property;\n    }\n  }\n\n  throw new Error('unrecognized element <' + nameNs.name + '>');\n};\n\nElementHandler.prototype.toString = function() {\n  return 'ElementDescriptor[' + this.type.$descriptor.name + ']';\n};\n\nElementHandler.prototype.valueHandler = function(propertyDesc, element) {\n  return new ValueHandler(propertyDesc, element);\n};\n\nElementHandler.prototype.referenceHandler = function(propertyDesc) {\n  return new ReferenceHandler(propertyDesc, this.context);\n};\n\nElementHandler.prototype.handler = function(type) {\n  if (type === 'Element') {\n    return new GenericElementHandler(this.model, type, this.context);\n  } else {\n    return new ElementHandler(this.model, type, this.context);\n  }\n};\n\n/**\n * Handle the child element parsing\n *\n * @param  {Element} node the xml node\n */\nElementHandler.prototype.handleChild = function(node) {\n  var nameNs = parseNameNs(node.local, node.prefix);\n\n  var propertyDesc, type, element, childHandler;\n\n  propertyDesc = this.getPropertyForElement(nameNs);\n  element = this.element;\n\n  type = propertyDesc.effectiveType || propertyDesc.type;\n\n  if (Types.isSimple(propertyDesc.type)) {\n    return this.valueHandler(propertyDesc, element);\n  }\n\n  if (propertyDesc.isReference) {\n    childHandler = this.referenceHandler(propertyDesc).handleNode(node);\n  } else {\n    childHandler = this.handler(type).handleNode(node);\n  }\n\n  var newElement = childHandler.element;\n\n  // child handles may decide to skip elements\n  // by not returning anything\n  if (newElement !== undefined) {\n\n    if (propertyDesc.isMany) {\n      element.get(propertyDesc.name).push(newElement);\n    } else {\n      element.set(propertyDesc.name, newElement);\n    }\n\n    if (propertyDesc.isReference) {\n      _.extend(newElement, {\n        element: element\n      });\n\n      this.context.addReference(newElement);\n    } else {\n      // establish child -> parent relationship\n      newElement.$parent = element;\n    }\n  }\n\n  return childHandler;\n};\n\n\nfunction GenericElementHandler(model, type, context) {\n  this.model = model;\n  this.context = context;\n}\n\nGenericElementHandler.prototype = Object.create(BaseElementHandler.prototype);\n\nGenericElementHandler.prototype.createElement = function(node) {\n\n  var name = node.name,\n      prefix = node.prefix,\n      uri = node.ns[prefix],\n      attributes = node.attributes;\n\n  return this.model.createAny(name, uri, attributes);\n};\n\nGenericElementHandler.prototype.handleChild = function(node) {\n\n  var handler = new GenericElementHandler(this.model, 'Element', this.context).handleNode(node),\n      element = this.element;\n\n  var newElement = handler.element,\n      children;\n\n  if (newElement !== undefined) {\n    children = element.$children = element.$children || [];\n    children.push(newElement);\n\n    // establish child -> parent relationship\n    newElement.$parent = element;\n  }\n\n  return handler;\n};\n\nGenericElementHandler.prototype.handleText = function(text) {\n  this.body = this.body || '' + text;\n};\n\nGenericElementHandler.prototype.handleEnd = function() {\n  if (this.body) {\n    this.element.$body = this.body;\n  }\n};\n\n/**\n * A reader for a meta-model\n *\n * @class XMLReader\n *\n * @param {Model} model used to read xml files\n */\nfunction XMLReader(model) {\n  this.model = model;\n}\n\n\nXMLReader.prototype.fromXML = function(xml, rootHandler, done) {\n\n  var context = new Context(rootHandler);\n\n  var parser = sax.parser(true, { xmlns: true, trim: true }),\n      stack = new Stack();\n\n  var model = this.model,\n      self = this;\n\n  rootHandler.context = context;\n\n  // push root handler\n  stack.push(rootHandler);\n\n\n  function resolveReferences() {\n\n    var elementsById = context.elementsById;\n    var references = context.references;\n\n    var i, r;\n\n    for (i = 0; !!(r = references[i]); i++) {\n      var element = r.element;\n      var reference = elementsById[r.id];\n      var property = element.$descriptor.propertiesByName[r.property];\n\n      if (!reference) {\n        context.addWarning({\n          message: 'unresolved reference <' + r.id + '>',\n          element: r.element,\n          property: r.property,\n          value: r.id\n        });\n      }\n\n      if (property.isMany) {\n        var collection = element.get(property.name),\n            idx = collection.indexOf(r);\n\n        if (!reference) {\n          // remove unresolvable reference\n          collection.splice(idx, 1);\n        } else {\n          // update reference\n          collection[idx] = reference;\n        }\n      } else {\n        element.set(property.name, reference);\n      }\n    }\n  }\n\n  function handleClose(tagName) {\n    stack.pop().handleEnd();\n  }\n\n  function handleOpen(node) {\n    var handler = stack.peek();\n\n    normalizeNamespaces(node, model);\n\n    try {\n      stack.push(handler.handleNode(node));\n    } catch (e) {\n\n      var line = this.line,\n          column = this.column;\n\n      throw new Error(\n        'unparsable content <' + node.name + '> detected\\n\\t' +\n          'line: ' + line + '\\n\\t' +\n          'column: ' + column + '\\n\\t' +\n          'nested error: ' + e.message);\n    }\n  }\n\n  function handleText(text) {\n    stack.peek().handleText(text);\n  }\n\n  parser.onopentag = handleOpen;\n  parser.oncdata = parser.ontext = handleText;\n  parser.onclosetag = handleClose;\n  parser.onend = resolveReferences;\n\n  // deferred parse XML to make loading really ascnchronous\n  // this ensures the execution environment (node or browser)\n  // is kept responsive and that certain optimization strategies\n  // can kick in\n  _.defer(function() {\n    var error;\n\n    try {\n      parser.write(xml).close();\n    } catch (e) {\n      error = e;\n    }\n\n    done(error, error ? undefined : rootHandler.element, context);\n  });\n};\n\nXMLReader.prototype.handler = function(name) {\n  return new ElementHandler(this.model, name);\n};\n\nmodule.exports = XMLReader;\nmodule.exports.ElementHandler = ElementHandler;\n},{\"./common\":19,\"moddle\":21,\"tiny-stack\":20}],18:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Types = _dereq_('moddle').types,\n    common = _dereq_('./common'),\n    parseNameNs = _dereq_('moddle').ns.parseName,\n    nameToAlias = common.nameToAlias;\n\nvar XML_PREAMBLE = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n';\n\nvar CDATA_ESCAPE = /[<>\"&]+/;\n\nvar DEFAULT_NS_MAP = common.DEFAULT_NS_MAP;\n\n\nfunction nsName(ns) {\n  if (_.isString(ns)) {\n    return ns;\n  } else {\n    return (ns.prefix ? ns.prefix + ':' : '') + ns.localName;\n  }\n}\n\nfunction getElementNs(ns, descriptor) {\n  if (descriptor.isGeneric) {\n    return descriptor.name;\n  } else {\n    return _.extend({ localName: nameToAlias(descriptor.ns.localName, descriptor.$pkg) }, ns);\n  }\n}\n\nfunction getPropertyNs(ns, descriptor) {\n  return _.extend({ localName: descriptor.ns.localName }, ns);\n}\n\nfunction getSerializableProperties(element) {\n  var descriptor = element.$descriptor;\n\n  return _.filter(descriptor.properties, function(p) {\n    var name = p.name;\n\n    // do not serialize defaults\n    if (!element.hasOwnProperty(name)) {\n      return false;\n    }\n\n    var value = element[name];\n\n    // do not serialize default equals\n    if (value === p.default) {\n      return false;\n    }\n\n    return p.isMany ? value.length : true;\n  });\n}\n\n/**\n * Escape a string attribute to not contain any bad values (line breaks, '\"', ...)\n *\n * @param {String} str the string to escape\n * @return {String} the escaped string\n */\nfunction escapeAttr(str) {\n  var escapeMap = {\n    '\\n': '&#10;',\n    '\\n\\r': '&#10;',\n    '\"': '&quot;'\n  };\n\n  // ensure we are handling strings here\n  str = _.isString(str) ? str : '' + str;\n\n  return str.replace(/(\\n|\\n\\r|\")/g, function(str) {\n    return escapeMap[str];\n  });\n}\n\nfunction filterAttributes(props) {\n  return _.filter(props, function(p) { return p.isAttr; });\n}\n\nfunction filterContained(props) {\n  return _.filter(props, function(p) { return !p.isAttr; });\n}\n\n\nfunction ReferenceSerializer(parent, ns) {\n  this.ns = ns;\n}\n\nReferenceSerializer.prototype.build = function(element) {\n  this.element = element;\n  return this;\n};\n\nReferenceSerializer.prototype.serializeTo = function(writer) {\n  writer\n    .appendIndent()\n    .append('<' + nsName(this.ns) + '>' + this.element.id + '</' + nsName(this.ns) + '>')\n    .appendNewLine();\n};\n\nfunction BodySerializer() {}\n\nBodySerializer.prototype.serializeValue = BodySerializer.prototype.serializeTo = function(writer) {\n  var value = this.value,\n      escape = this.escape;\n\n  if (escape) {\n    writer.append('<![CDATA[');\n  }\n\n  writer.append(this.value);\n\n  if (escape) {\n    writer.append(']]>');\n  }\n};\n\nBodySerializer.prototype.build = function(prop, value) {\n  this.value = value;\n\n  if (prop.type === 'String' && CDATA_ESCAPE.test(value)) {\n    this.escape = true;\n  }\n\n  return this;\n};\n\nfunction ValueSerializer(ns) {\n  this.ns = ns;\n}\n\nValueSerializer.prototype = new BodySerializer();\n\nValueSerializer.prototype.serializeTo = function(writer) {\n\n  writer\n    .appendIndent()\n    .append('<' + nsName(this.ns) + '>');\n\n  this.serializeValue(writer);\n\n  writer\n    .append( '</' + nsName(this.ns) + '>')\n    .appendNewLine();\n};\n\nfunction ElementSerializer(parent, ns) {\n  this.body = [];\n  this.attrs = [];\n\n  this.parent = parent;\n  this.ns = ns;\n}\n\nElementSerializer.prototype.build = function(element) {\n  this.element = element;\n\n  var otherAttrs = this.parseNsAttributes(element);\n\n  if (!this.ns) {\n    this.ns = this.nsTagName(element.$descriptor);\n  }\n\n  if (element.$descriptor.isGeneric) {\n    this.parseGeneric(element);\n  } else {\n    var properties = getSerializableProperties(element);\n\n    this.parseAttributes(filterAttributes(properties));\n    this.parseContainments(filterContained(properties));\n\n    this.parseGenericAttributes(element, otherAttrs);\n  }\n\n  return this;\n};\n\nElementSerializer.prototype.nsTagName = function(descriptor) {\n  var effectiveNs = this.logNamespaceUsed(descriptor.ns);\n  return getElementNs(effectiveNs, descriptor);\n};\n\nElementSerializer.prototype.nsPropertyTagName = function(descriptor) {\n  var effectiveNs = this.logNamespaceUsed(descriptor.ns);\n  return getPropertyNs(effectiveNs, descriptor);\n};\n\nElementSerializer.prototype.isLocalNs = function(ns) {\n  return ns.uri === this.ns.uri;\n};\n\nElementSerializer.prototype.nsAttributeName = function(element) {\n\n  var ns;\n\n  if (_.isString(element)) {\n    ns = parseNameNs(element);\n  } else\n  if (element.ns) {\n    ns = element.ns;\n  }\n\n  var effectiveNs = this.logNamespaceUsed(ns);\n\n  // strip prefix if same namespace like parent\n  if (this.isLocalNs(effectiveNs)) {\n    return { localName: ns.localName };\n  } else {\n    return _.extend({ localName: ns.localName }, effectiveNs);\n  }\n};\n\nElementSerializer.prototype.parseGeneric = function(element) {\n\n  var self = this,\n      body = this.body,\n      attrs = this.attrs;\n\n  _.forEach(element, function(val, key) {\n\n    if (key === '$body') {\n      body.push(new BodySerializer().build({ type: 'String' }, val));\n    } else\n    if (key === '$children') {\n      _.forEach(val, function(child) {\n        body.push(new ElementSerializer(self).build(child));\n      });\n    } else\n    if (key.indexOf('$') !== 0) {\n      attrs.push({ name: key, value: escapeAttr(val) });\n    }\n  });\n};\n\n/**\n * Parse namespaces and return a list of left over generic attributes\n *\n * @param  {Object} element\n * @return {Array<Object>}\n */\nElementSerializer.prototype.parseNsAttributes = function(element) {\n  var self = this;\n\n  var genericAttrs = element.$attrs;\n\n  var attributes = [];\n\n  // parse namespace attributes first\n  // and log them. push non namespace attributes to a list\n  // and process them later\n  _.forEach(genericAttrs, function(value, name) {\n    var nameNs = parseNameNs(name);\n\n    if (nameNs.prefix === 'xmlns') {\n      self.logNamespace({ prefix: nameNs.localName, uri: value });\n    } else\n    if (!nameNs.prefix && nameNs.localName === 'xmlns') {\n      self.logNamespace({ uri: value });\n    } else {\n      attributes.push({ name: name, value: value });\n    }\n  });\n\n  return attributes;\n};\n\nElementSerializer.prototype.parseGenericAttributes = function(element, attributes) {\n\n  var self = this;\n\n  _.forEach(attributes, function(attr) {\n    try {\n      self.addAttribute(self.nsAttributeName(attr.name), attr.value);\n    } catch (e) {\n      console.warn('[writer] missing namespace information for ', attr.name, '=', attr.value, 'on', element, e);\n    }\n  });\n};\n\nElementSerializer.prototype.parseContainments = function(properties) {\n\n  var self = this,\n      body = this.body,\n      element = this.element,\n      typeDesc = element.$descriptor;\n\n  _.forEach(properties, function(p) {\n    var value = element.get(p.name),\n        isReference = p.isReference,\n        isMany = p.isMany;\n\n    var ns = self.nsPropertyTagName(p);\n\n    if (!isMany) {\n      value = [ value ];\n    }\n\n    if (p.isBody) {\n      body.push(new BodySerializer().build(p, value[0]));\n    } else\n    if (Types.isSimple(p.type)) {\n      _.forEach(value, function(v) {\n        body.push(new ValueSerializer(ns).build(p, v));\n      });\n    } else\n    if (isReference) {\n      _.forEach(value, function(v) {\n        body.push(new ReferenceSerializer(self, ns).build(v));\n      });\n    } else {\n      // allow serialization via type\n      // rather than element name\n      var asType = p.serialize === 'xsi:type';\n\n      _.forEach(value, function(v) {\n        var serializer;\n\n        if (asType) {\n          serializer = new TypeSerializer(self, ns);\n        } else {\n          serializer = new ElementSerializer(self);\n        }\n\n        body.push(serializer.build(v));\n      });\n    }\n  });\n};\n\nElementSerializer.prototype.getNamespaces = function() {\n  if (!this.parent) {\n    if (!this.namespaces) {\n      this.namespaces = {\n        prefixMap: {},\n        uriMap: {},\n        used: {}\n      };\n    }\n  } else {\n    this.namespaces = this.parent.getNamespaces();\n  }\n\n  return this.namespaces;\n};\n\nElementSerializer.prototype.logNamespace = function(ns) {\n  var namespaces = this.getNamespaces();\n\n  var existing = namespaces.uriMap[ns.uri];\n\n  if (!existing) {\n    namespaces.uriMap[ns.uri] = ns;\n  }\n\n  namespaces.prefixMap[ns.prefix] = ns.uri;\n\n  return ns;\n};\n\nElementSerializer.prototype.logNamespaceUsed = function(ns) {\n  var element = this.element,\n      model = element.$model,\n      namespaces = this.getNamespaces();\n\n  // ns may be\n  //\n  //   * prefix only\n  //   * prefix:uri\n\n  var prefix = ns.prefix;\n  var uri = ns.uri || DEFAULT_NS_MAP[prefix] ||\n            namespaces.prefixMap[prefix] || (model ? (model.getPackage(prefix) || {}).uri : null);\n\n  if (!uri) {\n    throw new Error('no namespace uri given for prefix <' + ns.prefix + '>');\n  }\n\n  ns = namespaces.uriMap[uri];\n\n  if (!ns) {\n    ns = this.logNamespace({ prefix: prefix, uri: uri });\n  }\n\n  if (!namespaces.used[ns.uri]) {\n    namespaces.used[ns.uri] = ns;\n  }\n\n  return ns;\n};\n\nElementSerializer.prototype.parseAttributes = function(properties) {\n  var self = this,\n      element = this.element;\n\n  _.forEach(properties, function(p) {\n    self.logNamespaceUsed(p.ns);\n\n    var value = element.get(p.name);\n\n    if (p.isReference) {\n      value = value.id;\n    }\n\n    self.addAttribute(self.nsAttributeName(p), value);\n  });\n};\n\nElementSerializer.prototype.addAttribute = function(name, value) {\n  var attrs = this.attrs;\n\n  if (_.isString(value)) {\n    value = escapeAttr(value);\n  }\n\n  attrs.push({ name: name, value: value });\n};\n\nElementSerializer.prototype.serializeAttributes = function(writer) {\n  var element = this.element,\n      attrs = this.attrs,\n      root = !this.parent,\n      namespaces = this.namespaces;\n\n  function collectNsAttrs() {\n    return _.collect(namespaces.used, function(ns) {\n      var name = 'xmlns' + (ns.prefix ? ':' + ns.prefix : '');\n      return { name: name, value: ns.uri };\n    });\n  }\n\n  if (root) {\n    attrs = collectNsAttrs().concat(attrs);\n  }\n\n  _.forEach(attrs, function(a) {\n    writer\n      .append(' ')\n      .append(nsName(a.name)).append('=\"').append(a.value).append('\"');\n  });\n};\n\nElementSerializer.prototype.serializeTo = function(writer) {\n  var hasBody = this.body.length;\n\n  writer\n    .appendIndent()\n    .append('<' + nsName(this.ns));\n\n  this.serializeAttributes(writer);\n\n  writer\n    .append(hasBody ? '>' : ' />')\n    .appendNewLine();\n\n  writer.indent();\n\n  _.forEach(this.body, function(b) {\n    b.serializeTo(writer);\n  });\n\n  writer.unindent();\n\n  if (hasBody) {\n    writer\n      .appendIndent()\n      .append('</' + nsName(this.ns) + '>')\n      .appendNewLine();\n  }\n};\n\n/**\n * A serializer for types that handles serialization of data types\n */\nfunction TypeSerializer(parent, ns) {\n  ElementSerializer.call(this, parent, ns);\n}\n\nTypeSerializer.prototype = new ElementSerializer();\n\nTypeSerializer.prototype.build = function(element) {\n  this.element = element;\n  this.typeNs = this.nsTagName(element.$descriptor);\n\n  return ElementSerializer.prototype.build.call(this, element);\n};\n\nTypeSerializer.prototype.isLocalNs = function(ns) {\n  return ns.uri === this.typeNs.uri;\n};\n\nfunction SavingWriter() {\n  this.value = '';\n\n  this.write = function(str) {\n    this.value += str;\n  };\n}\n\nfunction FormatingWriter(out, format) {\n\n  var indent = [''];\n\n  this.append = function(str) {\n    out.write(str);\n\n    return this;\n  };\n\n  this.appendNewLine = function() {\n    if (format) {\n      out.write('\\n');\n    }\n\n    return this;\n  };\n\n  this.appendIndent = function() {\n    if (format) {\n      out.write(indent.join('  '));\n    }\n\n    return this;\n  };\n\n  this.indent = function() {\n    indent.push('');\n    return this;\n  };\n\n  this.unindent = function() {\n    indent.pop();\n    return this;\n  };\n}\n\n/**\n * A writer for meta-model backed document trees\n *\n * @class XMLWriter\n */\nfunction XMLWriter(options) {\n\n  options = _.extend({ format: false, preamble: true }, options || {});\n\n  function toXML(tree, writer) {\n    var internalWriter = writer || new SavingWriter();\n    var formatingWriter = new FormatingWriter(internalWriter, options.format);\n\n    if (options.preamble) {\n      formatingWriter.append(XML_PREAMBLE);\n    }\n\n    new ElementSerializer().build(tree).serializeTo(formatingWriter);\n\n    if (!writer) {\n      return internalWriter.value;\n    }\n  }\n\n  return {\n    toXML: toXML\n  };\n}\n\nmodule.exports = XMLWriter;\n},{\"./common\":19,\"moddle\":21}],19:[function(_dereq_,module,exports){\n'use strict';\n\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction lower(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1);\n}\n\nfunction hasLowerCaseAlias(pkg) {\n  return pkg.xml && pkg.xml.alias === 'lowerCase';\n}\n\n\nmodule.exports.aliasToName = function(alias, pkg) {\n  if (hasLowerCaseAlias(pkg)) {\n    return capitalize(alias);\n  } else {\n    return alias;\n  }\n};\n\nmodule.exports.nameToAlias = function(name, pkg) {\n  if (hasLowerCaseAlias(pkg)) {\n    return lower(name);\n  } else {\n    return name;\n  }\n};\n\nmodule.exports.DEFAULT_NS_MAP = {\n  'xsi': 'http://www.w3.org/2001/XMLSchema-instance'\n};\n},{}],20:[function(_dereq_,module,exports){\n/**\n * Tiny stack for browser or server\n *\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\n * @copyright 2014 Jason Mulligan\n * @license BSD-3 <https://raw.github.com/avoidwork/tiny-stack/master/LICENSE>\n * @link http://avoidwork.github.io/tiny-stack\n * @module tiny-stack\n * @version 0.1.0\n */\n\n( function ( global ) {\n\n\"use strict\";\n\n/**\n * TinyStack\n *\n * @constructor\n */\nfunction TinyStack () {\n\tthis.data = [null];\n\tthis.top  = 0;\n}\n\n/**\n * Clears the stack\n *\n * @method clear\n * @memberOf TinyStack\n * @return {Object} {@link TinyStack}\n */\nTinyStack.prototype.clear = function clear () {\n\tthis.data = [null];\n\tthis.top  = 0;\n\n\treturn this;\n};\n\n/**\n * Gets the size of the stack\n *\n * @method length\n * @memberOf TinyStack\n * @return {Number} Size of stack\n */\nTinyStack.prototype.length = function length () {\n\treturn this.top;\n};\n\n/**\n * Gets the item at the top of the stack\n *\n * @method peek\n * @memberOf TinyStack\n * @return {Mixed} Item at the top of the stack\n */\nTinyStack.prototype.peek = function peek () {\n\treturn this.data[this.top];\n};\n\n/**\n * Gets & removes the item at the top of the stack\n *\n * @method pop\n * @memberOf TinyStack\n * @return {Mixed} Item at the top of the stack\n */\nTinyStack.prototype.pop = function pop () {\n\tif ( this.top > 0 ) {\n\t\tthis.top--;\n\n\t\treturn this.data.pop();\n\t}\n\telse {\n\t\treturn undefined;\n\t}\n};\n\n/**\n * Pushes an item onto the stack\n *\n * @method push\n * @memberOf TinyStack\n * @return {Object} {@link TinyStack}\n */\nTinyStack.prototype.push = function push ( arg ) {\n\tthis.data[++this.top] = arg;\n\n\treturn this;\n};\n\n/**\n * TinyStack factory\n *\n * @method factory\n * @return {Object} {@link TinyStack}\n */\nfunction factory () {\n\treturn new TinyStack();\n}\n\n// Node, AMD & window supported\nif ( typeof exports != \"undefined\" ) {\n\tmodule.exports = factory;\n}\nelse if ( typeof define == \"function\" ) {\n\tdefine( function () {\n\t\treturn factory;\n\t} );\n}\nelse {\n\tglobal.stack = factory;\n}\n} )( this );\n\n},{}],21:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = _dereq_('./lib/moddle');\n\nmodule.exports.types = _dereq_('./lib/types');\n\nmodule.exports.ns = _dereq_('./lib/ns');\n},{\"./lib/moddle\":25,\"./lib/ns\":26,\"./lib/types\":29}],22:[function(_dereq_,module,exports){\n'use strict';\n\nfunction Base() { }\n\nBase.prototype.get = function(name) {\n  return this.$model.properties.get(this, name);\n};\n\nBase.prototype.set = function(name, value) {\n  this.$model.properties.set(this, name, value);\n};\n\n\nmodule.exports = Base;\n},{}],23:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar parseNameNs = _dereq_('./ns').parseName;\n\n\nfunction DescriptorBuilder(nameNs) {\n  this.ns = nameNs;\n  this.name = nameNs.name;\n  this.allTypes = [];\n  this.properties = [];\n  this.propertiesByName = {};\n}\n\nmodule.exports = DescriptorBuilder;\n\n\nDescriptorBuilder.prototype.build = function() {\n  return _.pick(this, [ 'ns', 'name', 'allTypes', 'properties', 'propertiesByName', 'bodyProperty' ]);\n};\n\nDescriptorBuilder.prototype.addProperty = function(p, idx) {\n  this.addNamedProperty(p, true);\n\n  var properties = this.properties;\n\n  if (idx !== undefined) {\n    properties.splice(idx, 0, p);\n  } else {\n    properties.push(p);\n  }\n};\n\n\nDescriptorBuilder.prototype.replaceProperty = function(oldProperty, newProperty) {\n  var oldNameNs = oldProperty.ns;\n\n  var props = this.properties,\n      propertiesByName = this.propertiesByName;\n\n  if (oldProperty.isBody) {\n\n    if (!newProperty.isBody) {\n      throw new Error(\n        'property <' + newProperty.ns.name + '> must be body property ' +\n        'to refine <' + oldProperty.ns.name + '>');\n    }\n\n    // TODO: Check compatibility\n    this.setBodyProperty(newProperty, false);\n  }\n\n  this.addNamedProperty(newProperty, true);\n\n  // replace old property at index with new one\n  var idx = props.indexOf(oldProperty);\n  if (idx === -1) {\n    throw new Error('property <' + oldNameNs.name + '> not found in property list');\n  }\n\n  props[idx] = newProperty;\n\n  // replace propertiesByName entry with new property\n  propertiesByName[oldNameNs.name] = propertiesByName[oldNameNs.localName] = newProperty;\n};\n\n\nDescriptorBuilder.prototype.redefineProperty = function(p) {\n\n  var nsPrefix = p.ns.prefix;\n  var parts = p.redefines.split('#');\n\n  var name = parseNameNs(parts[0], nsPrefix);\n  var attrName = parseNameNs(parts[1], name.prefix).name;\n\n  var redefinedProperty = this.propertiesByName[attrName];\n  if (!redefinedProperty) {\n    throw new Error('refined property <' + attrName + '> not found');\n  } else {\n    this.replaceProperty(redefinedProperty, p);\n  }\n\n  delete p.redefines;\n};\n\nDescriptorBuilder.prototype.addNamedProperty = function(p, validate) {\n  var ns = p.ns,\n      propsByName = this.propertiesByName;\n\n  if (validate) {\n    this.assertNotDefined(p, ns.name);\n    this.assertNotDefined(p, ns.localName);\n  }\n\n  propsByName[ns.name] = propsByName[ns.localName] = p;\n};\n\nDescriptorBuilder.prototype.removeNamedProperty = function(p) {\n  var ns = p.ns,\n      propsByName = this.propertiesByName;\n\n  delete propsByName[ns.name];\n  delete propsByName[ns.localName];\n};\n\nDescriptorBuilder.prototype.setBodyProperty = function(p, validate) {\n\n  if (validate && this.bodyProperty) {\n    throw new Error(\n      'body property defined multiple times ' +\n      '(<' + this.bodyProperty.ns.name + '>, <' + p.ns.name + '>)');\n  }\n\n  this.bodyProperty = p;\n};\n\nDescriptorBuilder.prototype.addIdProperty = function(name) {\n  var nameNs = parseNameNs(name, this.ns.prefix);\n\n  var p = {\n    name: nameNs.localName,\n    type: 'String',\n    isAttr: true,\n    ns: nameNs\n  };\n\n  // ensure that id is always the first attribute (if present)\n  this.addProperty(p, 0);\n};\n\nDescriptorBuilder.prototype.assertNotDefined = function(p, name) {\n  var propertyName = p.name,\n      definedProperty = this.propertiesByName[propertyName];\n\n  if (definedProperty) {\n    throw new Error(\n      'property <' + propertyName + '> already defined; ' +\n      'override of <' + definedProperty.definedBy.ns.name + '#' + definedProperty.ns.name + '> by ' +\n      '<' + p.definedBy.ns.name + '#' + p.ns.name + '> not allowed without redefines');\n  }\n};\n\nDescriptorBuilder.prototype.hasProperty = function(name) {\n  return this.propertiesByName[name];\n};\n\nDescriptorBuilder.prototype.addTrait = function(t) {\n\n  var allTypes = this.allTypes;\n\n  if (allTypes.indexOf(t) !== -1) {\n    return;\n  }\n\n  _.forEach(t.properties, function(p) {\n\n    // clone property to allow extensions\n    p = _.extend({}, p, {\n      name: p.ns.localName\n    });\n\n    Object.defineProperty(p, 'definedBy', {\n      value: t\n    });\n\n    // add redefine support\n    if (p.redefines) {\n      this.redefineProperty(p);\n    } else {\n      if (p.isBody) {\n        this.setBodyProperty(p);\n      }\n      this.addProperty(p);\n    }\n  }, this);\n\n  allTypes.push(t);\n};\n\n},{\"./ns\":26}],24:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Base = _dereq_('./base');\n\n\nfunction Factory(model, properties) {\n  this.model = model;\n  this.properties = properties;\n}\n\nmodule.exports = Factory;\n\n\nFactory.prototype.createType = function(descriptor) {\n\n  var model = this.model;\n\n  var props = this.properties,\n      prototype = Object.create(Base.prototype);\n\n  // initialize default values\n  _.forEach(descriptor.properties, function(p) {\n    if (!p.isMany && p.default !== undefined) {\n      prototype[p.name] = p.default;\n    }\n  });\n\n  props.defineModel(prototype, model);\n  props.defineDescriptor(prototype, descriptor);\n\n  var name = descriptor.ns.name;\n\n  /**\n   * The new type constructor\n   */\n  function ModdleElement(attrs) {\n    props.define(this, '$type', { value: name, enumerable: true });\n    props.define(this, '$attrs', { value: {} });\n    props.define(this, '$parent', { writable: true });\n\n    _.forEach(attrs, function(val, key) {\n      this.set(key, val);\n    }, this);\n  }\n\n  ModdleElement.prototype = prototype;\n\n  ModdleElement.hasType = prototype.$instanceOf = this.model.hasType;\n\n  // static links\n  props.defineModel(ModdleElement, model);\n  props.defineDescriptor(ModdleElement, descriptor);\n\n  return ModdleElement;\n};\n},{\"./base\":22}],25:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Types = _dereq_('./types'),\n    Factory = _dereq_('./factory'),\n    Registry = _dereq_('./registry'),\n    Properties = _dereq_('./properties');\n\nvar parseNameNs = _dereq_('./ns').parseName;\n\n\n//// Moddle implementation /////////////////////////////////////////////////\n\n/**\n * @class Moddle\n *\n * A model that can be used to create elements of a specific type.\n *\n * @example\n *\n * var Moddle = require('moddle');\n *\n * var pkg = {\n *   name: 'mypackage',\n *   prefix: 'my',\n *   types: [\n *     { name: 'Root' }\n *   ]\n * };\n *\n * var moddle = new Moddle([pkg]);\n *\n * @param {Array<Package>} packages  the packages to contain\n * @param {Object} options  additional options to pass to the model\n */\nfunction Moddle(packages, options) {\n\n  options = options || {};\n\n  this.properties = new Properties(this);\n\n  this.factory = new Factory(this, this.properties);\n  this.registry = new Registry(packages, this.properties, options);\n\n  this.typeCache = {};\n}\n\nmodule.exports = Moddle;\n\n\n/**\n * Create an instance of the specified type.\n *\n * @method Moddle#create\n *\n * @example\n *\n * var foo = moddle.create('my:Foo');\n * var bar = moddle.create('my:Bar', { id: 'BAR_1' });\n *\n * @param  {String|Object} descriptor the type descriptor or name know to the model\n * @param  {Object} attrs   a number of attributes to initialize the model instance with\n * @return {Object}         model instance\n */\nModdle.prototype.create = function(descriptor, attrs) {\n  var Type = this.getType(descriptor);\n\n  if (!Type) {\n    throw new Error('unknown type <' + descriptor + '>');\n  }\n\n  return new Type(attrs);\n};\n\n\n/**\n * Returns the type representing a given descriptor\n *\n * @method Moddle#getType\n *\n * @example\n *\n * var Foo = moddle.getType('my:Foo');\n * var foo = new Foo({ 'id' : 'FOO_1' });\n *\n * @param  {String|Object} descriptor the type descriptor or name know to the model\n * @return {Object}         the type representing the descriptor\n */\nModdle.prototype.getType = function(descriptor) {\n\n  var cache = this.typeCache;\n\n  var name = _.isString(descriptor) ? descriptor : descriptor.ns.name;\n\n  var type = cache[name];\n\n  if (!type) {\n    descriptor = this.registry.getEffectiveDescriptor(name);\n    type = cache[descriptor.name] = this.factory.createType(descriptor);\n  }\n\n  return type;\n};\n\n\n/**\n * Creates an any-element type to be used within model instances.\n *\n * This can be used to create custom elements that lie outside the meta-model.\n * The created element contains all the meta-data required to serialize it\n * as part of meta-model elements.\n *\n * @method Moddle#createAny\n *\n * @example\n *\n * var foo = moddle.createAny('vendor:Foo', 'http://vendor', {\n *   value: 'bar'\n * });\n *\n * var container = moddle.create('my:Container', 'http://my', {\n *   any: [ foo ]\n * });\n *\n * // go ahead and serialize the stuff\n *\n *\n * @param  {String} name  the name of the element\n * @param  {String} nsUri the namespace uri of the element\n * @param  {Object} [properties] a map of properties to initialize the instance with\n * @return {Object} the any type instance\n */\nModdle.prototype.createAny = function(name, nsUri, properties) {\n\n  var nameNs = parseNameNs(name);\n\n  var element = {\n    $type: name\n  };\n\n  var descriptor = {\n    name: name,\n    isGeneric: true,\n    ns: {\n      prefix: nameNs.prefix,\n      localName: nameNs.localName,\n      uri: nsUri\n    }\n  };\n\n  this.properties.defineDescriptor(element, descriptor);\n  this.properties.defineModel(element, this);\n  this.properties.define(element, '$parent', { enumerable: false, writable: true });\n\n  _.forEach(properties, function(a, key) {\n    if (_.isObject(a) && a.value !== undefined) {\n      element[a.name] = a.value;\n    } else {\n      element[key] = a;\n    }\n  });\n\n  return element;\n};\n\n/**\n * Returns a registered package by uri or prefix\n *\n * @return {Object} the package\n */\nModdle.prototype.getPackage = function(uriOrPrefix) {\n  return this.registry.getPackage(uriOrPrefix);\n};\n\n/**\n * Returns a snapshot of all known packages\n *\n * @return {Object} the package\n */\nModdle.prototype.getPackages = function() {\n  return this.registry.getPackages();\n};\n\n/**\n * Returns the descriptor for an element\n */\nModdle.prototype.getElementDescriptor = function(element) {\n  return element.$descriptor;\n};\n\n/**\n * Returns true if the given descriptor or instance\n * represents the given type.\n *\n * May be applied to this, if element is omitted.\n */\nModdle.prototype.hasType = function(element, type) {\n  if (type === undefined) {\n    type = element;\n    element = this;\n  }\n\n  var descriptor = element.$model.getElementDescriptor(element);\n\n  return !!_.find(descriptor.allTypes, function(t) {\n    return t.name === type;\n  });\n};\n\n\n/**\n * Returns the descriptor of an elements named property\n */\nModdle.prototype.getPropertyDescriptor = function(element, property) {\n  return this.getElementDescriptor(element).propertiesByName[property];\n};\n\n},{\"./factory\":24,\"./ns\":26,\"./properties\":27,\"./registry\":28,\"./types\":29}],26:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Parses a namespaced attribute name of the form (ns:)localName to an object,\n * given a default prefix to assume in case no explicit namespace is given.\n *\n * @param {String} name\n * @param {String} [defaultPrefix] the default prefix to take, if none is present.\n *\n * @return {Object} the parsed name\n */\nmodule.exports.parseName = function(name, defaultPrefix) {\n  var parts = name.split(/:/),\n      localName, prefix;\n\n  // no prefix (i.e. only local name)\n  if (parts.length === 1) {\n    localName = name;\n    prefix = defaultPrefix;\n  } else\n  // prefix + local name\n  if (parts.length === 2) {\n    localName = parts[1];\n    prefix = parts[0];\n  } else {\n    throw new Error('expected <prefix:localName> or <localName>, got ' + name);\n  }\n\n  name = (prefix ? prefix + ':' : '') + localName;\n\n  return {\n    name: name,\n    prefix: prefix,\n    localName: localName\n  };\n};\n},{}],27:[function(_dereq_,module,exports){\n'use strict';\n\n\n/**\n * A utility that gets and sets properties of model elements.\n *\n * @param {Model} model\n */\nfunction Properties(model) {\n  this.model = model;\n}\n\nmodule.exports = Properties;\n\n\n/**\n * Sets a named property on the target element\n *\n * @param {Object} target\n * @param {String} name\n * @param {Object} value\n */\nProperties.prototype.set = function(target, name, value) {\n\n  var property = this.model.getPropertyDescriptor(target, name);\n\n  if (!property) {\n    target.$attrs[name] = value;\n  } else {\n    Object.defineProperty(target, property.name, {\n      enumerable: !property.isReference,\n      writable: true,\n      value: value\n    });\n  }\n};\n\n/**\n * Returns the named property of the given element\n *\n * @param  {Object} target\n * @param  {String} name\n *\n * @return {Object}\n */\nProperties.prototype.get = function(target, name) {\n\n  var property = this.model.getPropertyDescriptor(target, name);\n\n  if (!property) {\n    return target.$attrs[name];\n  }\n\n  var propertyName = property.name;\n\n  // check if access to collection property and lazily initialize it\n  if (!target[propertyName] && property.isMany) {\n    Object.defineProperty(target, propertyName, {\n      enumerable: !property.isReference,\n      writable: true,\n      value: []\n    });\n  }\n\n  return target[propertyName];\n};\n\n\n/**\n * Define a property on the target element\n *\n * @param  {Object} target\n * @param  {String} name\n * @param  {Object} options\n */\nProperties.prototype.define = function(target, name, options) {\n  Object.defineProperty(target, name, options);\n};\n\n\n/**\n * Define the descriptor for an element\n */\nProperties.prototype.defineDescriptor = function(target, descriptor) {\n  this.define(target, '$descriptor', { value: descriptor });\n};\n\n/**\n * Define the model for an element\n */\nProperties.prototype.defineModel = function(target, model) {\n  this.define(target, '$model', { value: model });\n};\n},{}],28:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Types = _dereq_('./types'),\n    DescriptorBuilder = _dereq_('./descriptor-builder');\n\nvar parseNameNs = _dereq_('./ns').parseName;\n\n\nfunction Registry(packages, properties, options) {\n  this.options = _.extend({ generateId: 'id' }, options || {});\n\n  this.packageMap = {};\n  this.typeMap = {};\n\n  this.packages = [];\n\n  this.properties = properties;\n\n  _.forEach(packages, this.registerPackage, this);\n}\n\nmodule.exports = Registry;\n\n\nRegistry.prototype.getPackage = function(uriOrPrefix) {\n  return this.packageMap[uriOrPrefix];\n};\n\nRegistry.prototype.getPackages = function() {\n  return this.packages;\n};\n\n\nRegistry.prototype.registerPackage = function(pkg) {\n\n  // register types\n  _.forEach(pkg.types, function(descriptor) {\n    this.registerType(descriptor, pkg);\n  }, this);\n\n  this.packageMap[pkg.uri] = this.packageMap[pkg.prefix] = pkg;\n  this.packages.push(pkg);\n};\n\n\n/**\n * Register a type from a specific package with us\n */\nRegistry.prototype.registerType = function(type, pkg) {\n\n  var ns = parseNameNs(type.name, pkg.prefix),\n      name = ns.name,\n      propertiesByName = {};\n\n  // parse properties\n  _.forEach(type.properties, function(p) {\n\n    // namespace property names\n    var propertyNs = parseNameNs(p.name, ns.prefix),\n        propertyName = propertyNs.name;\n\n    // namespace property types\n    if (!Types.isBuiltIn(p.type)) {\n      p.type = parseNameNs(p.type, propertyNs.prefix).name;\n    }\n\n    _.extend(p, {\n      ns: propertyNs,\n      name: propertyName\n    });\n\n    propertiesByName[propertyName] = p;\n  });\n\n  // update ns + name\n  _.extend(type, {\n    ns: ns,\n    name: name,\n    propertiesByName: propertiesByName\n  });\n\n  // link to package\n  this.definePackage(type, pkg);\n\n  // register\n  this.typeMap[name] = type;\n};\n\n\n/**\n * Traverse the type hierarchy from bottom to top.\n */\nRegistry.prototype.mapTypes = function(nsName, iterator) {\n\n  var type = this.typeMap[nsName.name];\n\n  if (!type) {\n    throw new Error('unknown type <' + nsName.name + '>');\n  }\n\n  _.forEach(type.superClass, function(cls) {\n    var parentNs = parseNameNs(cls, nsName.prefix);\n    this.mapTypes(parentNs, iterator);\n  }, this);\n\n  iterator(type);\n};\n\n\n/**\n * Returns the effective descriptor for a type.\n *\n * @param  {String} type the namespaced name (ns:localName) of the type\n *\n * @return {Descriptor} the resulting effective descriptor\n */\nRegistry.prototype.getEffectiveDescriptor = function(name) {\n\n  var options = this.options,\n      nsName = parseNameNs(name);\n\n  var builder = new DescriptorBuilder(nsName);\n\n  this.mapTypes(nsName, function(type) {\n    builder.addTrait(type);\n  });\n\n  // check we have an id assigned\n  var id = this.options.generateId;\n  if (id && !builder.hasProperty(id)) {\n    builder.addIdProperty(id);\n  }\n\n  var descriptor = builder.build();\n\n  // define package link\n  this.definePackage(descriptor, descriptor.allTypes[descriptor.allTypes.length - 1].$pkg);\n\n  return descriptor;\n};\n\n\nRegistry.prototype.definePackage = function(target, pkg) {\n  this.properties.define(target, '$pkg', { value: pkg });\n};\n},{\"./descriptor-builder\":23,\"./ns\":26,\"./types\":29}],29:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Built-in moddle types\n */\nvar BUILTINS = {\n  String: true,\n  Boolean: true,\n  Integer: true,\n  Real: true,\n  Element: true,\n};\n\n/**\n * Converters for built in types from string representations\n */\nvar TYPE_CONVERTERS = {\n  String: function(s) { return s; },\n  Boolean: function(s) { return s === 'true'; },\n  Integer: function(s) { return parseInt(s, 10); },\n  Real: function(s) { return parseFloat(s, 10); }\n};\n\n/**\n * Convert a type to its real representation\n */\nmodule.exports.coerceType = function(type, value) {\n\n  var converter = TYPE_CONVERTERS[type];\n\n  if (converter) {\n    return converter(value);\n  } else {\n    return value;\n  }\n};\n\n/**\n * Return whether the given type is built-in\n */\nmodule.exports.isBuiltIn = function(type) {\n  return !!BUILTINS[type];\n};\n\n/**\n * Return whether the given type is simple\n */\nmodule.exports.isSimple = function(type) {\n  return !!TYPE_CONVERTERS[type];\n};\n},{}],30:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"BPMN20\",\n  \"uri\": \"http://www.omg.org/spec/BPMN/20100524/MODEL\",\n  \"associations\": [],\n  \"types\": [\n    {\n      \"name\": \"Interface\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"operations\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operations_interface\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"implementationRef\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Operation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"inMessageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_inMessageRef_operation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outMessageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_outMessageRef_operation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"errorRefs\",\n          \"type\": \"Error\",\n          \"association\": \"A_errorRefs_operation\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"implementationRef\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"EndPoint\",\n      \"superClass\": [\n        \"RootElement\"\n      ]\n    },\n    {\n      \"name\": \"Auditing\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"GlobalTask\",\n      \"superClass\": [\n        \"CallableElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"resources\",\n          \"type\": \"ResourceRole\",\n          \"association\": \"A_resources_globalTask\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Monitoring\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"Performer\",\n      \"superClass\": [\n        \"ResourceRole\"\n      ]\n    },\n    {\n      \"name\": \"Process\",\n      \"superClass\": [\n        \"FlowElementsContainer\",\n        \"CallableElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"processType\",\n          \"type\": \"ProcessType\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isClosed\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"auditing\",\n          \"type\": \"Auditing\",\n          \"association\": \"A_auditing_process\"\n        },\n        {\n          \"name\": \"monitoring\",\n          \"type\": \"Monitoring\",\n          \"association\": \"A_monitoring_process\"\n        },\n        {\n          \"name\": \"properties\",\n          \"type\": \"Property\",\n          \"association\": \"A_properties_process\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"supports\",\n          \"type\": \"Process\",\n          \"association\": \"A_supports_process\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"definitionalCollaborationRef\",\n          \"type\": \"Collaboration\",\n          \"association\": \"A_definitionalCollaborationRef_process\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"isExecutable\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"resources\",\n          \"type\": \"ResourceRole\",\n          \"association\": \"A_resources_process\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_process\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"correlationSubscriptions\",\n          \"type\": \"CorrelationSubscription\",\n          \"association\": \"A_correlationSubscriptions_process\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LaneSet\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"lanes\",\n          \"type\": \"Lane\",\n          \"association\": \"A_lanes_laneSet\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Lane\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"childLaneSet\",\n          \"type\": \"LaneSet\",\n          \"association\": \"A_childLaneSet_parentLane\"\n        },\n        {\n          \"name\": \"partitionElementRef\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_partitionElementRef_lane\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"flowNodeRef\",\n          \"type\": \"FlowNode\",\n          \"association\": \"A_flowNodeRefs_lanes\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"partitionElement\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_partitionElement_lane\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalManualTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ]\n    },\n    {\n      \"name\": \"ManualTask\",\n      \"superClass\": [\n        \"Task\"\n      ]\n    },\n    {\n      \"name\": \"UserTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"renderings\",\n          \"type\": \"Rendering\",\n          \"association\": \"A_renderings_usertask\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Rendering\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"HumanPerformer\",\n      \"superClass\": [\n        \"Performer\"\n      ]\n    },\n    {\n      \"name\": \"PotentialOwner\",\n      \"superClass\": [\n        \"HumanPerformer\"\n      ]\n    },\n    {\n      \"name\": \"GlobalUserTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"renderings\",\n          \"type\": \"Rendering\",\n          \"association\": \"A_renderings_globalUserTask\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Gateway\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"gatewayDirection\",\n          \"type\": \"GatewayDirection\",\n          \"default\": \"Unspecified\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"EventBasedGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"instantiate\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"eventGatewayType\",\n          \"type\": \"EventBasedGatewayType\",\n          \"isAttr\": true,\n          \"default\": \"Exclusive\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ComplexGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"activationCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_activationCondition_complexGateway\"\n        },\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_complexGateway\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ExclusiveGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_exclusiveGateway\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"InclusiveGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_inclusiveGateway\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ParallelGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ]\n    },\n    {\n      \"name\": \"RootElement\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"Relationship\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"type\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"direction\",\n          \"type\": \"RelationshipDirection\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"sources\",\n          \"association\": \"A_sources_relationship\",\n          \"isMany\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"targets\",\n          \"association\": \"A_targets_relationship\",\n          \"isMany\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        }\n      ]\n    },\n    {\n      \"name\": \"BaseElement\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"id\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"extensionDefinitions\",\n          \"type\": \"ExtensionDefinition\",\n          \"association\": \"A_extensionDefinitions_baseElement\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"extensionElements\",\n          \"type\": \"ExtensionElements\",\n          \"association\": \"A_extensionElements_baseElement\"\n        },\n        {\n          \"name\": \"documentation\",\n          \"type\": \"Documentation\",\n          \"association\": \"A_documentation_baseElement\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Extension\",\n      \"properties\": [\n        {\n          \"name\": \"mustUnderstand\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"definition\",\n          \"type\": \"ExtensionDefinition\",\n          \"association\": \"A_definition_extension\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ExtensionDefinition\",\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"extensionAttributeDefinitions\",\n          \"type\": \"ExtensionAttributeDefinition\",\n          \"association\": \"A_extensionAttributeDefinitions_extensionDefinition\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ExtensionAttributeDefinition\",\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"type\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isReference\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"extensionDefinition\",\n          \"type\": \"ExtensionDefinition\",\n          \"association\": \"A_extensionAttributeDefinitions_extensionDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ExtensionElements\",\n      \"properties\": [\n        {\n          \"name\": \"valueRef\",\n          \"association\": \"A_valueRef_extensionElements\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"values\",\n          \"association\": \"A_value_extensionElements\",\n          \"type\": \"Element\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"extensionAttributeDefinition\",\n          \"type\": \"ExtensionAttributeDefinition\",\n          \"association\": \"A_extensionAttributeDefinition_extensionElements\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Documentation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"text\",\n          \"type\": \"String\",\n          \"isBody\": true\n        },\n        {\n          \"name\": \"textFormat\",\n          \"default\": \"text/plain\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Event\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\",\n        \"InteractionNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"properties\",\n          \"type\": \"Property\",\n          \"association\": \"A_properties_event\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"IntermediateCatchEvent\",\n      \"superClass\": [\n        \"CatchEvent\"\n      ]\n    },\n    {\n      \"name\": \"IntermediateThrowEvent\",\n      \"superClass\": [\n        \"ThrowEvent\"\n      ]\n    },\n    {\n      \"name\": \"EndEvent\",\n      \"superClass\": [\n        \"ThrowEvent\"\n      ]\n    },\n    {\n      \"name\": \"StartEvent\",\n      \"superClass\": [\n        \"CatchEvent\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isInterrupting\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ThrowEvent\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Event\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"inputSet\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputSet_throwEvent\"\n        },\n        {\n          \"name\": \"eventDefinitionRefs\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitionRefs_throwEvent\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataInputAssociation\",\n          \"type\": \"DataInputAssociation\",\n          \"association\": \"A_dataInputAssociation_throwEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataInputs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_dataInputs_throwEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"eventDefinitions\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitions_throwEvent\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CatchEvent\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Event\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"parallelMultiple\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\",\n          \"default\": false\n        },\n        {\n          \"name\": \"outputSet\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSet_catchEvent\"\n        },\n        {\n          \"name\": \"eventDefinitionRefs\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitionRefs_catchEvent\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataOutputAssociation\",\n          \"type\": \"DataOutputAssociation\",\n          \"association\": \"A_dataOutputAssociation_catchEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataOutputs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_dataOutputs_catchEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"eventDefinitions\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitions_catchEvent\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"BoundaryEvent\",\n      \"superClass\": [\n        \"CatchEvent\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"cancelActivity\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"attachedToRef\",\n          \"type\": \"Activity\",\n          \"association\": \"A_boundaryEventRefs_attachedToRef\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"EventDefinition\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"RootElement\"\n      ]\n    },\n    {\n      \"name\": \"CancelEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ]\n    },\n    {\n      \"name\": \"ErrorEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"errorRef\",\n          \"type\": \"Error\",\n          \"association\": \"A_errorRef_errorEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"TerminateEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ]\n    },\n    {\n      \"name\": \"EscalationEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"escalationRef\",\n          \"type\": \"Escalation\",\n          \"association\": \"A_escalationRef_escalationEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Escalation\",\n      \"properties\": [\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_structureRef_escalation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"escalationCode\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ],\n      \"superClass\": [\n        \"RootElement\"\n      ]\n    },\n    {\n      \"name\": \"CompensateEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"waitForCompletion\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"activityRef\",\n          \"type\": \"Activity\",\n          \"association\": \"A_activityRef_compensateEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"TimerEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"timeDate\",\n          \"type\": \"Expression\",\n          \"association\": \"A_timeDate_timerEventDefinition\"\n        },\n        {\n          \"name\": \"timeCycle\",\n          \"type\": \"Expression\",\n          \"association\": \"A_timeCycle_timerEventDefinition\"\n        },\n        {\n          \"name\": \"timeDuration\",\n          \"type\": \"Expression\",\n          \"association\": \"A_timeDuration_timerEventDefinition\"\n        }\n      ]\n    },\n    {\n      \"name\": \"LinkEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"target\",\n          \"type\": \"LinkEventDefinition\",\n          \"association\": \"A_target_source\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"source\",\n          \"type\": \"LinkEventDefinition\",\n          \"association\": \"A_target_source\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_messageEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_messageEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ConditionalEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"condition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_condition_conditionalEventDefinition\",\n          \"serialize\": \"xsi:type\"\n        }\n      ]\n    },\n    {\n      \"name\": \"SignalEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"signalRef\",\n          \"type\": \"Signal\",\n          \"association\": \"A_signalRef_signalEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Signal\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_structureRef_signal\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ImplicitThrowEvent\",\n      \"superClass\": [\n        \"ThrowEvent\"\n      ]\n    },\n    {\n      \"name\": \"DataState\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ItemAwareElement\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"itemSubjectRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_itemSubjectRef_itemAwareElement\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataState\",\n          \"type\": \"DataState\",\n          \"association\": \"A_dataState_itemAwareElement\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"transformation\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_transformation_dataAssociation\"\n        },\n        {\n          \"name\": \"assignment\",\n          \"type\": \"Assignment\",\n          \"association\": \"A_assignment_dataAssociation\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_sourceRef_dataAssociation\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_targetRef_dataAssociation\",\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataInput\",\n      \"superClass\": [\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"inputSetRefs\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_dataInputRefs_inputSetRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"inputSetWithOptional\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_optionalInputRefs_inputSetWithOptional\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"inputSetWithWhileExecuting\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_whileExecutingInputRefs_inputSetWithWhileExecuting\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataOutput\",\n      \"superClass\": [\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"outputSetRefs\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_dataOutputRefs_outputSetRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputSetWithOptional\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSetWithOptional_optionalOutputRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputSetWithWhileExecuting\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSetWithWhileExecuting_whileExecutingOutputRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"InputSet\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"dataInputRefs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_dataInputRefs_inputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"optionalInputRefs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_optionalInputRefs_inputSetWithOptional\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"whileExecutingInputRefs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_whileExecutingInputRefs_inputSetWithWhileExecuting\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputSetRefs\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_inputSetRefs_outputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"OutputSet\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataOutputRefs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_dataOutputRefs_outputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"inputSetRefs\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputSetRefs_outputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"optionalOutputRefs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_outputSetWithOptional_optionalOutputRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"whileExecutingOutputRefs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_outputSetWithWhileExecuting_whileExecutingOutputRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Property\",\n      \"superClass\": [\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataInputAssociation\",\n      \"superClass\": [\n        \"DataAssociation\"\n      ]\n    },\n    {\n      \"name\": \"DataOutputAssociation\",\n      \"superClass\": [\n        \"DataAssociation\"\n      ]\n    },\n    {\n      \"name\": \"InputOutputSpecification\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"inputSets\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputSets_inputOutputSpecification\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"outputSets\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSets_inputOutputSpecification\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataInputs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_dataInputs_inputOutputSpecification\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataOutputs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_dataOutputs_inputOutputSpecification\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataObject\",\n      \"superClass\": [\n        \"FlowElement\",\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"InputOutputBinding\",\n      \"properties\": [\n        {\n          \"name\": \"inputDataRef\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputDataRef_inputOutputBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputDataRef\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputDataRef_inputOutputBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_ioBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Assignment\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"from\",\n          \"type\": \"Expression\",\n          \"association\": \"A_from_assignment\"\n        },\n        {\n          \"name\": \"to\",\n          \"type\": \"Expression\",\n          \"association\": \"A_to_assignment\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataStore\",\n      \"superClass\": [\n        \"RootElement\",\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"capacity\",\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        },\n        {\n          \"name\": \"isUnlimited\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataStoreReference\",\n      \"superClass\": [\n        \"ItemAwareElement\",\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataStoreRef\",\n          \"type\": \"DataStore\",\n          \"association\": \"A_dataStoreRef_dataStoreReference\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataObjectReference\",\n      \"superClass\": [\n        \"ItemAwareElement\",\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataObjectRef\",\n          \"type\": \"DataObject\",\n          \"association\": \"A_dataObjectRef_dataObject\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ConversationLink\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_sourceRef_outgoingConversationLinks\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_targetRef_incomingConversationLinks\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ConversationAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"innerConversationNodeRef\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_innerConversationNodeRef_conversationAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outerConversationNodeRef\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_outerConversationNodeRef_conversationAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CallConversation\",\n      \"superClass\": [\n        \"ConversationNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"calledCollaborationRef\",\n          \"type\": \"Collaboration\",\n          \"association\": \"A_calledCollaborationRef_callConversation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"participantAssociations\",\n          \"type\": \"ParticipantAssociation\",\n          \"association\": \"A_participantAssociations_callConversation\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Conversation\",\n      \"superClass\": [\n        \"ConversationNode\"\n      ]\n    },\n    {\n      \"name\": \"SubConversation\",\n      \"superClass\": [\n        \"ConversationNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"conversationNodes\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_conversationNodes_subConversation\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ConversationNode\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"InteractionNode\",\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"participantRefs\",\n          \"type\": \"Participant\",\n          \"association\": \"A_participantRefs_conversationNode\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageFlowRefs\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_messageFlowRefs_communication\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"correlationKeys\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeys_conversationNode\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalConversation\",\n      \"superClass\": [\n        \"Collaboration\"\n      ]\n    },\n    {\n      \"name\": \"PartnerEntity\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"participantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_partnerEntityRef_participantRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"PartnerRole\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"participantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_partnerRoleRef_participantRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationProperty\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"correlationPropertyRetrievalExpression\",\n          \"type\": \"CorrelationPropertyRetrievalExpression\",\n          \"association\": \"A_correlationPropertyRetrievalExpression_correlationproperty\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"type\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_type_correlationProperty\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Error\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_structureRef_error\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"errorCode\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationKey\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"correlationPropertyRef\",\n          \"type\": \"CorrelationProperty\",\n          \"association\": \"A_correlationPropertyRef_correlationKey\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Expression\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"FormalExpression\",\n      \"superClass\": [\n        \"Expression\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"language\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"body\",\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"evaluatesToTypeRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_evaluatesToTypeRef_formalExpression\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Message\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"itemRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_itemRef_message\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ItemDefinition\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"itemKind\",\n          \"type\": \"ItemKind\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"import\",\n          \"type\": \"Import\",\n          \"association\": \"A_import_itemDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"FlowElement\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"auditing\",\n          \"type\": \"Auditing\",\n          \"association\": \"A_auditing_flowElement\"\n        },\n        {\n          \"name\": \"monitoring\",\n          \"type\": \"Monitoring\",\n          \"association\": \"A_monitoring_flowElement\"\n        },\n        {\n          \"name\": \"categoryValueRef\",\n          \"type\": \"CategoryValue\",\n          \"association\": \"A_categorizedFlowElements_categoryValueRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"SequenceFlow\",\n      \"superClass\": [\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isImmediate\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"conditionExpression\",\n          \"type\": \"Expression\",\n          \"association\": \"A_conditionExpression_sequenceFlow\"\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"FlowNode\",\n          \"association\": \"A_sourceRef_outgoing_flow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"FlowNode\",\n          \"association\": \"A_targetRef_incoming_flow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"FlowElementsContainer\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"laneSets\",\n          \"type\": \"LaneSet\",\n          \"association\": \"A_laneSets_flowElementsContainer\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"flowElements\",\n          \"type\": \"FlowElement\",\n          \"association\": \"A_flowElements_container\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CallableElement\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"ioSpecification\",\n          \"type\": \"InputOutputSpecification\",\n          \"association\": \"A_ioSpecification_callableElement\"\n        },\n        {\n          \"name\": \"supportedInterfaceRefs\",\n          \"type\": \"Interface\",\n          \"association\": \"A_supportedInterfaceRefs_callableElements\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"ioBinding\",\n          \"type\": \"InputOutputBinding\",\n          \"association\": \"A_ioBinding_callableElement\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"FlowNode\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"incoming\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_targetRef_incoming_flow\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outgoing\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_sourceRef_outgoing_flow\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"lanes\",\n          \"type\": \"Lane\",\n          \"association\": \"A_flowNodeRefs_lanes\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationPropertyRetrievalExpression\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"messagePath\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_messagePath_correlationset\"\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_correlationPropertyRetrievalExpression\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationPropertyBinding\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataPath\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_dataPath_correlationPropertyBinding\"\n        },\n        {\n          \"name\": \"correlationPropertyRef\",\n          \"type\": \"CorrelationProperty\",\n          \"association\": \"A_correlationPropertyRef_correlationPropertyBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Resource\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"resourceParameters\",\n          \"type\": \"ResourceParameter\",\n          \"association\": \"A_resourceParameters_resource\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceParameter\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isRequired\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"type\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_type_resourceParameter\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationSubscription\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"correlationKeyRef\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeyRef_correlationSubscription\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"correlationPropertyBinding\",\n          \"type\": \"CorrelationPropertyBinding\",\n          \"association\": \"A_correlationPropertyBinding_correlationSubscription\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageFlow\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_sourceRef_messageFlow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_targetRef_messageFlow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_messageFlow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageFlowAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"innerMessageFlowRef\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_innerMessageFlowRef_messageFlowAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outerMessageFlowRef\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_outerMessageFlowRef_messageFlowAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"InteractionNode\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"incomingConversationLinks\",\n          \"type\": \"ConversationLink\",\n          \"association\": \"A_targetRef_incomingConversationLinks\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outgoingConversationLinks\",\n          \"type\": \"ConversationLink\",\n          \"association\": \"A_sourceRef_outgoingConversationLinks\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Participant\",\n      \"superClass\": [\n        \"InteractionNode\",\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"interfaceRefs\",\n          \"type\": \"Interface\",\n          \"association\": \"A_interfaceRefs_participant\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"participantMultiplicity\",\n          \"type\": \"ParticipantMultiplicity\",\n          \"association\": \"A_participantMultiplicity_participant\"\n        },\n        {\n          \"name\": \"endPointRefs\",\n          \"type\": \"EndPoint\",\n          \"association\": \"A_endPointRefs_participant\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"processRef\",\n          \"type\": \"Process\",\n          \"association\": \"A_processRef_participant\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ParticipantAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"innerParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_innerParticipantRef_participantAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outerParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_outerParticipantRef_participantAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ParticipantMultiplicity\",\n      \"properties\": [\n        {\n          \"name\": \"minimum\",\n          \"default\": 0,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        },\n        {\n          \"name\": \"maximum\",\n          \"default\": 1,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Collaboration\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isClosed\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"choreographyRef\",\n          \"type\": \"Choreography\",\n          \"association\": \"A_choreographyRef_collaboration\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"participantAssociations\",\n          \"type\": \"ParticipantAssociation\",\n          \"association\": \"A_participantAssociations_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"messageFlowAssociations\",\n          \"type\": \"MessageFlowAssociation\",\n          \"association\": \"A_messageFlowAssociations_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"conversationAssociations\",\n          \"type\": \"ConversationAssociation\",\n          \"association\": \"A_conversationAssociations_converstaionAssociations\"\n        },\n        {\n          \"name\": \"participants\",\n          \"type\": \"Participant\",\n          \"association\": \"A_participants_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"messageFlows\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_messageFlows_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"correlationKeys\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeys_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"conversations\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_conversations_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"conversationLinks\",\n          \"type\": \"ConversationLink\",\n          \"association\": \"A_conversationLinks_collaboration\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ChoreographyActivity\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"participantRefs\",\n          \"type\": \"Participant\",\n          \"association\": \"A_participantRefs_choreographyActivity\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"initiatingParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_initiatingParticipantRef_choreographyActivity\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"correlationKeys\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeys_choreographyActivity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"loopType\",\n          \"type\": \"ChoreographyLoopType\",\n          \"default\": \"None\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CallChoreography\",\n      \"superClass\": [\n        \"ChoreographyActivity\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"calledChoreographyRef\",\n          \"type\": \"Choreography\",\n          \"association\": \"A_calledChoreographyRef_callChoreographyActivity\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"participantAssociations\",\n          \"type\": \"ParticipantAssociation\",\n          \"association\": \"A_participantAssociations_callChoreographyActivity\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"SubChoreography\",\n      \"superClass\": [\n        \"ChoreographyActivity\",\n        \"FlowElementsContainer\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_subChoreography\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ChoreographyTask\",\n      \"superClass\": [\n        \"ChoreographyActivity\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"messageFlowRef\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_messageFlowRef_choreographyTask\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Choreography\",\n      \"superClass\": [\n        \"FlowElementsContainer\",\n        \"Collaboration\"\n      ]\n    },\n    {\n      \"name\": \"GlobalChoreographyTask\",\n      \"superClass\": [\n        \"Choreography\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"initiatingParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_initiatingParticipantRef_globalChoreographyTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"TextAnnotation\",\n      \"superClass\": [\n        \"Artifact\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"text\",\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"textFormat\",\n          \"default\": \"text/plain\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Group\",\n      \"superClass\": [\n        \"Artifact\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"categoryValueRef\",\n          \"type\": \"CategoryValue\",\n          \"association\": \"A_categoryValueRef_categoryValueRef\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Association\",\n      \"superClass\": [\n        \"Artifact\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"associationDirection\",\n          \"type\": \"AssociationDirection\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_sourceRef_outgoing_association\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_targetRef_incoming_association\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Category\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"categoryValue\",\n          \"type\": \"CategoryValue\",\n          \"association\": \"A_categoryValue_category\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Artifact\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"CategoryValue\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"categorizedFlowElements\",\n          \"type\": \"FlowElement\",\n          \"association\": \"A_categorizedFlowElements_categoryValueRef\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"value\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Activity\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isForCompensation\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"loopCharacteristics\",\n          \"type\": \"LoopCharacteristics\",\n          \"association\": \"A_loopCharacteristics_activity\"\n        },\n        {\n          \"name\": \"resources\",\n          \"type\": \"ResourceRole\",\n          \"association\": \"A_resources_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_activity\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"properties\",\n          \"type\": \"Property\",\n          \"association\": \"A_properties_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"ioSpecification\",\n          \"type\": \"InputOutputSpecification\",\n          \"association\": \"A_ioSpecification_activity\"\n        },\n        {\n          \"name\": \"boundaryEventRefs\",\n          \"type\": \"BoundaryEvent\",\n          \"association\": \"A_boundaryEventRefs_attachedToRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataInputAssociations\",\n          \"type\": \"DataInputAssociation\",\n          \"association\": \"A_dataInputAssociations_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataOutputAssociations\",\n          \"type\": \"DataOutputAssociation\",\n          \"association\": \"A_dataOutputAssociations_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"startQuantity\",\n          \"default\": 1,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        },\n        {\n          \"name\": \"completionQuantity\",\n          \"default\": 1,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ServiceTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_serviceTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"SubProcess\",\n      \"superClass\": [\n        \"Activity\",\n        \"FlowElementsContainer\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"triggeredByEvent\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_subProcess\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LoopCharacteristics\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"MultiInstanceLoopCharacteristics\",\n      \"superClass\": [\n        \"LoopCharacteristics\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isSequential\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"behavior\",\n          \"type\": \"MultiInstanceBehavior\",\n          \"default\": \"All\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"loopCardinality\",\n          \"type\": \"Expression\",\n          \"association\": \"A_loopCardinality_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"loopDataInputRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_loopDataInputRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"loopDataOutputRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_loopDataOutputRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"inputDataItem\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_inputDataItem_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"outputDataItem\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_outputDataItem_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"completionCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_completionCondition_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"complexBehaviorDefinition\",\n          \"type\": \"ComplexBehaviorDefinition\",\n          \"association\": \"A_complexBehaviorDefinition_multiInstanceLoopCharacteristics\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"oneBehaviorEventRef\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_oneBehaviorEventRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"noneBehaviorEventRef\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_noneBehaviorEventRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"StandardLoopCharacteristics\",\n      \"superClass\": [\n        \"LoopCharacteristics\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"testBefore\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"loopCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_loopCondition_standardLoopCharacteristics\"\n        },\n        {\n          \"name\": \"loopMaximum\",\n          \"type\": \"Expression\",\n          \"association\": \"A_loopMaximum_standardLoopCharacteristics\"\n        }\n      ]\n    },\n    {\n      \"name\": \"CallActivity\",\n      \"superClass\": [\n        \"Activity\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"calledElement\",\n          \"type\": \"String\",\n          \"association\": \"A_calledElementRef_callActivity\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Task\",\n      \"superClass\": [\n        \"Activity\",\n        \"InteractionNode\"\n      ]\n    },\n    {\n      \"name\": \"SendTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_sendTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_sendTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ReceiveTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"instantiate\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_receiveTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_receiveTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ScriptTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"scriptFormat\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"script\",\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"BusinessRuleTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"AdHocSubProcess\",\n      \"superClass\": [\n        \"SubProcess\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"completionCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_completionCondition_adHocSubProcess\"\n        },\n        {\n          \"name\": \"ordering\",\n          \"type\": \"AdHocOrdering\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"cancelRemainingInstances\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Transaction\",\n      \"superClass\": [\n        \"SubProcess\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"protocol\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"method\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalScriptTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"scriptLanguage\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"script\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalBusinessRuleTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ComplexBehaviorDefinition\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"condition\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_condition_complexBehaviorDefinition\"\n        },\n        {\n          \"name\": \"event\",\n          \"type\": \"ImplicitThrowEvent\",\n          \"association\": \"A_event_complexBehaviorDefinition\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceRole\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"resourceRef\",\n          \"type\": \"Resource\",\n          \"association\": \"A_resourceRef_activityResource\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"resourceParameterBindings\",\n          \"type\": \"ResourceParameterBinding\",\n          \"association\": \"A_resourceParameterBindings_activityResource\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"resourceAssignmentExpression\",\n          \"type\": \"ResourceAssignmentExpression\",\n          \"association\": \"A_resourceAssignmentExpression_activityResource\"\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceParameterBinding\",\n      \"properties\": [\n        {\n          \"name\": \"expression\",\n          \"type\": \"Expression\",\n          \"association\": \"A_expression_resourceParameterBinding\"\n        },\n        {\n          \"name\": \"parameterRef\",\n          \"type\": \"ResourceParameter\",\n          \"association\": \"A_parameterRef_resourceParameterBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceAssignmentExpression\",\n      \"properties\": [\n        {\n          \"name\": \"expression\",\n          \"type\": \"Expression\",\n          \"association\": \"A_expression_resourceAssignmentExpression\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Import\",\n      \"properties\": [\n        {\n          \"name\": \"importType\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"location\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"namespace\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Definitions\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"targetNamespace\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"expressionLanguage\",\n          \"default\": \"http://www.w3.org/1999/XPath\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"typeLanguage\",\n          \"default\": \"http://www.w3.org/2001/XMLSchema\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"imports\",\n          \"type\": \"Import\",\n          \"association\": \"A_imports_definition\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"extensions\",\n          \"type\": \"Extension\",\n          \"association\": \"A_extensions_definitions\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"relationships\",\n          \"type\": \"Relationship\",\n          \"association\": \"A_relationships_definition\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"rootElements\",\n          \"type\": \"RootElement\",\n          \"association\": \"A_rootElements_definition\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"diagrams\",\n          \"association\": \"A_diagrams_definitions\",\n          \"isMany\": true,\n          \"type\": \"bpmndi:BPMNDiagram\"\n        },\n        {\n          \"name\": \"exporter\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"exporterVersion\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    }\n  ],\n  \"emumerations\": [\n    {\n      \"name\": \"ProcessType\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"Public\"\n        },\n        {\n          \"name\": \"Private\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GatewayDirection\",\n      \"literalValues\": [\n        {\n          \"name\": \"Unspecified\"\n        },\n        {\n          \"name\": \"Converging\"\n        },\n        {\n          \"name\": \"Diverging\"\n        },\n        {\n          \"name\": \"Mixed\"\n        }\n      ]\n    },\n    {\n      \"name\": \"EventBasedGatewayType\",\n      \"literalValues\": [\n        {\n          \"name\": \"Parallel\"\n        },\n        {\n          \"name\": \"Exclusive\"\n        }\n      ]\n    },\n    {\n      \"name\": \"RelationshipDirection\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"Forward\"\n        },\n        {\n          \"name\": \"Backward\"\n        },\n        {\n          \"name\": \"Both\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ItemKind\",\n      \"literalValues\": [\n        {\n          \"name\": \"Physical\"\n        },\n        {\n          \"name\": \"Information\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ChoreographyLoopType\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"Standard\"\n        },\n        {\n          \"name\": \"MultiInstanceSequential\"\n        },\n        {\n          \"name\": \"MultiInstanceParallel\"\n        }\n      ]\n    },\n    {\n      \"name\": \"AssociationDirection\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"One\"\n        },\n        {\n          \"name\": \"Both\"\n        }\n      ]\n    },\n    {\n      \"name\": \"MultiInstanceBehavior\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"One\"\n        },\n        {\n          \"name\": \"All\"\n        },\n        {\n          \"name\": \"Complex\"\n        }\n      ]\n    },\n    {\n      \"name\": \"AdHocOrdering\",\n      \"literalValues\": [\n        {\n          \"name\": \"Parallel\"\n        },\n        {\n          \"name\": \"Sequential\"\n        }\n      ]\n    }\n  ],\n  \"prefix\": \"bpmn\",\n  \"xml\": {\n    \"alias\": \"lowerCase\"\n  }\n}\n},{}],31:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"BPMNDI\",\n  \"uri\": \"http://www.omg.org/spec/BPMN/20100524/DI\",\n  \"types\": [\n    {\n      \"name\": \"BPMNDiagram\",\n      \"properties\": [\n        {\n          \"name\": \"plane\",\n          \"type\": \"BPMNPlane\",\n          \"association\": \"A_plane_diagram\",\n          \"redefines\": \"di:Diagram#rootElement\"\n        },\n        {\n          \"name\": \"labelStyle\",\n          \"type\": \"BPMNLabelStyle\",\n          \"association\": \"A_labelStyle_diagram\",\n          \"isMany\": true\n        }\n      ],\n      \"superClass\": [\n        \"di:Diagram\"\n      ]\n    },\n    {\n      \"name\": \"BPMNPlane\",\n      \"properties\": [\n        {\n          \"name\": \"bpmnElement\",\n          \"association\": \"A_bpmnElement_plane\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"bpmn:BaseElement\",\n          \"redefines\": \"di:DiagramElement#modelElement\"\n        }\n      ],\n      \"superClass\": [\n        \"di:Plane\"\n      ]\n    },\n    {\n      \"name\": \"BPMNShape\",\n      \"properties\": [\n        {\n          \"name\": \"bpmnElement\",\n          \"association\": \"A_bpmnElement_shape\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"bpmn:BaseElement\",\n          \"redefines\": \"di:DiagramElement#modelElement\"\n        },\n        {\n          \"name\": \"isHorizontal\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"isExpanded\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"isMarkerVisible\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"label\",\n          \"type\": \"BPMNLabel\",\n          \"association\": \"A_label_shape\"\n        },\n        {\n          \"name\": \"isMessageVisible\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"participantBandKind\",\n          \"type\": \"ParticipantBandKind\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"choreographyActivityShape\",\n          \"type\": \"BPMNShape\",\n          \"association\": \"A_choreographyActivityShape_participantBandShape\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ],\n      \"superClass\": [\n        \"di:LabeledShape\"\n      ]\n    },\n    {\n      \"name\": \"BPMNEdge\",\n      \"properties\": [\n        {\n          \"name\": \"label\",\n          \"type\": \"BPMNLabel\",\n          \"association\": \"A_label_edge\"\n        },\n        {\n          \"name\": \"bpmnElement\",\n          \"association\": \"A_bpmnElement_edge\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"bpmn:BaseElement\",\n          \"redefines\": \"di:DiagramElement#modelElement\"\n        },\n        {\n          \"name\": \"sourceElement\",\n          \"association\": \"A_sourceElement_sourceEdge\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"di:DiagramElement\",\n          \"redefines\": \"di:Edge#source\"\n        },\n        {\n          \"name\": \"targetElement\",\n          \"association\": \"A_targetElement_targetEdge\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"di:DiagramElement\",\n          \"redefines\": \"di:Edge#target\"\n        },\n        {\n          \"name\": \"messageVisibleKind\",\n          \"type\": \"MessageVisibleKind\",\n          \"isAttr\": true,\n          \"default\": \"initiating\"\n        }\n      ],\n      \"superClass\": [\n        \"di:LabeledEdge\"\n      ]\n    },\n    {\n      \"name\": \"BPMNLabel\",\n      \"properties\": [\n        {\n          \"name\": \"labelStyle\",\n          \"type\": \"BPMNLabelStyle\",\n          \"association\": \"A_labelStyle_label\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"redefines\": \"di:DiagramElement#style\"\n        }\n      ],\n      \"superClass\": [\n        \"di:Label\"\n      ]\n    },\n    {\n      \"name\": \"BPMNLabelStyle\",\n      \"properties\": [\n        {\n          \"name\": \"font\",\n          \"type\": \"dc:Font\"\n        }\n      ],\n      \"superClass\": [\n        \"di:Style\"\n      ]\n    }\n  ],\n  \"emumerations\": [\n    {\n      \"name\": \"ParticipantBandKind\",\n      \"literalValues\": [\n        {\n          \"name\": \"top_initiating\"\n        },\n        {\n          \"name\": \"middle_initiating\"\n        },\n        {\n          \"name\": \"bottom_initiating\"\n        },\n        {\n          \"name\": \"top_non_initiating\"\n        },\n        {\n          \"name\": \"middle_non_initiating\"\n        },\n        {\n          \"name\": \"bottom_non_initiating\"\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageVisibleKind\",\n      \"literalValues\": [\n        {\n          \"name\": \"initiating\"\n        },\n        {\n          \"name\": \"non_initiating\"\n        }\n      ]\n    }\n  ],\n  \"associations\": [],\n  \"prefix\": \"bpmndi\"\n}\n},{}],32:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"DC\",\n  \"uri\": \"http://www.omg.org/spec/DD/20100524/DC\",\n  \"types\": [\n    {\n      \"name\": \"Boolean\"\n    },\n    {\n      \"name\": \"Integer\"\n    },\n    {\n      \"name\": \"Real\"\n    },\n    {\n      \"name\": \"String\"\n    },\n    {\n      \"name\": \"Font\",\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"size\",\n          \"type\": \"Real\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isBold\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isItalic\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isUnderline\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isStrikeThrough\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Point\",\n      \"properties\": [\n        {\n          \"name\": \"x\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"y\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Bounds\",\n      \"properties\": [\n        {\n          \"name\": \"x\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"y\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"width\",\n          \"type\": \"Real\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"height\",\n          \"type\": \"Real\",\n          \"isAttr\": true\n        }\n      ]\n    }\n  ],\n  \"prefix\": \"dc\",\n  \"associations\": []\n}\n},{}],33:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"DI\",\n  \"uri\": \"http://www.omg.org/spec/DD/20100524/DI\",\n  \"types\": [\n    {\n      \"name\": \"DiagramElement\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"owningDiagram\",\n          \"type\": \"Diagram\",\n          \"isReadOnly\": true,\n          \"association\": \"A_rootElement_owningDiagram\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"owningElement\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_ownedElement_owningElement\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"modelElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_modelElement_diagramElement\",\n          \"isVirtual\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"style\",\n          \"type\": \"Style\",\n          \"isReadOnly\": true,\n          \"association\": \"A_style_diagramElement\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"ownedElement\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_ownedElement_owningElement\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Node\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"DiagramElement\"\n      ]\n    },\n    {\n      \"name\": \"Edge\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"DiagramElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"source\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_source_sourceEdge\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"target\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_target_targetEdge\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"waypoint\",\n          \"isUnique\": false,\n          \"isMany\": true,\n          \"type\": \"dc:Point\",\n          \"serialize\": \"xsi:type\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Diagram\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"rootElement\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_rootElement_owningDiagram\",\n          \"isVirtual\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"documentation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"resolution\",\n          \"isAttr\": true,\n          \"type\": \"Real\"\n        },\n        {\n          \"name\": \"ownedStyle\",\n          \"type\": \"Style\",\n          \"isReadOnly\": true,\n          \"association\": \"A_ownedStyle_owningDiagram\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Shape\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Node\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"bounds\",\n          \"type\": \"dc:Bounds\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Plane\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Node\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"planeElement\",\n          \"type\": \"DiagramElement\",\n          \"subsettedProperty\": \"DiagramElement-ownedElement\",\n          \"association\": \"A_planeElement_plane\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LabeledEdge\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Edge\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"ownedLabel\",\n          \"type\": \"Label\",\n          \"isReadOnly\": true,\n          \"subsettedProperty\": \"DiagramElement-ownedElement\",\n          \"association\": \"A_ownedLabel_owningEdge\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LabeledShape\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Shape\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"ownedLabel\",\n          \"type\": \"Label\",\n          \"isReadOnly\": true,\n          \"subsettedProperty\": \"DiagramElement-ownedElement\",\n          \"association\": \"A_ownedLabel_owningShape\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Label\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Node\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"bounds\",\n          \"type\": \"dc:Bounds\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Style\",\n      \"isAbstract\": true\n    }\n  ],\n  \"associations\": [],\n  \"prefix\": \"di\"\n}\n},{}],34:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./lib/Diagram');\n},{\"./lib/Diagram\":35}],35:[function(_dereq_,module,exports){\n'use strict';\n\nvar di = _dereq_('didi');\n\n/**\n * @namespace djs\n */\n\n/**\n * Bootstrap an injector from a list of modules, instantiating a number of default components\n *\n * @ignore\n * @param {Array<didi.Module>} bootstrapModules\n *\n * @return {didi.Injector} a injector to use to access the components\n */\nfunction bootstrap(bootstrapModules) {\n\n  var modules = [],\n      components = [];\n\n  function hasModule(m) {\n    return modules.indexOf(m) >= 0;\n  }\n\n  function addModule(m) {\n    modules.push(m);\n  }\n\n  function visit(m) {\n    if (hasModule(m)) {\n      return;\n    }\n\n    (m.__depends__ || []).forEach(visit);\n\n    if (hasModule(m)) {\n      return;\n    }\n\n    addModule(m);\n\n    (m.__init__ || []).forEach(function(c) {\n      components.push(c);\n    });\n  }\n\n  bootstrapModules.forEach(visit);\n\n  var injector = new di.Injector(modules);\n\n  components.forEach(function(c) {\n\n    try {\n      // eagerly resolve component (fn or string)\n      injector[typeof c === 'string' ? 'get' : 'invoke'](c);\n    } catch (e) {\n      console.error('Failed to instantiate component');\n      console.error(e.stack);\n\n      throw e;\n    }\n  });\n\n  return injector;\n}\n\n/**\n * Creates an injector from passed options.\n *\n * @ignore\n * @param  {Object} options\n * @return {didi.Injector}\n */\nfunction createInjector(options) {\n\n  options = options || {};\n\n  var configModule = {\n    'config': ['value', options]\n  };\n\n  var coreModule = _dereq_('./core');\n\n  var modules = [ configModule, coreModule ].concat(options.modules || []);\n\n  return bootstrap(modules);\n}\n\n\n/**\n * The main diagram-js entry point that bootstraps the diagram with the given\n * configuration. To register extensions with the diagram, pass them as Array<didi.Module> to the constructor.\n *\n * @class djs.Diagram\n * @memberOf djs\n * @constructor\n *\n * @example\n *\n * <caption>Creating a plug-in that logs whenever a shape is added to the canvas.</caption>\n *\n * // plug-in implemenentation\n * function MyLoggingPlugin(eventBus) {\n *   eventBus.on('shape.added', function(event) {\n *     console.log('shape ', event.shape, ' was added to the diagram');\n *   });\n * }\n *\n * // export as module\n * module.exports = {\n *   __init__: [ 'myLoggingPlugin' ],\n *     myLoggingPlugin: [ 'type', MyLoggingPlugin ]\n * };\n *\n *\n * // instantiate the diagram with the new plug-in\n *\n * var diagram = new Diagram({ modules: [ require('path-to-my-logging-plugin') ] });\n *\n * diagram.invoke([ 'canvas', function(canvas) {\n *   // add shape to drawing canvas\n *   canvas.addShape({ x: 10, y: 10 });\n * });\n *\n * // 'shape ... was added to the diagram' logged to console\n *\n * @param {Object} options\n * @param {Array<didi.Module>} [options.modules] external modules to instantiate with the diagram\n * @param {didi.Injector} [injector] an (optional) injector to bootstrap the diagram with\n */\nfunction Diagram(options, injector) {\n\n  // create injector unless explicitly specified\n  this.injector = injector = injector || createInjector(options);\n\n  // API\n\n  /**\n   * Resolves a diagram service\n   *\n   * @method Diagram#get\n   *\n   * @param {String} name the name of the diagram service to be retrieved\n   * @param {Object} [locals] a number of locals to use to resolve certain dependencies\n   */\n  this.get = injector.get;\n\n  /**\n   * Executes a function into which diagram services are injected\n   *\n   * @method Diagram#invoke\n   *\n   * @param {Function|Object[]} fn the function to resolve\n   * @param {Object} locals a number of locals to use to resolve certain dependencies\n   */\n  this.invoke = injector.invoke;\n\n  // init\n\n  // indicate via event\n\n\n  /**\n   * An event indicating that all plug-ins are loaded.\n   *\n   * Use this event to fire other events to interested plug-ins\n   *\n   * @memberOf Diagram\n   *\n   * @event diagram.init\n   *\n   * @example\n   *\n   * events.on('diagram.init', function() {\n   *   events.fire('my-custom-event', { foo: 'BAR' });\n   * });\n   *\n   * @type {Object}\n   */\n  this.get('eventBus').fire('diagram.init');\n}\n\nmodule.exports = Diagram;\n\n\n/**\n * Destroys the diagram\n *\n * @method  Diagram#destroy\n */\nDiagram.prototype.destroy = function() {\n  this.get('eventBus').fire('diagram.destroy');\n};\n},{\"./core\":41,\"didi\":65}],36:[function(_dereq_,module,exports){\n'use strict';\n\n\nvar _ = (window._);\n\nvar Collections = _dereq_('../util/Collections');\n\n\nfunction round(number, resolution) {\n  return Math.round(number * resolution) / resolution;\n}\n\nfunction ensurePx(number) {\n  return _.isNumber(number) ? number + 'px' : number;\n}\n\n/**\n * Creates a HTML container element for a SVG element with\n * the given configuration\n *\n * @param  {Object} options\n * @return {HTMLElement} the container element\n */\nfunction createContainer(options) {\n\n  options = _.extend({}, { width: '100%', height: '100%' }, options);\n\n  var container = options.container || document.body;\n\n  // create a <div> around the svg element with the respective size\n  // this way we can always get the correct container size\n  // (this is impossible for <svg> elements at the moment)\n  var parent = document.createElement('div');\n  parent.setAttribute('class', 'djs-container');\n\n  _.extend(parent.style, {\n    position: 'relative',\n    width: ensurePx(options.width),\n    height: ensurePx(options.height)\n  });\n\n  container.appendChild(parent);\n\n  return parent;\n}\n\nfunction createGroup(parent, cls) {\n  return parent.group().attr({ 'class' : cls });\n}\n\nvar BASE_LAYER = 'base';\n\n\n/**\n * The main drawing canvas.\n *\n * @class\n * @constructor\n *\n * @emits Canvas#canvas.init\n *\n * @param {Object} config\n * @param {EventBus} eventBus\n * @param {GraphicsFactory} graphicsFactory\n * @param {ElementRegistry} elementRegistry\n * @param {Snap} snap\n */\nfunction Canvas(config, eventBus, graphicsFactory, elementRegistry, snap) {\n\n  this._snap = snap;\n  this._eventBus = eventBus;\n  this._elementRegistry = elementRegistry;\n  this._graphicsFactory = graphicsFactory;\n\n  this._init(config || {});\n}\n\nCanvas.$inject = [ 'config.canvas', 'eventBus', 'graphicsFactory', 'elementRegistry', 'snap' ];\n\nmodule.exports = Canvas;\n\n\nCanvas.prototype._init = function(config) {\n\n  // Creates a <svg> element that is wrapped into a <div>.\n  // This way we are always able to correctly figure out the size of the svg element\n  // by querying the parent node.\n  //\n  // (It is not possible to get the size of a svg element cross browser @ 2014-04-01)\n  //\n  // <div class=\"djs-container\" style=\"width: {desired-width}, height: {desired-height}\">\n  //   <svg width=\"100%\" height=\"100%\">\n  //    ...\n  //   </svg>\n  // </div>\n\n  // html container\n  var eventBus = this._eventBus,\n      graphicsFactory = this._graphicsFactory,\n      snap = this._snap,\n\n      container = createContainer(config),\n      svg = snap.createSnapAt('100%', '100%', container),\n      viewport = createGroup(svg, 'viewport'),\n\n      self = this;\n\n  this._container = container;\n  this._svg = svg;\n  this._viewport = viewport;\n  this._layers = {};\n\n  eventBus.on('diagram.init', function(event) {\n\n    /**\n     * An event indicating that the canvas is ready to be drawn on.\n     *\n     * @memberOf Canvas\n     *\n     * @event canvas.init\n     *\n     * @type {Object}\n     * @property {Snap<SVGSVGElement>} svg the created svg element\n     * @property {Snap<SVGGroup>} viewport the direct parent of diagram elements and shapes\n     */\n    eventBus.fire('canvas.init', { svg: svg, viewport: viewport });\n  });\n\n  eventBus.on('diagram.destroy', function() {\n\n    var parent = self._container.parentNode;\n\n    if (parent) {\n      parent.removeChild(container);\n    }\n\n    self._svg.remove();\n\n    self._svg = self._container = self._layers = self._viewport = null;\n  });\n\n};\n\n/**\n * Returns the default layer on which\n * all elements are drawn.\n *\n * @returns {Snap<SVGGroup>}\n */\nCanvas.prototype.getDefaultLayer = function() {\n  return this.getLayer(BASE_LAYER);\n};\n\n/**\n * Returns a layer that is used to draw elements\n * or annotations on it.\n *\n * @param  {String} name\n *\n * @returns {Snap<SVGGroup>}\n */\nCanvas.prototype.getLayer = function(name) {\n\n  if (!name) {\n    throw new Error('must specify a name');\n  }\n\n  var layer = this._layers[name];\n  if (!layer) {\n    layer = this._layers[name] = createGroup(this._viewport, 'layer-' + name);\n  }\n\n  return layer;\n};\n\n\n/**\n * Returns the html element that encloses the\n * drawing canvas.\n *\n * @return {DOMNode}\n */\nCanvas.prototype.getContainer = function() {\n  return this._container;\n};\n\n\n/////////////// markers ///////////////////////////////////\n\nCanvas.prototype._updateMarker = function(element, marker, add) {\n  var gfx;\n\n  if (!element.id) {\n    element = this._elementRegistry.get(element);\n  }\n\n  gfx = this.getGraphics(element);\n\n  if (!gfx) {\n    return;\n  }\n\n  // invoke either addClass or removeClass based on mode\n  gfx[add ? 'addClass' : 'removeClass'](marker);\n\n  /**\n   * An event indicating that a marker has been updated for an element\n   *\n   * @event element.marker.update\n   * @type {Object}\n   * @property {djs.model.Element} element the shape\n   * @property {Object} gfx the graphical representation of the shape\n   * @property {String} marker\n   * @property {Boolean} add true if the marker was added, false if it got removed\n   */\n  this._eventBus.fire('element.marker.update', { element: element, gfx: gfx, marker: marker, add: !!add });\n};\n\n\n/**\n * Adds a marker to an element (basically a css class).\n *\n * Fires the element.marker.update event, making it possible to\n * integrate extension into the marker life-cycle, too.\n *\n * @example\n * canvas.addMarker('foo', 'some-marker');\n *\n * var fooGfx = canvas.getGraphics('foo');\n *\n * fooGfx; // <g class=\"... some-marker\"> ... </g>\n *\n * @param {String|djs.model.Base} element\n * @param {String} marker\n */\nCanvas.prototype.addMarker = function(element, marker) {\n  this._updateMarker(element, marker, true);\n};\n\n\n/**\n * Remove a marker from an element.\n *\n * Fires the element.marker.update event, making it possible to\n * integrate extension into the marker life-cycle, too.\n *\n * @param  {String|djs.model.Base} element\n * @param  {String} marker\n */\nCanvas.prototype.removeMarker = function(element, marker) {\n  this._updateMarker(element, marker, false);\n};\n\nCanvas.prototype.getRootElement = function() {\n  if (!this._rootElement) {\n    this.setRootElement({ id: '__implicitroot' });\n  }\n\n  return this._rootElement;\n};\n\n\n\n//////////////// root element handling ///////////////////////////\n\n/**\n * Sets a given element as the new root element for the canvas\n * and returns it.\n *\n * @param {Object|djs.model.Root} element\n * @param {Boolean} [override] whether to override the current root element, if any\n */\nCanvas.prototype.setRootElement = function(element, override) {\n\n  var rootElement = this._rootElement,\n      elementRegistry = this._elementRegistry;\n\n  if (rootElement) {\n    if (!override) {\n      throw new Error('rootElement already defined');\n    }\n\n    elementRegistry.remove(rootElement);\n  }\n\n  elementRegistry.add(element, this.getDefaultLayer(), this._svg);\n\n  this._rootElement = element;\n\n  return element;\n};\n\n\n\n///////////// add functionality ///////////////////////////////\n\nCanvas.prototype._ensureValidId = function(element) {\n  if (!element.id) {\n    throw new Error('element must have an id');\n  }\n\n  if (this._elementRegistry.get(element.id)) {\n    throw new Error('element with id ' + element.id + ' already exists');\n  }\n};\n\nCanvas.prototype._setParent = function(element, parent) {\n  Collections.add(parent.children, element);\n  element.parent = parent;\n};\n\n/**\n * Adds an element to the canvas.\n *\n * This wires the parent <-> child relationship between the element and\n * a explicitly specified parent or an implicit root element.\n *\n * During add it emits the events\n *\n *  * <{type}.add> (element, parent)\n *  * <{type}.added> (element, gfx)\n *\n * Extensions may hook into these events to perform their magic.\n *\n * @param {String} type\n * @param {Object|djs.model.Base} element\n * @param {Object|djs.model.Base} [parent]\n *\n * @return {Object|djs.model.Base} the added element\n */\nCanvas.prototype._addElement = function(type, element, parent) {\n\n  parent = parent || this.getRootElement();\n\n  var eventBus = this._eventBus,\n      graphicsFactory = this._graphicsFactory;\n\n  this._ensureValidId(element);\n\n  eventBus.fire(type + '.add', { element: element, parent: parent });\n\n  this._setParent(element, parent);\n\n  // create graphics\n  var gfx = graphicsFactory.create(type, element);\n\n  this._elementRegistry.add(element, gfx);\n\n  // update its visual\n  graphicsFactory.update(type, element, gfx);\n\n  eventBus.fire(type + '.added', { element: element, gfx: gfx });\n\n  return element;\n};\n\n/**\n * Adds a shape to the canvas\n *\n * @param {Object|djs.model.Shape} shape to add to the diagram\n * @param {djs.model.Base} [parent]\n *\n * @return {djs.model.Shape} the added shape\n */\nCanvas.prototype.addShape = function(shape, parent) {\n  return this._addElement('shape', shape, parent);\n};\n\n/**\n * Adds a connection to the canvas\n *\n * @param {Object|djs.model.Connection} connection to add to the diagram\n * @param {djs.model.Base} [parent]\n *\n * @return {djs.model.Connection} the added connection\n */\nCanvas.prototype.addConnection = function(connection, parent) {\n  return this._addElement('connection', connection, parent);\n};\n\n\n/**\n * Internal remove element\n */\nCanvas.prototype._removeElement = function(element, type) {\n\n  var elementRegistry = this._elementRegistry,\n      graphicsFactory = this._graphicsFactory,\n      eventBus = this._eventBus;\n\n  element = elementRegistry.get(element.id || element);\n\n  if (!element) {\n    // element was removed already\n    return;\n  }\n\n  eventBus.fire(type + '.remove', { element: element });\n\n  graphicsFactory.remove(element);\n\n  // unset parent <-> child relationship\n  Collections.remove(element.parent && element.parent.children, element);\n  element.parent = null;\n\n  eventBus.fire(type + '.removed', { element: element });\n\n  elementRegistry.remove(element);\n\n  return element;\n};\n\n\n/**\n * Removes a shape from the canvas\n *\n * @param {String|djs.model.Shape} shape or shape id to be removed\n *\n * @return {djs.model.Shape} the removed shape\n */\nCanvas.prototype.removeShape = function(shape) {\n\n  /**\n   * An event indicating that a shape is about to be removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event shape.remove\n   * @type {Object}\n   * @property {djs.model.Shape} element the shape descriptor\n   * @property {Object} gfx the graphical representation of the shape\n   */\n\n  /**\n   * An event indicating that a shape has been removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event shape.removed\n   * @type {Object}\n   * @property {djs.model.Shape} element the shape descriptor\n   * @property {Object} gfx the graphical representation of the shape\n   */\n  return this._removeElement(shape, 'shape');\n};\n\n\n/**\n * Removes a connection from the canvas\n *\n * @param {String|djs.model.Connection} connection or connection id to be removed\n *\n * @return {djs.model.Connection} the removed connection\n */\nCanvas.prototype.removeConnection = function(connection) {\n\n  /**\n   * An event indicating that a connection is about to be removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event connection.remove\n   * @type {Object}\n   * @property {djs.model.Connection} element the connection descriptor\n   * @property {Object} gfx the graphical representation of the connection\n   */\n\n  /**\n   * An event indicating that a connection has been removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event connection.removed\n   * @type {Object}\n   * @property {djs.model.Connection} element the connection descriptor\n   * @property {Object} gfx the graphical representation of the connection\n   */\n  return this._removeElement(connection, 'connection');\n};\n\n\n/**\n * Sends a shape to the front.\n *\n * This method takes parent / child relationships between shapes into account\n * and makes sure that children are properly handled, too.\n *\n * @param {djs.model.Shape} shape descriptor of the shape to be sent to front\n * @param {boolean} [bubble=true] whether to send parent shapes to front, too\n */\nCanvas.prototype.sendToFront = function(shape, bubble) {\n\n  if (bubble !== false) {\n    bubble = true;\n  }\n\n  if (bubble && shape.parent) {\n    this.sendToFront(shape.parent);\n  }\n\n  _.forEach(shape.children, function(child) {\n    this.sendToFront(child, false);\n  }, this);\n\n  var gfx = this.getGraphics(shape),\n      gfxParent = gfx.parent();\n\n  gfx.remove().appendTo(gfxParent);\n};\n\n\n/**\n * Return the graphical object underlaying a certain diagram element\n *\n * @param {String|djs.model.Base} element descriptor of the element\n */\nCanvas.prototype.getGraphics = function(element) {\n  return this._elementRegistry.getGraphics(element);\n};\n\n\nCanvas.prototype._fireViewboxChange = function() {\n  this._eventBus.fire('canvas.viewbox.changed', { viewbox: this.viewbox(false) });\n};\n\n\n/**\n * Gets or sets the view box of the canvas, i.e. the area that is currently displayed\n *\n * @param  {Object} [box] the new view box to set\n * @param  {Number} box.x the top left X coordinate of the canvas visible in view box\n * @param  {Number} box.y the top left Y coordinate of the canvas visible in view box\n * @param  {Number} box.width the visible width\n * @param  {Number} box.height\n *\n * @example\n *\n * canvas.viewbox({ x: 100, y: 100, width: 500, height: 500 })\n *\n * // sets the visible area of the diagram to (100|100) -> (600|100)\n * // and and scales it according to the diagram width\n *\n * @return {Object} the current view box\n */\nCanvas.prototype.viewbox = function(box) {\n\n  if (box === undefined && this._cachedViewbox) {\n    return this._cachedViewbox;\n  }\n\n  var viewport = this._viewport,\n      innerBox,\n      outerBox = this.getSize(),\n      matrix,\n      scale,\n      x, y;\n\n  if (!box) {\n    innerBox = viewport.getBBox(true);\n\n    matrix = viewport.transform().localMatrix;\n    scale = round(matrix.a, 1000);\n\n    x = round(-matrix.e || 0, 1000);\n    y = round(-matrix.f || 0, 1000);\n\n    box = this._cachedViewbox = {\n      x: x ? x / scale : 0,\n      y: y ? y / scale : 0,\n      width: outerBox.width / scale,\n      height: outerBox.height / scale,\n      scale: scale,\n      inner: {\n        width: innerBox.width,\n        height: innerBox.height,\n        x: innerBox.x,\n        y: innerBox.y\n      },\n      outer: outerBox\n    };\n\n    return box;\n  } else {\n    scale = Math.max(outerBox.width / box.width, outerBox.height / box.height);\n\n    matrix = new this._snap.Matrix().scale(scale).translate(-box.x, -box.y);\n    viewport.transform(matrix);\n\n    this._fireViewboxChange();\n  }\n\n  return box;\n};\n\n\n/**\n * Gets or sets the scroll of the canvas.\n *\n * @param {Object} [delta] the new scroll to apply.\n *\n * @param {Number} [delta.dx]\n * @param {Number} [delta.dy]\n */\nCanvas.prototype.scroll = function(delta) {\n\n  var node = this._viewport.node;\n  var matrix = node.getCTM();\n\n  if (delta) {\n    delta = _.extend({ dx: 0, dy: 0 }, delta || {});\n\n    matrix = this._svg.node.createSVGMatrix().translate(delta.dx, delta.dy).multiply(matrix);\n\n    setCTM(node, matrix);\n\n    this._fireViewboxChange();\n  }\n\n  return { x: matrix.e, y: matrix.f };\n};\n\n\n/**\n * Gets or sets the current zoom of the canvas, optionally zooming to the specified position.\n *\n * @param {String|Number} [newScale] the new zoom level, either a number, i.e. 0.9,\n *                                   or `fit-viewport` to adjust the size to fit the current viewport\n * @param {String|Point} [center] the reference point { x: .., y: ..} to zoom to, 'auto' to zoom into mid or null\n *\n * @return {Number} the current scale\n */\nCanvas.prototype.zoom = function(newScale, center) {\n\n  var vbox = this.viewbox();\n\n  if (newScale === undefined) {\n    return vbox.scale;\n  }\n\n  var outer = vbox.outer;\n\n  if (newScale === 'fit-viewport') {\n    newScale = Math.min(1,\n      outer.width / (vbox.inner.width + vbox.inner.x),\n      outer.height / (vbox.inner.height + vbox.inner.y));\n  }\n\n  if (center === 'auto') {\n    center = {\n      x: outer.width / 2,\n      y: outer.height / 2\n    };\n  }\n\n  var matrix = this._setZoom(newScale, center);\n\n  this._fireViewboxChange();\n\n  return round(matrix.a, 1000);\n};\n\nfunction setCTM(node, m) {\n  var mstr = 'matrix(' + m.a + ',' + m.b + ',' + m.c + ',' + m.d + ',' + m.e + ',' + m.f + ')';\n  node.setAttribute('transform', mstr);\n}\n\nCanvas.prototype._setZoom = function(scale, center) {\n\n  var svg = this._svg.node,\n      viewport = this._viewport.node;\n\n  var matrix = svg.createSVGMatrix();\n  var point = svg.createSVGPoint();\n\n  var centerPoint,\n      originalPoint,\n      currentMatrix,\n      scaleMatrix,\n      newMatrix;\n\n  currentMatrix = viewport.getCTM();\n\n\n  var currentScale = currentMatrix.a;\n\n  if (center) {\n    centerPoint = _.extend(point, center);\n\n    // revert applied viewport transformations\n    originalPoint = centerPoint.matrixTransform(currentMatrix.inverse());\n\n    // create scale matrix\n    scaleMatrix = matrix\n                    .translate(originalPoint.x, originalPoint.y)\n                    .scale(1 / currentScale * scale)\n                    .translate(-originalPoint.x, -originalPoint.y);\n\n    newMatrix = currentMatrix.multiply(scaleMatrix);\n  } else {\n    newMatrix = matrix.scale(scale);\n  }\n\n  setCTM(this._viewport.node, newMatrix);\n\n  return newMatrix;\n};\n\n\n/**\n * Returns the size of the canvas\n *\n * @return {Dimensions}\n */\nCanvas.prototype.getSize = function () {\n  return {\n    width: this._container.clientWidth,\n    height: this._container.clientHeight\n  };\n};\n\n\n/**\n * Return the absolute bounding box for the given element\n *\n * The absolute bounding box may be used to display overlays in the\n * callers (browser) coordinate system rather than the zoomed in/out\n * canvas coordinates.\n *\n * @param  {ElementDescriptor} element\n * @return {Bounds} the absolute bounding box\n */\nCanvas.prototype.getAbsoluteBBox = function(element) {\n  var vbox = this.viewbox();\n  var bbox;\n\n  // connection\n  // use svg bbox\n  if (element.waypoints) {\n    var gfx = this.getGraphics(element);\n\n    var transformBBox = gfx.getBBox(true);\n    bbox = gfx.getBBox();\n\n    bbox.x -= transformBBox.x;\n    bbox.y -= transformBBox.y;\n\n    bbox.width += 2 * transformBBox.x;\n    bbox.height +=  2 * transformBBox.y;\n  }\n  // shapes\n  // use data\n  else {\n    bbox = element;\n  }\n\n  var x = bbox.x * vbox.scale - vbox.x * vbox.scale;\n  var y = bbox.y * vbox.scale - vbox.y * vbox.scale;\n\n  var width = bbox.width * vbox.scale;\n  var height = bbox.height * vbox.scale;\n\n  return {\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  };\n};\n},{\"../util/Collections\":58}],37:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\nvar Model = _dereq_('../model');\n\n\n/**\n * A factory for diagram-js shapes\n */\nfunction ElementFactory() {\n  this._uid = 12;\n}\n\nmodule.exports = ElementFactory;\n\n\nElementFactory.prototype.createRoot = function(attrs) {\n  return this.create('root', attrs);\n};\n\nElementFactory.prototype.createLabel = function(attrs) {\n  return this.create('label', attrs);\n};\n\nElementFactory.prototype.createShape = function(attrs) {\n  return this.create('shape', attrs);\n};\n\nElementFactory.prototype.createConnection = function(attrs) {\n  return this.create('connection', attrs);\n};\n\n/**\n * Create a model element with the given type and\n * a number of pre-set attributes.\n *\n * @param  {String} type\n * @param  {Object} attrs\n * @return {djs.model.Base} the newly created model instance\n */\nElementFactory.prototype.create = function(type, attrs) {\n\n  attrs = attrs || {};\n\n  if (!attrs.id) {\n    attrs.id = type + '_' + (this._uid++);\n  }\n\n  return Model.create(type, attrs);\n};\n},{\"../model\":57}],38:[function(_dereq_,module,exports){\nvar ELEMENT_ID = 'data-element-id';\n\n/**\n * @class\n *\n * A registry that keeps track of all shapes in the diagram.\n */\nfunction ElementRegistry() {\n  this._elements = {};\n}\n\nmodule.exports = ElementRegistry;\n\n/**\n * Register a pair of (element, gfx, (secondaryGfx)).\n *\n * @param {djs.model.Base} element\n * @param {Snap<SVGElement>} gfx\n * @param {Snap<SVGElement>} [secondaryGfx] optional other element to register, too\n */\nElementRegistry.prototype.add = function(element, gfx, secondaryGfx) {\n\n  var id = element.id;\n\n  if (!id) {\n    throw new Error('element must have an id');\n  }\n\n  if (this._elements[id]) {\n    throw new Error('element with id ' + id + ' already added');\n  }\n\n  // associate dom node with element\n  gfx.attr(ELEMENT_ID, id);\n\n  if (secondaryGfx) {\n    secondaryGfx.attr(ELEMENT_ID, id);\n  }\n\n  this._elements[id] = { element: element, gfx: gfx, secondaryGfx: secondaryGfx };\n};\n\n\n/**\n * Removes an element from the registry.\n *\n * @param {djs.model.Base} element\n */\nElementRegistry.prototype.remove = function(element) {\n  var elements = this._elements,\n      id = element.id || element,\n      container = id && elements[id];\n\n  if (container) {\n\n    // unset element id on gfx\n    container.gfx.attr(ELEMENT_ID, null);\n\n    if (container.secondaryGfx) {\n      container.secondaryGfx.attr(ELEMENT_ID, null);\n    }\n\n    delete elements[id];\n  }\n};\n\n\n/**\n * Return the model element for a given id or graphics.\n *\n * @example\n *\n * elementRegistry.get('SomeElementId_1');\n * elementRegistry.get(gfx);\n *\n *\n * @param {String|SVGElement} filter for selecting the element\n *\n * @return {djs.model.Base}\n */\nElementRegistry.prototype.get = function(filter) {\n  var id;\n\n  if (typeof filter === 'string') {\n    id = filter;\n  } else {\n    id = filter && filter.attr(ELEMENT_ID);\n  }\n\n  var container = this._elements[id];\n  return container && container.element;\n};\n\n/**\n * Return all elements that match a given filter function.\n *\n * @param {Function} fn\n *\n * @return {Array<djs.model.Base>}\n */\nElementRegistry.prototype.filter = function(fn) {\n\n  var map = this._elements,\n      filtered = [];\n\n  Object.keys(map).forEach(function(id) {\n    var container = map[id],\n        element = container.element,\n        gfx = container.gfx;\n\n    if (fn(element, gfx)) {\n      filtered.push(element);\n    }\n  });\n\n  return filtered;\n};\n\n/**\n * Return the graphics for a given id or element.\n *\n * @example\n *\n * elementRegistry.getGraphics('SomeElementId_1');\n * elementRegistry.getGraphics(rootElement);\n *\n *\n * @param {String|djs.model.Base} filter\n *\n * @return {SVGElement}\n */\nElementRegistry.prototype.getGraphics = function(filter) {\n  var id = filter.id || filter;\n\n  var container = this._elements[id];\n  return container && container.gfx;\n};\n\n},{}],39:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar DEFAULT_PRIORITY = 1000;\n\nfunction Event() { }\n\nEvent.prototype = {\n  stopPropagation: function() {\n    this.propagationStopped = true;\n  },\n  preventDefault: function() {\n    this.defaultPrevented = true;\n  },\n  init: function(data) {\n    _.extend(this, data || {});\n  }\n};\n\n\n/**\n * A general purpose event bus\n *\n * @class\n */\nfunction EventBus() {\n  this._listeners = {};\n\n  // cleanup on destroy\n\n  var self = this;\n\n  // destroy on lowest priority to allow\n  // message passing until the bitter end\n  this.on('diagram.destroy', 1, function() {\n    self._listeners = null;\n  });\n}\n\nmodule.exports = EventBus;\n\nmodule.exports.Event = Event;\n\n\n/**\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * @param {String|Array<String>} events\n * @param {Number} [priority=1000] the priority in which this listener is called, larger is higher\n * @param {Function} callback\n */\nEventBus.prototype.on = function(events, priority, callback) {\n\n  events = _.isArray(events) ? events : [ events ];\n\n  if (_.isFunction(priority)) {\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!_.isNumber(priority)) {\n    throw new Error('priority must be a number');\n  }\n\n  var self = this,\n      listener = { priority: priority, callback: callback };\n\n  events.forEach(function(e) {\n    self._addListener(e, listener);\n  });\n};\n\n\n/**\n * Register an event listener that is executed only once.\n *\n * @param {String} event the event name to register for\n * @param {Function} callback the callback to execute\n */\nEventBus.prototype.once = function(event, callback) {\n\n  var self = this;\n\n  function wrappedCallback() {\n    callback.apply(self, arguments);\n    self.off(event, wrappedCallback);\n  }\n\n  this.on(event, wrappedCallback);\n};\n\n\n/**\n * Removes event listeners by event and callback.\n *\n * If no callback is given, all listeners for a given event name are being removed.\n *\n * @param {String} event\n * @param {Function} [callback]\n */\nEventBus.prototype.off = function(event, callback) {\n  var listeners = this._getListeners(event),\n      l, i;\n\n  if (callback) {\n\n    // move through listeners from back to front\n    // and remove matching listeners\n    for (i = listeners.length - 1; !!(l = listeners[i]); i--) {\n      if (l.callback === callback) {\n        listeners.splice(i, 1);\n      }\n    }\n  } else {\n    // clear listeners\n    listeners.length = 0;\n  }\n};\n\n\n/**\n * Fires a named event.\n *\n * @example\n *\n * // fire event by name\n * events.fire('foo');\n *\n * // fire event object with nested type\n * var event = { type: 'foo' };\n * events.fire(event);\n *\n * // fire event with explicit type\n * var event = { x: 10, y: 20 };\n * events.fire('element.moved', event);\n *\n * // pass additional arguments to the event\n * events.on('foo', function(event, bar) {\n *   alert(bar);\n * });\n *\n * events.fire({ type: 'foo' }, 'I am bar!');\n *\n * @param {String} [name] the optional event name\n * @param {Object} [event] the event object\n * @param {...Object} additional arguments to be passed to the callback functions\n *\n * @return {Boolean} false if default was prevented, null if the propagation got stopped and true otherwise\n */\nEventBus.prototype.fire = function(type, data) {\n\n  var event,\n      originalType,\n      listeners, i, l,\n      args;\n\n  args = Array.prototype.slice.call(arguments);\n\n  if (typeof type === 'string') {\n    // remove name parameter\n    args.shift();\n  } else {\n    event = type;\n    type = event.type;\n  }\n\n  if (!type) {\n    throw new Error('no event type specified');\n  }\n\n  listeners = this._listeners[type];\n\n  if (!listeners) {\n    return true;\n  }\n\n  // we make sure we fire instances of our home made\n  // events here. We wrap them only once, though\n  if (data instanceof Event) {\n    // we are fine, we alread have an event\n    event = data;\n  } else {\n    event = Object.create(Event.prototype);\n    event.init(data);\n  }\n\n  // ensure we pass the event as the first parameter\n  args[0] = event;\n\n  // original event type (in case we delegate)\n  originalType = event.type;\n\n  try {\n\n    // update event type before delegation\n    if (type !== originalType) {\n      event.type = type;\n    }\n\n    for (i = 0, l; !!(l = listeners[i]); i++) {\n\n      // handle stopped propagation\n      if (event.propagationStopped) {\n        break;\n      }\n\n      try {\n        // handle listener returning false\n        if (l.callback.apply(null, args) === false) {\n          event.preventDefault();\n        }\n      } catch (e) {\n        if (!this.handleError(e)) {\n          console.error('unhandled error in event listener');\n          console.error(e.stack);\n\n          throw e;\n        }\n      }\n    }\n  } finally {\n    // reset event type after delegation\n    if (type !== originalType) {\n      event.type = originalType;\n    }\n  }\n\n  // distinguish between default prevented (false)\n  // and propagation stopped (null) as a return value\n  return event.defaultPrevented ? false : (event.propagationStopped ? null : true);\n};\n\n\nEventBus.prototype.handleError = function(error) {\n  return !this.fire('error', { error: error });\n};\n\n\nEventBus.prototype._addListener = function(event, listener) {\n\n  var listeners = this._getListeners(event),\n      i, l;\n\n  // ensure we order listeners by priority from\n  // 0 (high) to n > 0 (low)\n  for (i = 0; !!(l = listeners[i]); i++) {\n    if (l.priority < listener.priority) {\n      listeners.splice(i, 0, listener);\n      return;\n    }\n  }\n\n  listeners.push(listener);\n};\n\n\nEventBus.prototype._getListeners = function(name) {\n  var listeners = this._listeners[name];\n\n  if (!listeners) {\n    this._listeners[name] = listeners = [];\n  }\n\n  return listeners;\n};\n\n},{}],40:[function(_dereq_,module,exports){\nvar _ = (window._);\n\nvar GraphicsUtil = _dereq_('../util/GraphicsUtil'),\n    Dom = _dereq_('../util/Dom');\n\n\n/**\n * A factory that creates graphical elements\n *\n * @param {Renderer} renderer\n * @param {Snap} snap\n */\nfunction GraphicsFactory(renderer, elementRegistry, snap) {\n  this._renderer = renderer;\n  this._elementRegistry = elementRegistry;\n  this._snap = snap;\n}\n\nGraphicsFactory.$inject = [ 'renderer', 'elementRegistry', 'snap' ];\n\nmodule.exports = GraphicsFactory;\n\n\nGraphicsFactory.prototype._getChildren = function(element) {\n\n  var gfx = this._elementRegistry.getGraphics(element);\n\n  var childrenGfx;\n\n  // root element\n  if (!element.parent) {\n    childrenGfx = gfx;\n  } else {\n    childrenGfx = GraphicsUtil.getChildren(gfx);\n    if (!childrenGfx) {\n      childrenGfx = gfx.parent().group().attr('class', 'djs-children');\n    }\n  }\n\n  return childrenGfx;\n};\n\n/**\n * Clears the graphical representation of the element and returns the\n * cleared visual (the <g class=\"djs-visual\" /> element).\n */\nGraphicsFactory.prototype._clear = function(gfx) {\n  var visual = GraphicsUtil.getVisual(gfx);\n\n  Dom.clear(visual.node);\n\n  return visual;\n};\n\n/**\n * Creates a gfx container for shapes and connections\n *\n * The layout is as follows:\n *\n * <g class=\"djs-group\">\n *\n *   <!-- the gfx -->\n *   <g class=\"djs-element djs-(shape|connection)\">\n *     <g class=\"djs-visual\">\n *       <!-- the renderer draws in here -->\n *     </g>\n *\n *     <!-- extensions (overlays, click box, ...) goes here\n *   </g>\n *\n *   <!-- the gfx child nodes -->\n *   <g class=\"djs-children\"></g>\n * </g>\n *\n * @param {Object} parent\n * @param {String} type the type of the element, i.e. shape | connection\n */\nGraphicsFactory.prototype._createContainer = function(type, parentGfx) {\n  var outerGfx = parentGfx.group().attr('class', 'djs-group'),\n      gfx = outerGfx.group().attr('class', 'djs-element djs-' + type),\n      visual = gfx.group().attr('class', 'djs-visual');\n\n  return gfx;\n};\n\nGraphicsFactory.prototype.create = function(type, element) {\n  var childrenGfx = this._getChildren(element.parent);\n  return this._createContainer(type, childrenGfx);\n};\n\n\nGraphicsFactory.prototype.updateContainments = function(elements) {\n\n  var self = this,\n      elementRegistry = this._elementRegistry,\n      parents;\n\n\n  parents = _.reduce(elements, function(map, e) {\n\n    if (e.parent) {\n      map[e.parent.id] = e.parent;\n    }\n\n    return map;\n  }, {});\n\n  // update all parents of changed and reorganized their children\n  // in the correct order (as indicated in our model)\n  _.forEach(parents, function(parent) {\n\n    var childGfx = self._getChildren(parent),\n        children = parent.children;\n\n    if (!children) {\n      return;\n    }\n\n    _.forEach(children.slice().reverse(), function(c) {\n      var gfx = elementRegistry.getGraphics(c);\n      gfx.parent().prependTo(childGfx);\n    });\n  });\n\n};\n\nGraphicsFactory.prototype.update = function(type, element, gfx) {\n\n  var visual = this._clear(gfx);\n\n  // redraw\n  if (type === 'shape') {\n    this._renderer.drawShape(visual, element);\n\n    // update positioning\n    gfx.translate(element.x, element.y);\n  } else\n  if (type === 'connection') {\n    this._renderer.drawConnection(visual, element);\n  } else {\n    throw new Error('unknown type: ' + type);\n  }\n\n  gfx.attr('display', element.hidden ? 'none' : 'block');\n};\n\n\nGraphicsFactory.prototype.remove = function(element) {\n  var gfx = this._elementRegistry.getGraphics(element);\n\n  // remove\n  gfx.parent().remove();\n};\n},{\"../util/Dom\":59,\"../util/GraphicsUtil\":61}],41:[function(_dereq_,module,exports){\nmodule.exports = {\n  __depends__: [ _dereq_('../draw') ],\n  __init__: [ 'canvas' ],\n  canvas: [ 'type', _dereq_('./Canvas') ],\n  elementRegistry: [ 'type', _dereq_('./ElementRegistry') ],\n  elementFactory: [ 'type', _dereq_('./ElementFactory') ],\n  eventBus: [ 'type', _dereq_('./EventBus') ],\n  graphicsFactory: [ 'type', _dereq_('./GraphicsFactory') ]\n};\n},{\"../draw\":45,\"./Canvas\":36,\"./ElementFactory\":37,\"./ElementRegistry\":38,\"./EventBus\":39,\"./GraphicsFactory\":40}],42:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = _dereq_('./Snap');\n\n\n/**\n * The default renderer used for shapes and connections.\n *\n * @param {Styles} styles\n */\nfunction Renderer(styles) {\n  this.CONNECTION_STYLE = styles.style([ 'no-fill' ], { strokeWidth: 5, stroke: 'fuchsia' });\n  this.SHAPE_STYLE = styles.style({ fill: 'white', stroke: 'fuchsia', strokeWidth: 2 });\n}\n\nmodule.exports = Renderer;\n\nRenderer.$inject = ['styles'];\n\n\nRenderer.prototype.drawShape = function drawShape(gfxGroup, data) {\n  return gfxGroup.rect(0, 0, data.width || 0, data.height || 0, 10, 10).attr(this.SHAPE_STYLE);\n};\n\nRenderer.prototype.drawConnection = function drawConnection(gfxGroup, data) {\n  return createLine(data.waypoints, this.CONNECTION_STYLE).appendTo(gfxGroup);\n};\n\n\nfunction toSVGPoints(points) {\n  var result = '';\n\n  for (var i = 0, p; !!(p = points[i]); i++) {\n    result += p.x + ',' + p.y + ' ';\n  }\n\n  return result;\n}\n\nfunction createLine(points, attrs) {\n  return Snap.create('polyline', { points: toSVGPoints(points) }).attr(attrs || {});\n}\n\nfunction updateLine(gfx, points) {\n  return gfx.attr({ points: toSVGPoints(points) });\n}\n\nmodule.exports.createLine = createLine;\nmodule.exports.updateLine = updateLine;\n},{\"./Snap\":43}],43:[function(_dereq_,module,exports){\nvar snapsvg = (window.Snap);\n\n// require snapsvg extensions\n_dereq_('./snapsvg-extensions');\n\nmodule.exports = snapsvg;\n},{\"./snapsvg-extensions\":46}],44:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\n/**\n * A component that manages shape styles\n */\nfunction Styles() {\n\n  var defaultTraits = {\n\n    'no-fill': {\n      fill: 'none'\n    },\n    'no-border': {\n      strokeOpacity: 0.0\n    },\n    'no-events': {\n      pointerEvents: 'none'\n    }\n  };\n\n  /**\n   * Builds a style definition from a className, a list of traits and an object of additional attributes.\n   *\n   * @param  {String} className\n   * @param  {Array<String>} traits\n   * @param  {Object} additionalAttrs\n   *\n   * @return {Object} the style defintion\n   */\n  this.cls = function(className, traits, additionalAttrs) {\n    var attrs = this.style(traits, additionalAttrs);\n\n    return _.extend(attrs, { 'class': className });\n  };\n\n  /**\n   * Builds a style definition from a list of traits and an object of additional attributes.\n   *\n   * @param  {Array<String>} traits\n   * @param  {Object} additionalAttrs\n   *\n   * @return {Object} the style defintion\n   */\n  this.style = function(traits, additionalAttrs) {\n\n    if (!_.isArray(traits) && !additionalAttrs) {\n      additionalAttrs = traits;\n      traits = [];\n    }\n\n    var attrs = _.inject(traits, function(attrs, t) {\n      return _.extend(attrs, defaultTraits[t] || {});\n    }, {});\n\n    return additionalAttrs ? _.extend(attrs, additionalAttrs) : attrs;\n  };\n}\n\nmodule.exports = Styles;\n},{}],45:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  renderer: [ 'type', _dereq_('./Renderer') ],\n  snap: [ 'value', _dereq_('./Snap') ],\n  styles: [ 'type', _dereq_('./Styles') ]\n};\n},{\"./Renderer\":42,\"./Snap\":43,\"./Styles\":44}],46:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = (window.Snap);\n\nSnap.plugin(function(Snap, Element) {\n\n  /*\\\n   * Element.children\n   [ method ]\n   **\n   * Returns array of all the children of the element.\n   = (array) array of Elements\n  \\*/\n  Element.prototype.children = function () {\n      var out = [],\n          ch = this.node.childNodes;\n      for (var i = 0, ii = ch.length; i < ii; i++) {\n          out[i] = new Snap(ch[i]);\n      }\n      return out;\n  };\n});\n\n\n/**\n * @class ClassPlugin\n *\n * Extends snapsvg with methods to add and remove classes\n */\nSnap.plugin(function (Snap, Element, Paper, global) {\n\n  function split(str) {\n    return str.split(/\\s+/);\n  }\n\n  function join(array) {\n    return array.join(' ');\n  }\n\n  function getClasses(e) {\n    return split(e.attr('class') || '');\n  }\n\n  function setClasses(e, classes) {\n    e.attr('class', join(classes));\n  }\n\n  /**\n   * @method snapsvg.Element#addClass\n   *\n   * @example\n   *\n   * e.attr('class', 'selector');\n   *\n   * e.addClass('foo bar'); // adds classes foo and bar\n   * e.attr('class'); // -> 'selector foo bar'\n   *\n   * e.addClass('fooBar');\n   * e.attr('class'); // -> 'selector foo bar fooBar'\n   *\n   * @param {String} cls classes to be added to the element\n   *\n   * @return {snapsvg.Element} the element (this)\n   */\n  Element.prototype.addClass = function(cls) {\n    var current = getClasses(this),\n        add = split(cls),\n        i, e;\n\n    for (i = 0, e; !!(e = add[i]); i++) {\n      if (current.indexOf(e) === -1) {\n        current.push(e);\n      }\n    }\n\n    setClasses(this, current);\n\n    return this;\n  };\n\n  /**\n   * @method snapsvg.Element#hasClass\n   *\n   * @param  {String}  cls the class to query for\n   * @return {Boolean} returns true if the element has the given class\n   */\n  Element.prototype.hasClass = function(cls) {\n    if (!cls) {\n      throw new Error('[snapsvg] syntax: hasClass(clsStr)');\n    }\n\n    return getClasses(this).indexOf(cls) !== -1;\n  };\n\n  /**\n   * @method snapsvg.Element#removeClass\n   *\n   * @example\n   *\n   * e.attr('class', 'foo bar');\n   *\n   * e.removeClass('foo');\n   * e.attr('class'); // -> 'bar'\n   *\n   * e.removeClass('foo bar'); // removes classes foo and bar\n   * e.attr('class'); // -> ''\n   *\n   * @param {String} cls classes to be removed from element\n   *\n   * @return {snapsvg.Element} the element (this)\n   */\n  Element.prototype.removeClass = function(cls) {\n    var current = getClasses(this),\n        remove = split(cls),\n        i, e, idx;\n\n    for (i = 0, e; !!(e = remove[i]); i++) {\n      idx = current.indexOf(e);\n\n      if (idx !== -1) {\n        // remove element from array\n        current.splice(idx, 1);\n      }\n    }\n\n    setClasses(this, current);\n\n    return this;\n  };\n\n});\n\n/**\n * @class TranslatePlugin\n *\n * Extends snapsvg with methods to translate elements\n */\nSnap.plugin(function (Snap, Element, Paper, global) {\n\n  /*\n   * @method snapsvg.Element#translate\n   *\n   * @example\n   *\n   * e.translate(10, 20);\n   *\n   * // sets transform matrix to translate(10, 20)\n   *\n   * @param {Number} x translation\n   * @param {Number} y translation\n   *\n   * @return {snapsvg.Element} the element (this)\n   */\n  Element.prototype.translate = function(x, y) {\n    var matrix = new Snap.Matrix();\n    matrix.translate(x, y);\n    return this.transform(matrix);\n  };\n});\n\n\n/**\n * @class CreatePlugin\n *\n * Create an svg element without attaching it to the dom\n */\nSnap.plugin(function(Snap) {\n\n  Snap.create = function(name, attrs) {\n    return Snap._.wrap(Snap._.$(name, attrs));\n  };\n});\n\n\n/**\n * @class CreatSnapAtPlugin\n *\n * Extends snap.svg with a method to create a SVG element\n * at a specific position in the DOM.\n */\nSnap.plugin(function(Snap, Element, Paper, global) {\n\n  /*\n   * @method snapsvg.createSnapAt\n   *\n   * @example\n   *\n   * snapsvg.createSnapAt(parentNode, 200, 200);\n   *\n   * @param {Number} width of svg\n   * @param {Number} height of svg\n   * @param {Object} parentNode svg Element will be child of this\n   *\n   * @return {snapsvg.Element} the newly created wrapped SVG element instance\n   */\n  Snap.createSnapAt = function(width, height, parentNode) {\n\n    var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('width', width);\n    svg.setAttribute('height', height);\n    if (!parentNode) {\n      parentNode = document.body;\n    }\n    parentNode.appendChild(svg);\n\n    return new Snap(svg);\n  };\n});\n},{}],47:[function(_dereq_,module,exports){\n'use strict';\n\n\nvar _ = (window._);\n\nvar Snap = (window.Snap);\n\nvar GraphicsUtil = _dereq_('../../util/GraphicsUtil'),\n    Renderer = _dereq_('../../draw/Renderer'),\n    Dom = _dereq_('../../util/Dom'),\n    createLine = Renderer.createLine,\n    updateLine = Renderer.updateLine;\n\n\n/**\n * A plugin that provides interaction events for diagram elements.\n *\n * It emits the following events:\n *\n *   * element.hover\n *   * element.out\n *   * element.click\n *   * element.dblclick\n *   * element.mousedown\n *\n * Each event is a tuple { element, gfx, originalEvent }.\n *\n * Canceling the event via Event#preventDefault() prevents the original DOM operation.\n *\n * @param {EventBus} eventBus\n */\nfunction InteractionEvents(eventBus, elementRegistry, styles, snap) {\n\n  var HIT_STYLE = styles.cls('djs-hit', [ 'no-fill', 'no-border' ], {\n    stroke: 'white',\n    strokeWidth: 10\n  });\n\n  function fire(type, event) {\n    var target = Dom.closest(event.target, 'svg, .djs-element'),\n        gfx = target && snap(target),\n        element = elementRegistry.get(gfx),\n        defaultPrevented;\n\n    if (!gfx || !element) {\n      return;\n    }\n\n    defaultPrevented = eventBus.fire(type, { element: element, gfx: gfx, originalEvent: event });\n\n    if (defaultPrevented) {\n      event.preventDefault();\n    }\n  }\n\n  function mouseHandler(type) {\n    return function(event) {\n      // only indicate left mouse button=0 interactions\n      if (!event.button) {\n        fire(type, event);\n      }\n    };\n  }\n\n  ///// event registration\n\n  function registerEvents(svg) {\n\n    var node = svg.node;\n\n    /**\n     * An event indicating that the mouse hovered over an element\n     *\n     * @event element.hover\n     *\n     * @type {Object}\n     * @property {djs.model.Base} element\n     * @property {Snap<Element>} gfx\n     * @property {Event} originalEvent\n     */\n    Dom.on(node, 'mouseover', mouseHandler('element.hover'));\n\n    /**\n     * An event indicating that the mouse has left an element\n     *\n     * @event element.out\n     *\n     * @type {Object}\n     * @property {djs.model.Base} element\n     * @property {Snap<Element>} gfx\n     * @property {Event} originalEvent\n     */\n    Dom.on(node, 'mouseout', mouseHandler('element.out'));\n\n    /**\n     * An event indicating that the mouse has clicked an element\n     *\n     * @event element.click\n     *\n     * @type {Object}\n     * @property {djs.model.Base} element\n     * @property {Snap<Element>} gfx\n     * @property {Event} originalEvent\n     */\n    Dom.on(node, 'click', mouseHandler('element.click'));\n\n    /**\n     * An event indicating that the mouse has double clicked an element\n     *\n     * @event element.dblclick\n     *\n     * @type {Object}\n     * @property {djs.model.Base} element\n     * @property {Snap<Element>} gfx\n     * @property {Event} originalEvent\n     */\n    Dom.on(node, 'dblclick', mouseHandler('element.dblclick'));\n\n    /**\n     * An event indicating that the mouse has gone down on an element.\n     *\n     * @event element.mousedown\n     *\n     * @type {Object}\n     * @property {djs.model.Base} element\n     * @property {Snap<Element>} gfx\n     * @property {Event} originalEvent\n     */\n    Dom.on(node, 'mousedown', mouseHandler('element.mousedown'));\n\n    /**\n     * An event indicating that the mouse has gone up on an element.\n     *\n     * @event element.mouseup\n     *\n     * @type {Object}\n     * @property {djs.model.Base} element\n     * @property {Snap<Element>} gfx\n     * @property {Event} originalEvent\n     */\n    Dom.on(node, 'mouseup', mouseHandler('element.mouseup'));\n  }\n\n  eventBus.on('canvas.init', function(event) {\n    registerEvents(event.svg);\n  });\n\n\n  eventBus.on([ 'shape.added', 'connection.added' ], function(event) {\n    var element = event.element,\n        gfx = event.gfx,\n        visual = GraphicsUtil.getVisual(gfx),\n        baseEvent = { element: element, gfx: gfx };\n\n    var hit, type;\n\n    if (element.waypoints) {\n      hit = createLine(element.waypoints);\n      type = 'connection';\n    } else {\n      hit = Snap.create('rect', { x: 0, y: 0, width: element.width, height: element.height });\n      type = 'shape';\n    }\n\n    hit.attr(HIT_STYLE).appendTo(gfx.node);\n  });\n\n  // update djs-hit on change\n\n  eventBus.on('shape.changed', function(event) {\n\n    var element = event.element,\n        gfx = event.gfx,\n        hit = gfx.select('.djs-hit');\n\n    hit.attr({\n      width: element.width,\n      height: element.height\n    });\n  });\n\n  eventBus.on('connection.changed', function(event) {\n\n    var element = event.element,\n        gfx = event.gfx,\n        hit = gfx.select('.djs-hit');\n\n    updateLine(hit, element.waypoints);\n  });\n\n\n  // API\n\n  this.fire = fire;\n}\n\n\nInteractionEvents.$inject = [ 'eventBus', 'elementRegistry', 'styles', 'snap' ];\n\nmodule.exports = InteractionEvents;\n\n},{\"../../draw/Renderer\":42,\"../../util/Dom\":59,\"../../util/GraphicsUtil\":61}],48:[function(_dereq_,module,exports){\nmodule.exports = {\n  __init__: [ 'interactionEvents' ],\n  interactionEvents: [ 'type', _dereq_('./InteractionEvents') ]\n};\n},{\"./InteractionEvents\":47}],49:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = (window.Snap);\n\nvar GraphicsUtil = _dereq_('../../util/GraphicsUtil');\n\n\n/**\n * @class\n *\n * A plugin that adds an outline to shapes and connections that may be activated and styled\n * via CSS classes.\n *\n * @param {EventBus} events the event bus\n */\nfunction Outline(eventBus, styles, elementRegistry) {\n\n  var OUTLINE_OFFSET = 5;\n\n  var OUTLINE_STYLE = styles.cls('djs-outline', [ 'no-fill' ]);\n\n  function createOutline(gfx, bounds) {\n    return Snap.create('rect', OUTLINE_STYLE).prependTo(gfx);\n  }\n\n  function updateOutline(outline, bounds) {\n\n    outline.attr({\n      x: -OUTLINE_OFFSET,\n      y: -OUTLINE_OFFSET,\n      width: bounds.width + OUTLINE_OFFSET * 2,\n      height: bounds.height + OUTLINE_OFFSET * 2\n    });\n  }\n\n  eventBus.on([ 'shape.added', 'shape.changed' ], function(event) {\n    var element = event.element,\n        gfx     = event.gfx;\n\n    var outline = gfx.select('.djs-outline');\n\n    if (!outline) {\n      outline = createOutline(gfx, element);\n    }\n\n    updateOutline(outline, element);\n  });\n\n}\n\n\nOutline.$inject = ['eventBus', 'styles', 'elementRegistry'];\n\nmodule.exports = Outline;\n\n},{\"../../util/GraphicsUtil\":61}],50:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  __init__: [ 'outline' ],\n  outline: [ 'type', _dereq_('./Outline') ]\n};\n},{\"./Outline\":49}],51:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._),\n    $ = (window.$);\n\n// document wide unique overlay ids\nvar ids = new (_dereq_('../../util/IdGenerator'))('ov');\n\n\n/**\n * A plugin that allows users to attach overlays to diagram elements.\n *\n * The overlay service will take care of overlay positioning during updates.\n *\n * @class\n *\n * @example\n *\n * // add a pink badge on the top left of the shape\n * overlays.add(someShape, {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n * // or add via shape id\n *\n * overlays.add('some-element-id', {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n * // or add with optional type\n *\n * overlays.add(someShape, 'badge', {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n *\n * // remove an overlay\n *\n * var id = overlays.add(...);\n * overlays.remove(id);\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {ElementRegistry} elementRegistry\n */\nfunction Overlays(config, eventBus, canvas, elementRegistry) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n  this._elementRegistry = elementRegistry;\n\n  this._ids = ids;\n\n  this._overlayDefaults = {\n    show: {\n      trigger: 'automatic',\n      minZoom: 0.7,\n      maxZoom: 5.0\n    }\n  };\n\n  /**\n   * Mapping overlay-id > overlay\n   */\n  this._overlays = {};\n\n  /**\n   * Mapping element-id > overlay container\n   */\n  this._overlayContainers = {};\n\n  // root html element for all overlays\n  this._overlayRoot = $('<div class=\"djs-overlay-container\" />')\n                        .css({ position: 'absolute', width: 0, height: 0 })\n                        .prependTo(canvas.getContainer());\n\n  this._init(config);\n}\n\n\nOverlays.$inject = [ 'config.overlays', 'eventBus', 'canvas', 'elementRegistry' ];\n\nmodule.exports = Overlays;\n\n\n/**\n * Returns the overlay with the specified id or a list of overlays\n * for an element with a given type.\n *\n * @example\n *\n * // return the single overlay with the given id\n * overlays.get('some-id');\n *\n * // return all overlays for the shape\n * overlays.get({ element: someShape });\n *\n * // return all overlays on shape with type 'badge'\n * overlays.get({ element: someShape, type: 'badge' });\n *\n * // shape can also be specified as id\n * overlays.get({ element: 'element-id', type: 'badge' });\n *\n *\n * @param {Object} filter\n * @param {String} [filter.id]\n * @param {String|djs.model.Base} [filter.element]\n * @param {String} [filter.type]\n *\n * @return {Object|Array<Object>} the overlay(s)\n */\nOverlays.prototype.get = function(filter) {\n\n  if (_.isString(filter)) {\n    filter = { id: filter };\n  }\n\n  if (filter.element) {\n    var container = this._getOverlayContainer(filter.element, true);\n\n    // return a list of overlays when filtering by element (+type)\n    if (container) {\n      return filter.type ? _.filter(container.overlays, { type: filter.type }) : _.clone(container.overlays);\n    } else {\n      return [];\n    }\n  } else\n  if (filter.type) {\n    return _.filter(this._overlays, { type: filter.type });\n  } else {\n    // return single element when filtering by id\n    return filter.id ? this._overlays[filter.id] : null;\n  }\n};\n\n/**\n * Adds a HTML overlay to an element.\n *\n * @param {String|djs.model.Base}   element   attach overlay to this shape\n * @param {String}                  [type]    optional type to assign to the overlay\n * @param {Object}                  overlay   the overlay configuration\n *\n * @param {String|DOMElement}       overlay.html                      html element to use as an overlay\n * @param {Object}                  [overlay.show]                    show configuration\n * @param {Number}                  overlay.show.minZoom              minimal zoom level to show the overlay\n * @param {Number}                  overlay.show.maxZoom              maximum zoom level to show the overlay\n * @param {String}                  [overlay.show.trigger=automatic]  automatic or manual (user triggers show)\n * @param {Object}                  overlay.show.position             where to attach the overlay\n * @param {Number}                  [overlay.show.position.left]      relative to element bbox left attachment\n * @param {Number}                  [overlay.show.position.top]       relative to element bbox top attachment\n * @param {Number}                  [overlay.show.position.bottom]    relative to element bbox bottom attachment\n * @param {Number}                  [overlay.show.position.right]     relative to element bbox right attachment\n *\n * @return {String}                 id that may be used to reference the overlay for update or removal\n */\nOverlays.prototype.add = function(element, type, overlay) {\n\n  if (_.isObject(type)) {\n    overlay = type;\n    type = null;\n  }\n\n  if (!element.id) {\n    element = this._elementRegistry.get(element);\n  }\n\n  if (element.waypoints) {\n    throw new Error('overlays for connections are not supported');\n  }\n\n  if (!overlay.position) {\n    throw new Error('must specifiy overlay position');\n  }\n\n  if (!overlay.html) {\n    throw new Error('must specifiy overlay html');\n  }\n\n  if (!element) {\n    throw new Error('invalid element specified');\n  }\n\n  var id = this._ids.next();\n\n  overlay = _.extend({}, this._overlayDefaults, overlay, {\n    id: id,\n    type: type,\n    element: element,\n    html: $(overlay.html)\n  });\n\n  this._addOverlay(overlay);\n\n  return id;\n};\n\n\n/**\n * Remove an overlay with the given id or all overlays matching the given filter.\n *\n * @see Overlays#get for filter options.\n *\n * @param {String} [id]\n * @param {Object} [filter]\n */\nOverlays.prototype.remove = function(filter) {\n\n  var overlays = this.get(filter) || [];\n\n  if (!_.isArray(overlays)) {\n    overlays = [ overlays ];\n  }\n\n  var self = this;\n\n  _.forEach(overlays, function(overlay) {\n\n    var container = self._getOverlayContainer(overlay.element, true);\n\n    if (overlay) {\n      overlay.html.remove();\n      overlay.htmlContainer.remove();\n\n      delete overlay.htmlContainer;\n      delete overlay.element;\n\n      delete self._overlays[overlay.id];\n    }\n\n    if (container) {\n      var idx = container.overlays.indexOf(overlay);\n      if (idx !== -1) {\n        container.overlays.splice(idx, 1);\n      }\n    }\n  });\n\n};\n\n\nOverlays.prototype.show = function() {\n  this._overlayRoot.show();\n};\n\n\nOverlays.prototype.hide = function() {\n  this._overlayRoot.hide();\n};\n\n\nOverlays.prototype._updateOverlayContainer = function(container) {\n  var element = container.element,\n      html = container.html;\n\n  // update container left,top according to the elements x,y coordinates\n  // this ensures we can attach child elements relative to this container\n\n  // TODO(nre): update according to element bbox (for connections)\n  html.css({ left: element.x, top: element.y });\n};\n\n\nOverlays.prototype._updateOverlay = function(overlay) {\n\n  var position = overlay.position,\n      htmlContainer = overlay.htmlContainer,\n      element = overlay.element;\n\n  // update overlay html relative to shape because\n  // it is already positioned on the element\n\n  // update relative\n  var left = position.left,\n      top = position.top;\n\n  if (position.right !== undefined) {\n    left = position.right * -1 + element.width;\n  }\n\n  if (position.bottom !== undefined) {\n    top = position.bottom * -1 + element.height;\n  }\n\n  htmlContainer.css({ left: left || 0, top: top || 0 });\n};\n\n\nOverlays.prototype._createOverlayContainer = function(element) {\n  var html = $('<div />')\n                .addClass('djs-overlays')\n                .addClass('djs-overlays-' + element.id)\n                .css({ position: 'absolute' });\n\n  html.appendTo(this._overlayRoot);\n\n  var container = {\n    html: html,\n    element: element,\n    overlays: []\n  };\n\n  this._updateOverlayContainer(container);\n\n  return container;\n};\n\n\nOverlays.prototype._updateRoot = function(viewbox) {\n  var a = viewbox.scale || 1;\n  var d = viewbox.scale || 1;\n  var e = viewbox.x || 0;\n  var f = viewbox.y || 0;\n\n  var matrix = 'matrix(' + a + ',0,0,' + d + ',' + (-1 * viewbox.x * a) + ',' + (-1 * viewbox.y * d) + ')';\n\n  this._overlayRoot.css('transform', matrix);\n};\n\n\nOverlays.prototype._getOverlayContainer = function(element, raw) {\n  var id = (element && element.id) || element;\n\n  var container = this._overlayContainers[id];\n  if (!container && !raw) {\n    container = this._overlayContainers[id] = this._createOverlayContainer(element);\n  }\n\n  return container;\n};\n\n\nOverlays.prototype._addOverlay = function(overlay) {\n\n  var id = overlay.id,\n      element = overlay.element;\n\n  var container = this._getOverlayContainer(element);\n\n  var htmlContainer = $('<div>', {\n    id: id,\n    'class': 'djs-overlay'\n  }).css({ position: 'absolute' }).append(overlay.html);\n\n  if (overlay.type) {\n    htmlContainer.addClass('djs-overlay-' + overlay.type);\n  }\n\n  overlay.htmlContainer = htmlContainer;\n\n  container.overlays.push(overlay);\n  container.html.append(htmlContainer);\n\n  this._overlays[id] = overlay;\n\n  this._updateOverlay(overlay);\n};\n\nOverlays.prototype._updateOverlayVisibilty = function(viewbox) {\n\n  _.forEach(this._overlays, function(overlay) {\n    if (overlay.show) {\n      if (overlay.show.minZoom > viewbox.scale ||\n          overlay.show.maxZoom < viewbox.scale) {\n        overlay.htmlContainer.hide();\n      } else {\n        overlay.htmlContainer.show();\n      }\n    }\n  });\n};\n\nOverlays.prototype._init = function(config) {\n\n  var eventBus = this._eventBus;\n\n  var self = this;\n\n\n  // scroll/zoom integration\n\n  var updateViewbox = function(viewbox) {\n    self._updateRoot(viewbox);\n    self._updateOverlayVisibilty(viewbox);\n\n    self.show();\n  };\n\n  if (!config || config.deferUpdate !== false) {\n    updateViewbox = _.debounce(updateViewbox, 300);\n  }\n\n  eventBus.on('canvas.viewbox.changed', function(event) {\n    self.hide();\n    updateViewbox(event.viewbox);\n  });\n\n\n  // remove integration\n\n  eventBus.on([ 'shape.remove', 'connection.remove' ], function(e) {\n    var overlays = self.get({ element: e.element });\n\n    _.forEach(overlays, function(o) {\n      self.remove(o.id);\n    });\n  });\n\n\n  // move integration\n\n  eventBus.on([\n    'commandStack.shape.move.executed',\n    'commandStack.shape.move.reverted'\n  ], function(e) {\n    var element = e.context.shape;\n\n      var container = self._getOverlayContainer(element, true);\n      if (container) {\n        self._updateOverlayContainer(container);\n      }\n  });\n\n  eventBus.on([\n    'commandStack.shape.resize.executed',\n    'commandStack.shape.resize.reverted'\n  ], function(e) {\n\n    var overlays = self._overlays;\n\n    var element = e.context.shape;\n\n    _.forEach(overlays, function(overlay) {\n      if (overlay.element.id === element.id) {\n        self._updateOverlay(overlay);\n      }\n    });\n\n    var container = self._getOverlayContainer(element, true);\n    if (container) {\n      self._updateOverlayContainer(container);\n    }\n  });\n\n  // marker integration, simply add them on the overlays as classes, too.\n\n  eventBus.on('element.marker.update', function(e) {\n    var container = self._getOverlayContainer(e.element, true);\n    if (container) {\n      container.html[e.add ? 'addClass' : 'removeClass'](e.marker);\n    }\n  });\n};\n\n},{\"../../util/IdGenerator\":62}],52:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  __init__: [ 'overlays' ],\n  overlays: [ 'type', _dereq_('./Overlays') ]\n};\n},{\"./Overlays\":51}],53:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\n/**\n * A service that offers the current selection in a diagram.\n * Offers the api to control the selection, too.\n *\n * @class\n *\n * @param {EventBus} eventBus the event bus\n */\nfunction Selection(eventBus) {\n\n  this._eventBus = eventBus;\n\n  this._selectedElements = [];\n\n  var self = this;\n\n  eventBus.on([ 'shape.remove', 'connection.remove' ], function(e) {\n    var element = e.element;\n    self.deselect(element);\n  });\n}\n\nSelection.$inject = [ 'eventBus' ];\n\nmodule.exports = Selection;\n\n\nSelection.prototype.deselect = function(element) {\n  var selectedElements = this._selectedElements;\n\n  var idx = selectedElements.indexOf(element);\n\n  if (idx !== -1) {\n    var oldSelection = selectedElements.slice();\n\n    selectedElements.splice(idx, 1);\n\n    this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: selectedElements });\n  }\n};\n\n\nSelection.prototype.get = function() {\n  return this._selectedElements;\n};\n\nSelection.prototype.isSelected = function(element) {\n  return this._selectedElements.indexOf(element) !== -1;\n};\n\n\n/**\n * This method selects one or more elements on the diagram.\n *\n * By passing an additional add parameter you can decide whether or not the element(s)\n * should be added to the already existing selection or not.\n *\n * @method Selection#select\n *\n * @param  {Object|Object[]} elements element or array of elements to be selected\n * @param  {boolean} [add] whether the element(s) should be appended to the current selection, defaults to false\n */\nSelection.prototype.select = function(elements, add) {\n  var selectedElements = this._selectedElements,\n      oldSelection = selectedElements.slice();\n\n  if (!_.isArray(elements)) {\n    elements = elements ? [ elements ] : [];\n  }\n\n  var self = this;\n\n  // selection may be cleared by passing an empty array or null\n  // to the method\n  if (add) {\n    _.forEach(elements, function(element) {\n      if (selectedElements.indexOf(element) !== -1) {\n        // already selected\n        return;\n      } else {\n        selectedElements.push(element);\n      }\n    });\n  } else {\n    this._selectedElements = selectedElements = elements.slice();\n  }\n\n  this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: selectedElements });\n};\n},{}],54:[function(_dereq_,module,exports){\n'use strict';\n\nvar getOriginalEvent = _dereq_('../../util/Event').getOriginal;\n\nfunction SelectionBehavior(eventBus, selection, canvas) {\n\n  eventBus.on('create.end', 500, function(e) {\n    if (e.context.canExecute) {\n      selection.select(e.shape);\n    }\n  });\n\n  eventBus.on('connect.end', 500, function(e) {\n    if (e.context.canExecute && e.context.target) {\n      selection.select(e.context.target);\n    }\n  });\n\n  eventBus.on('shape.move.end', 500, function(e) {\n    selection.select(e.context.shapes);\n  });\n\n  eventBus.on('element.click', function(event) {\n\n    var element = event.element;\n\n    // do not select the root element\n    // or connections\n    if (element === canvas.getRootElement() ||\n        element.waypoints) {\n\n      element = null;\n    }\n\n    var add = (getOriginalEvent(event) || event).shiftKey;\n    selection.select(element, add);\n  });\n}\n\nSelectionBehavior.$inject = [ 'eventBus', 'selection', 'canvas' ];\n\nmodule.exports = SelectionBehavior;\n},{\"../../util/Event\":60}],55:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar MARKER_HOVER = 'hover',\n    MARKER_SELECTED = 'selected';\n\n\n/**\n * A plugin that adds a visible selection UI to shapes and connections\n * by appending the <code>hover</code> and <code>selected</code> classes to them.\n *\n * @class\n *\n * Makes elements selectable, too.\n *\n * @param {EventBus} events\n * @param {SelectionService} selection\n * @param {Canvas} canvas\n */\nfunction SelectionVisuals(events, canvas) {\n\n  function addMarker(e, cls) {\n    canvas.addMarker(e, cls);\n  }\n\n  function removeMarker(e, cls) {\n    canvas.removeMarker(e, cls);\n  }\n\n  events.on('element.hover', function(event) {\n    addMarker(event.element, MARKER_HOVER);\n  });\n\n  events.on('element.out', function(event) {\n    removeMarker(event.element, MARKER_HOVER);\n  });\n\n  events.on('selection.changed', function(event) {\n\n    function deselect(s) {\n      removeMarker(s, MARKER_SELECTED);\n    }\n\n    function select(s) {\n      addMarker(s, MARKER_SELECTED);\n    }\n\n    var oldSelection = event.oldSelection,\n        newSelection = event.newSelection;\n\n    _.forEach(oldSelection, function(e) {\n      if (newSelection.indexOf(e) === -1) {\n        deselect(e);\n      }\n    });\n\n    _.forEach(newSelection, function(e) {\n      if (oldSelection.indexOf(e) === -1) {\n        select(e);\n      }\n    });\n  });\n}\n\nSelectionVisuals.$inject = [\n  'eventBus',\n  'canvas'\n];\n\nmodule.exports = SelectionVisuals;\n\n},{}],56:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  __init__: [ 'selectionVisuals', 'selectionBehavior' ],\n  __depends__: [\n    _dereq_('../interaction-events'),\n    _dereq_('../outline')\n  ],\n  selection: [ 'type', _dereq_('./Selection') ],\n  selectionVisuals: [ 'type', _dereq_('./SelectionVisuals') ],\n  selectionBehavior: [ 'type', _dereq_('./SelectionBehavior') ]\n};\n},{\"../interaction-events\":48,\"../outline\":50,\"./Selection\":53,\"./SelectionBehavior\":54,\"./SelectionVisuals\":55}],57:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Refs = _dereq_('object-refs');\n\nvar parentRefs = new Refs({ name: 'children', enumerable: true, collection: true }, { name: 'parent' }),\n    labelRefs = new Refs({ name: 'label', enumerable: true }, { name: 'labelTarget' }),\n    outgoingRefs = new Refs({ name: 'outgoing', collection: true }, { name: 'source' }),\n    incomingRefs = new Refs({ name: 'incoming', collection: true }, { name: 'target' });\n\n/**\n * @namespace djs.model\n */\n\n/**\n * @memberOf djs.model\n */\n\n/**\n * The basic graphical representation\n *\n * @class\n *\n * @abstract\n */\nfunction Base() {\n\n  /**\n   * The object that backs up the shape\n   *\n   * @name Base#businessObject\n   * @type Object\n   */\n  Object.defineProperty(this, 'businessObject', {\n    writable: true\n  });\n\n  /**\n   * The parent shape\n   *\n   * @name Base#parent\n   * @type Shape\n   */\n  parentRefs.bind(this, 'parent');\n\n  /**\n   * @name Base#label\n   * @type Label\n   */\n  labelRefs.bind(this, 'label');\n\n  /**\n   * The list of outgoing connections\n   *\n   * @name Base#outgoing\n   * @type Array<Connection>\n   */\n  outgoingRefs.bind(this, 'outgoing');\n\n  /**\n   * The list of outgoing connections\n   *\n   * @name Base#incoming\n   * @type Array<Connection>\n   */\n  incomingRefs.bind(this, 'incoming');\n}\n\n\n/**\n * A graphical object\n *\n * @class\n * @constructor\n *\n * @extends Base\n */\nfunction Shape() {\n  Base.call(this);\n\n  /**\n   * The list of children\n   *\n   * @name Shape#children\n   * @type Array<Base>\n   */\n  parentRefs.bind(this, 'children');\n}\n\nShape.prototype = Object.create(Base.prototype);\n\n\n/**\n * A root graphical object\n *\n * @class\n * @constructor\n *\n * @extends Shape\n */\nfunction Root() {\n  Shape.call(this);\n}\n\nRoot.prototype = Object.create(Shape.prototype);\n\n\n/**\n * A label for an element\n *\n * @class\n * @constructor\n *\n * @extends Shape\n */\nfunction Label() {\n  Shape.call(this);\n\n  /**\n   * The labeled element\n   *\n   * @name Label#labelTarget\n   * @type Base\n   */\n  labelRefs.bind(this, 'labelTarget');\n}\n\nLabel.prototype = Object.create(Shape.prototype);\n\n\n/**\n * A connection between two elements\n *\n * @class\n * @constructor\n *\n * @extends Base\n */\nfunction Connection() {\n  Base.call(this);\n\n  /**\n   * The element this connection originates from\n   *\n   * @name Connection#source\n   * @type Base\n   */\n  outgoingRefs.bind(this, 'source');\n\n  /**\n   * The element this connection points to\n   *\n   * @name Connection#target\n   * @type Base\n   */\n  incomingRefs.bind(this, 'target');\n}\n\nConnection.prototype = Object.create(Base.prototype);\n\n\nvar types = {\n  connection: Connection,\n  shape: Shape,\n  label: Label,\n  root: Root\n};\n\n/**\n * Creates a new model element of the specified type\n *\n * @method create\n *\n * @example\n *\n * var shape1 = Model.create('shape', { x: 10, y: 10, width: 100, height: 100 });\n * var shape2 = Model.create('shape', { x: 210, y: 210, width: 100, height: 100 });\n *\n * var connection = Model.create('connection', { waypoints: [ { x: 110, y: 55 }, {x: 210, y: 55 } ] });\n *\n * @param  {String} type lower-cased model name\n * @param  {Object} attrs attributes to initialize the new model instance with\n *\n * @return {Base} the new model instance\n */\nmodule.exports.create = function(type, attrs) {\n  var Type = types[type];\n  if (!Type) {\n    throw new Error('unknown type: <' + type + '>');\n  }\n  return _.extend(new Type(), attrs);\n};\n\n\nmodule.exports.Base = Base;\nmodule.exports.Root = Root;\nmodule.exports.Shape = Shape;\nmodule.exports.Connection = Connection;\nmodule.exports.Label = Label;\n},{\"object-refs\":68}],58:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Failsafe remove an element from a collection\n *\n * @param  {Array<Object>} [collection]\n * @param  {Object} [element]\n *\n * @return {Object} the element that got removed or undefined\n */\nmodule.exports.remove = function(collection, element) {\n\n  if (!collection || !element) {\n    return;\n  }\n\n  var idx = collection.indexOf(element);\n  if (idx === -1) {\n    return;\n  }\n\n  collection.splice(idx, 1);\n\n  return element;\n};\n\n/**\n * Fail save add an element to the given connection, ensuring\n * it does not yet exist.\n *\n * @param {Array<Object>} collection\n * @param {Object} element\n * @param {Number} idx\n */\nmodule.exports.add = function(collection, element, idx) {\n\n  if (!collection || !element) {\n    return;\n  }\n\n  if (isNaN(idx)) {\n    idx = -1;\n  }\n\n  var currentIdx = collection.indexOf(element);\n\n  if (currentIdx !== -1) {\n\n    if (currentIdx === idx) {\n      // nothing to do, position has not changed\n      return;\n    } else {\n\n      if (idx !== -1) {\n        // remove from current position\n        collection.splice(currentIdx, 1);\n      } else {\n        // already exists in collection\n        return;\n      }\n    }\n  }\n\n  if (idx !== -1) {\n    // insert at specified position\n    collection.splice(idx, 0, element);\n  } else {\n    // push to end\n    collection.push(element);\n  }\n};\n\n\n/**\n * Fail get the index of an element in a collection.\n *\n * @param {Array<Object>} collection\n * @param {Object} element\n *\n * @return {Number} the index or -1 if collection or element do\n *                  not exist or the element is not contained.\n */\nmodule.exports.indexOf = function(collection, element) {\n\n  if (!collection || !element) {\n    return -1;\n  }\n\n  return collection.indexOf(element);\n};\n\n},{}],59:[function(_dereq_,module,exports){\n\nvar elementProto = Element.prototype;\n\n// TODO(nre): remove if we drop support for PhantomJS 1.9\n\nvar matchPolyfill = function(selector) {\n\n  var element = this;\n  var matches = (element.document || element.ownerDocument).querySelectorAll(selector);\n  var i = 0;\n\n  while (matches[i] && matches[i] !== element) {\n    i++;\n  }\n\n  return matches[i] ? true : false;\n};\n\n\nvar matchFn = elementProto.matches ||\n              elementProto.mozMatchesSelector ||\n              elementProto.webkitMatchesSelecor ||\n              elementProto.msMatchesSelector || matchPolyfill;\n\n\n/**\n * Returns true if an element matches the given selector\n *\n * @param  {Element} element\n * @param  {String} selector\n *\n * @return {Boolean}\n */\nfunction matches(element, selector) {\n  return matchFn.call(element, selector);\n}\n\nmodule.exports.matches = matches;\n\n\n/**\n * Gets the closest parent node of the element matching the given selector\n *\n * @param  {Element} element\n * @param  {String} selector\n *\n * @return {Element} the matching parent\n */\nfunction closest(element, selector) {\n  while (element) {\n    if (element instanceof Element) {\n      if (matches(element, selector)) {\n        return element;\n      } else {\n        element = element.parentNode;\n      }\n    } else {\n      break;\n    }\n  }\n\n  return null;\n}\n\nmodule.exports.closest = closest;\n\n\nfunction clear(element) {\n  while (element.childNodes.length) {\n    element.removeChild(element.childNodes[0]);\n  }\n}\n\nmodule.exports.clear = clear;\n\n\nfunction on(element, type, fn, useCapture) {\n  element.addEventListener(type, fn, useCapture || false);\n}\n\nmodule.exports.on = on;\n\n\nfunction off(element, type, fn, useCapture) {\n  element.removeEventListener(type, fn, useCapture || false);\n}\n\nmodule.exports.off = off;\n\nfunction once(element, type, fn, useCapture) {\n\n  var wrappedFn = function(e) {\n    fn(e);\n\n    off(element, type, wrappedFn, useCapture);\n  };\n\n  on(element, type, wrappedFn, useCapture);\n}\n\nmodule.exports.once = once;\n},{}],60:[function(_dereq_,module,exports){\nfunction __preventDefault(event) {\n  return event && event.preventDefault();\n}\n\nfunction __stopPropagation(event, immediate) {\n  if (!event) {\n    return;\n  }\n\n  if (event.stopPropagation) {\n    event.stopPropagation();\n  }\n\n  if (immediate && event.stopImmediatePropagation) {\n    event.stopImmediatePropagation();\n  }\n}\n\n\nfunction getOriginal(event) {\n  return event.originalEvent || event.srcEvent;\n}\n\nmodule.exports.getOriginal = getOriginal;\n\n\nfunction stopEvent(event, immediate) {\n  stopPropagation(event, immediate);\n  preventDefault(event);\n}\n\nmodule.exports.stopEvent = stopEvent;\n\n\nfunction preventDefault(event) {\n  __preventDefault(event);\n  __preventDefault(getOriginal(event));\n}\n\nmodule.exports.preventDefault = preventDefault;\n\n\nfunction stopPropagation(event, immediate) {\n  __stopPropagation(event, immediate);\n  __stopPropagation(getOriginal(event), immediate);\n}\n\nmodule.exports.stopPropagation = stopPropagation;\n\n\nfunction toPoint(event) {\n\n  if (event.pointers && event.pointers.length) {\n    event = event.pointers[0];\n  }\n\n  if (event.touches && event.touches.length) {\n    event = event.touches[0];\n  }\n\n  return event ? {\n    x: event.clientX,\n    y: event.clientY\n  } : null;\n}\n\nmodule.exports.toPoint = toPoint;\n},{}],61:[function(_dereq_,module,exports){\n/**\n * SVGs for elements are generated by the {@link GraphicsFactory}.\n *\n * This utility gives quick access to the important semantic\n * parts of an element.\n */\n\n/**\n * Returns the visual part of a diagram element\n *\n * @param {Snap<SVGElement>} gfx\n *\n * @return {Snap<SVGElement>}\n */\nfunction getVisual(gfx) {\n  return gfx.select('.djs-visual');\n}\n\n/**\n * Returns the children for a given diagram element.\n *\n * @param {Snap<SVGElement>} gfx\n * @return {Snap<SVGElement>}\n */\nfunction getChildren(gfx) {\n  return gfx.parent().children()[1];\n}\n\n/**\n * Returns the visual bbox of an element\n *\n * @param {Snap<SVGElement>} gfx\n *\n * @return {Bounds}\n */\nfunction getBBox(gfx) {\n  return getVisual(gfx).select('*').getBBox();\n}\n\n\nmodule.exports.getVisual = getVisual;\nmodule.exports.getChildren = getChildren;\nmodule.exports.getBBox = getBBox;\n},{}],62:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Util that provides unique IDs.\n *\n * @class djs.util.IdGenerator\n * @memberOf djs.util\n *\n * @constructor\n *\n * The ids can be customized via a given prefix and contain a random value to avoid collisions.\n *\n * @param {String} prefix a prefix to prepend to generated ids (for better readability)\n */\nfunction IdGenerator(prefix) {\n\n  this._counter = 0;\n  this._prefix = (prefix ? prefix + '-' : '') + Math.floor(Math.random() * 1000000000) + '-';\n}\n\nmodule.exports = IdGenerator;\n\n/**\n * Returns a next unique ID.\n *\n * @method djs.util.IdGenerator#next\n *\n * @returns {String} the id\n */\nIdGenerator.prototype.next = function() {\n  return this._prefix + (++this._counter);\n};\n\n},{}],63:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = (window.Snap);\nvar _ = (window._);\n\nvar DEFAULT_BOX_PADDING = 0;\n\nvar DEFAULT_LABEL_SIZE = {\n  width: 150,\n  height: 50\n};\n\n\nfunction parseAlign(align) {\n\n  var parts = align.split('-');\n\n  return {\n    horizontal: parts[0] || 'center',\n    vertical: parts[1] || 'top'\n  };\n}\n\nfunction parsePadding(padding) {\n\n  if (_.isObject(padding)) {\n    return _.extend({ top: 0, left: 0, right: 0, bottom: 0 }, padding);\n  } else {\n    return {\n      top: padding,\n      left: padding,\n      right: padding,\n      bottom: padding\n    };\n  }\n}\n\n\n/**\n * Creates a new label utility\n *\n * @param {Object} config\n * @param {Dimensions} config.size\n * @param {Number} config.padding\n * @param {Object} config.style\n * @param {String} config.align\n */\nfunction Text(config) {\n\n  this._config = _.extend({}, {\n    size: DEFAULT_LABEL_SIZE,\n    padding: DEFAULT_BOX_PADDING,\n    style: {},\n    align: 'center-top'\n  }, config || {});\n}\n\n/**\n * Create a label in the parent node.\n *\n * @method Text#createText\n *\n * @param {SVGElement} parent the parent to draw the label on\n * @param {String} text the text to render on the label\n * @param {Object} options\n * @param {String} options.align how to align in the bounding box.\n *                             Any of { 'center-middle', 'center-top' }, defaults to 'center-top'.\n * @param {String} options.style style to be applied to the text\n *\n * @return {SVGText} the text element created\n */\nText.prototype.createText = function(parent, text, options) {\n\n  var box = _.merge({}, this._config.size, options.box || {}),\n      style = _.merge({}, this._config.style, options.style || {}),\n      align = parseAlign(options.align || this._config.align),\n      padding = parsePadding(options.padding !== undefined ? options.padding : this._config.padding);\n\n  var lines = text.split(/\\r?\\n/g),\n      layouted = [];\n\n  var maxWidth = box.width - padding.left - padding.right;\n\n  var fakeText = parent.text(0, 0, '').attr(style).node;\n  // FF regression: ensure text is shown during rendering\n  // by attaching it directly to the body\n  fakeText.ownerSVGElement.appendChild(fakeText);\n\n  /**\n   * Layout the next line and return the layouted element.\n   *\n   * Alters the lines passed.\n   *\n   * @param  {Array<String>} lines\n   * @return {Object} the line descriptor, an object { width, height, text }\n   */\n  function layoutNext(lines) {\n\n    var originalLine = lines.shift(),\n        fitLine = originalLine;\n\n    var textBBox;\n\n    function fit() {\n      if (fitLine.length < originalLine.length) {\n        var nextLine = lines[0] || '',\n            remainder = originalLine.slice(fitLine.length);\n\n        if (/-\\s*$/.test(remainder)) {\n          nextLine = remainder.replace(/-\\s*$/, '') + nextLine.replace(/^\\s+/, '');\n        } else {\n          nextLine = remainder + ' ' + nextLine;\n        }\n\n        lines[0] = nextLine;\n      }\n      return { width: textBBox.width, height: textBBox.height, text: fitLine };\n    }\n\n    function getTextBBox(text) {\n      fakeText.textContent = text;\n      return fakeText.getBBox();\n    }\n\n    /**\n     * Shortens a line based on spacing and hyphens.\n     * Returns the shortened result on success.\n     *\n     * @param  {String} line\n     * @param  {Number} maxLength the maximum characters of the string\n     * @return {String} the shortened string\n     */\n    function semanticShorten(line, maxLength) {\n      var parts = line.split(/(\\s|-)/g),\n          part,\n          shortenedParts = [],\n          length = 0;\n\n      // try to shorten via spaces + hyphens\n      if (parts.length > 1) {\n        while ((part = parts.shift())) {\n\n          if (part.length + length < maxLength) {\n            shortenedParts.push(part);\n            length += part.length;\n          } else {\n            // remove previous part, too if hyphen does not fit anymore\n            if (part === '-') {\n              shortenedParts.pop();\n            }\n\n            break;\n          }\n        }\n      }\n\n      return shortenedParts.join('');\n    }\n\n    function shortenLine(line, width, maxWidth) {\n      var length = line.length * (maxWidth / width);\n\n      // try to shorten semantically (i.e. based on spaces and hyphens)\n      var shortenedLine = semanticShorten(line, length);\n\n      if (!shortenedLine) {\n\n        // force shorten by cutting the long word\n        shortenedLine = line.slice(0, Math.floor(length - 1));\n      }\n\n      return shortenedLine;\n    }\n\n\n    while (true) {\n\n      textBBox = getTextBBox(fitLine);\n\n      // try to fit\n      if (textBBox.width < maxWidth) {\n        return fit();\n      }\n\n      fitLine = shortenLine(fitLine, textBBox.width, maxWidth);\n    }\n  }\n\n  while (lines.length) {\n    layouted.push(layoutNext(lines));\n  }\n\n  var totalHeight = _.reduce(layouted, function(sum, line, idx) {\n    return sum + line.height;\n  }, 0);\n\n\n  // the center x position to align against\n  var cx = box.width / 2;\n\n  // the y position of the next line\n  var y, x;\n\n  switch (align.vertical) {\n    case 'middle':\n      y = (box.height - totalHeight) / 2 - layouted[0].height / 4;\n      break;\n\n    default:\n      y = padding.top;\n  }\n\n  var textElement = parent.text().attr(style);\n\n  _.forEach(layouted, function(line) {\n    y += line.height;\n\n    switch (align.horizontal) {\n      case 'left':\n        x = padding.left;\n        break;\n\n      case 'right':\n        x = (maxWidth - padding.right - line.width);\n        break;\n\n      default:\n        // aka center\n        x = (maxWidth - line.width) / 2 + padding.left;\n    }\n\n\n    var tspan = Snap.create('tspan', { x: x, y: y }).node;\n    tspan.textContent = line.text;\n\n    textElement.append(tspan);\n  });\n\n  // remove fake text\n  fakeText.parentNode.removeChild(fakeText);\n\n  return textElement;\n};\n\n\nmodule.exports = Text;\n},{}],64:[function(_dereq_,module,exports){\n\r\nvar isArray = function(obj) {\r\n  return Object.prototype.toString.call(obj) === '[object Array]';\r\n};\r\n\r\nvar annotate = function() {\r\n  var args = Array.prototype.slice.call(arguments);\r\n  \r\n  if (args.length === 1 && isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n\r\n  var fn = args.pop();\r\n\r\n  fn.$inject = args;\r\n\r\n  return fn;\r\n};\r\n\r\n\r\n// Current limitations:\r\n// - can't put into \"function arg\" comments\r\n// function /* (no parenthesis like this) */ (){}\r\n// function abc( /* xx (no parenthesis like this) */ a, b) {}\r\n//\r\n// Just put the comment before function or inside:\r\n// /* (((this is fine))) */ function(a, b) {}\r\n// function abc(a) { /* (((this is fine))) */}\r\n\r\nvar FN_ARGS = /^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m;\r\nvar FN_ARG = /\\/\\*([^\\*]*)\\*\\//m;\r\n\r\nvar parse = function(fn) {\r\n  if (typeof fn !== 'function') {\r\n    throw new Error('Cannot annotate \"' + fn + '\". Expected a function!');\r\n  }\r\n\r\n  var match = fn.toString().match(FN_ARGS);\r\n  return match[1] && match[1].split(',').map(function(arg) {\r\n    match = arg.match(FN_ARG);\r\n    return match ? match[1].trim() : arg.trim();\r\n  }) || [];\r\n};\r\n\r\n\r\nexports.annotate = annotate;\r\nexports.parse = parse;\r\nexports.isArray = isArray;\r\n\n},{}],65:[function(_dereq_,module,exports){\nmodule.exports = {\r\n  annotate: _dereq_('./annotation').annotate,\r\n  Module: _dereq_('./module'),\r\n  Injector: _dereq_('./injector')\r\n};\r\n\n},{\"./annotation\":64,\"./injector\":66,\"./module\":67}],66:[function(_dereq_,module,exports){\nvar Module = _dereq_('./module');\r\nvar autoAnnotate = _dereq_('./annotation').parse;\r\nvar annotate = _dereq_('./annotation').annotate;\r\nvar isArray = _dereq_('./annotation').isArray;\r\n\r\n\r\nvar Injector = function(modules, parent) {\r\n  parent = parent || {\r\n    get: function(name) {\r\n      currentlyResolving.push(name);\r\n      throw error('No provider for \"' + name + '\"!');\r\n    }\r\n  };\r\n\r\n  var currentlyResolving = [];\r\n  var providers = this._providers = Object.create(parent._providers || null);\r\n  var instances = this._instances = Object.create(null);\r\n\r\n  var self = instances.injector = this;\r\n\r\n  var error = function(msg) {\r\n    var stack = currentlyResolving.join(' -> ');\r\n    currentlyResolving.length = 0;\r\n    return new Error(stack ? msg + ' (Resolving: ' + stack + ')' : msg);\r\n  };\r\n\r\n  var get = function(name) {\r\n    if (!providers[name] && name.indexOf('.') !== -1) {\r\n      var parts = name.split('.');\r\n      var pivot = get(parts.shift());\r\n\r\n      while(parts.length) {\r\n        pivot = pivot[parts.shift()];\r\n      }\r\n\r\n      return pivot;\r\n    }\r\n\r\n    if (Object.hasOwnProperty.call(instances, name)) {\r\n      return instances[name];\r\n    }\r\n\r\n    if (Object.hasOwnProperty.call(providers, name)) {\r\n      if (currentlyResolving.indexOf(name) !== -1) {\r\n        currentlyResolving.push(name);\r\n        throw error('Cannot resolve circular dependency!');\r\n      }\r\n\r\n      currentlyResolving.push(name);\r\n      instances[name] = providers[name][0](providers[name][1]);\r\n      currentlyResolving.pop();\r\n\r\n      return instances[name];\r\n    }\r\n\r\n    return parent.get(name);\r\n  };\r\n\r\n  var instantiate = function(Type) {\r\n    var instance = Object.create(Type.prototype);\r\n    var returned = invoke(Type, instance);\r\n\r\n    return typeof returned === 'object' ? returned : instance;\r\n  };\r\n\r\n  var invoke = function(fn, context) {\r\n    if (typeof fn !== 'function') {\r\n      if (isArray(fn)) {\r\n        fn = annotate(fn.slice());\r\n      } else {\r\n        throw new Error('Cannot invoke \"' + fn + '\". Expected a function!');\r\n      }\r\n    }\r\n\r\n    var inject = fn.$inject && fn.$inject || autoAnnotate(fn);\r\n    var dependencies = inject.map(function(dep) {\r\n      return get(dep);\r\n    });\r\n\r\n    // TODO(vojta): optimize without apply\r\n    return fn.apply(context, dependencies);\r\n  };\r\n\r\n\r\n  var createPrivateInjectorFactory = function(privateChildInjector) {\r\n    return annotate(function(key) {\r\n      return privateChildInjector.get(key);\r\n    });\r\n  };\r\n\r\n  var createChild = function(modules, forceNewInstances) {\r\n    if (forceNewInstances && forceNewInstances.length) {\r\n      var fromParentModule = Object.create(null);\r\n      var matchedScopes = Object.create(null);\r\n\r\n      var privateInjectorsCache = [];\r\n      var privateChildInjectors = [];\r\n      var privateChildFactories = [];\r\n\r\n      var provider;\r\n      var cacheIdx;\r\n      var privateChildInjector;\r\n      var privateChildInjectorFactory;\r\n      for (var name in providers) {\r\n        provider = providers[name];\r\n\r\n        if (forceNewInstances.indexOf(name) !== -1) {\r\n          if (provider[2] === 'private') {\r\n            cacheIdx = privateInjectorsCache.indexOf(provider[3]);\r\n            if (cacheIdx === -1) {\r\n              privateChildInjector = provider[3].createChild([], forceNewInstances);\r\n              privateChildInjectorFactory = createPrivateInjectorFactory(privateChildInjector);\r\n              privateInjectorsCache.push(provider[3]);\r\n              privateChildInjectors.push(privateChildInjector);\r\n              privateChildFactories.push(privateChildInjectorFactory);\r\n              fromParentModule[name] = [privateChildInjectorFactory, name, 'private', privateChildInjector];\r\n            } else {\r\n              fromParentModule[name] = [privateChildFactories[cacheIdx], name, 'private', privateChildInjectors[cacheIdx]];\r\n            }\r\n          } else {\r\n            fromParentModule[name] = [provider[2], provider[1]];\r\n          }\r\n          matchedScopes[name] = true;\r\n        }\r\n\r\n        if ((provider[2] === 'factory' || provider[2] === 'type') && provider[1].$scope) {\r\n          forceNewInstances.forEach(function(scope) {\r\n            if (provider[1].$scope.indexOf(scope) !== -1) {\r\n              fromParentModule[name] = [provider[2], provider[1]];\r\n              matchedScopes[scope] = true;\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      forceNewInstances.forEach(function(scope) {\r\n        if (!matchedScopes[scope]) {\r\n          throw new Error('No provider for \"' + scope + '\". Cannot use provider from the parent!');\r\n        }\r\n      });\r\n\r\n      modules.unshift(fromParentModule);\r\n    }\r\n\r\n    return new Injector(modules, self);\r\n  };\r\n\r\n  var factoryMap = {\r\n    factory: invoke,\r\n    type: instantiate,\r\n    value: function(value) {\r\n      return value;\r\n    }\r\n  };\r\n\r\n  modules.forEach(function(module) {\r\n\r\n    function arrayUnwrap(type, value) {\r\n      if (type !== 'value' && isArray(value)) {\r\n        value = annotate(value.slice());\r\n      }\r\n\r\n      return value;\r\n    }\r\n\r\n    // TODO(vojta): handle wrong inputs (modules)\r\n    if (module instanceof Module) {\r\n      module.forEach(function(provider) {\r\n        var name = provider[0];\r\n        var type = provider[1];\r\n        var value = provider[2];\r\n\r\n        providers[name] = [factoryMap[type], arrayUnwrap(type, value), type];\r\n      });\r\n    } else if (typeof module === 'object') {\r\n      if (module.__exports__) {\r\n        var clonedModule = Object.keys(module).reduce(function(m, key) {\r\n          if (key.substring(0, 2) !== '__') {\r\n            m[key] = module[key];\r\n          }\r\n          return m;\r\n        }, Object.create(null));\r\n\r\n        var privateInjector = new Injector((module.__modules__ || []).concat([clonedModule]), self);\r\n        var getFromPrivateInjector = annotate(function(key) {\r\n          return privateInjector.get(key);\r\n        });\r\n        module.__exports__.forEach(function(key) {\r\n          providers[key] = [getFromPrivateInjector, key, 'private', privateInjector];\r\n        });\r\n      } else {\r\n        Object.keys(module).forEach(function(name) {\r\n          if (module[name][2] === 'private') {\r\n            providers[name] = module[name];\r\n            return;\r\n          }\r\n\r\n          var type = module[name][0];\r\n          var value = module[name][1];\r\n\r\n          providers[name] = [factoryMap[type], arrayUnwrap(type, value), type];\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  // public API\r\n  this.get = get;\r\n  this.invoke = invoke;\r\n  this.instantiate = instantiate;\r\n  this.createChild = createChild;\r\n};\r\n\r\nmodule.exports = Injector;\r\n\n},{\"./annotation\":64,\"./module\":67}],67:[function(_dereq_,module,exports){\nvar Module = function() {\r\n  var providers = [];\r\n\r\n  this.factory = function(name, factory) {\r\n    providers.push([name, 'factory', factory]);\r\n    return this;\r\n  };\r\n\r\n  this.value = function(name, value) {\r\n    providers.push([name, 'value', value]);\r\n    return this;\r\n  };\r\n\r\n  this.type = function(name, type) {\r\n    providers.push([name, 'type', type]);\r\n    return this;\r\n  };\r\n\r\n  this.forEach = function(iterator) {\r\n    providers.forEach(iterator);\r\n  };\r\n};\r\n\r\nmodule.exports = Module;\r\n\n},{}],68:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./lib/refs');\r\n\r\nmodule.exports.Collection = _dereq_('./lib/collection');\n},{\"./lib/collection\":69,\"./lib/refs\":70}],69:[function(_dereq_,module,exports){\n'use strict';\r\n\r\n/**\r\n * An empty collection stub. Use {@link RefsCollection.extend} to extend a\r\n * collection with ref semantics.\r\n *\r\n * @classdesc A change and inverse-reference aware collection with set semantics.\r\n *\r\n * @class RefsCollection\r\n */\r\nfunction RefsCollection() { }\r\n\r\n/**\r\n * Extends a collection with {@link Refs} aware methods\r\n *\r\n * @memberof RefsCollection\r\n * @static\r\n *\r\n * @param  {Array<Object>} collection\r\n * @param  {Refs} refs instance\r\n * @param  {Object} property represented by the collection\r\n * @param  {Object} target object the collection is attached to\r\n *\r\n * @return {RefsCollection<Object>} the extended array\r\n */\r\nfunction extend(collection, refs, property, target) {\r\n\r\n  var inverseProperty = property.inverse;\r\n\r\n  /**\r\n   * Removes the given element from the array and returns it.\r\n   *\r\n   * @method RefsCollection#remove\r\n   *\r\n   * @param {Object} element the element to remove\r\n   */\r\n  collection.remove = function(element) {\r\n    var idx = this.indexOf(element);\r\n    if (idx !== -1) {\r\n      this.splice(idx, 1);\r\n\r\n      // unset inverse\r\n      refs.unset(element, inverseProperty, target);\r\n    }\r\n\r\n    return element;\r\n  };\r\n\r\n  /**\r\n   * Returns true if the collection contains the given element\r\n   *\r\n   * @method RefsCollection#contains\r\n   *\r\n   * @param {Object} element the element to check for\r\n   */\r\n  collection.contains = function(element) {\r\n    return this.indexOf(element) !== -1;\r\n  };\r\n\r\n  /**\r\n   * Adds an element to the array, unless it exists already (set semantics).\r\n   *\r\n   * @method RefsCollection#add\r\n   *\r\n   * @param {Object} element the element to add\r\n   */\r\n  collection.add = function(element) {\r\n\r\n    if (!this.contains(element)) {\r\n      this.push(element);\r\n\r\n      // set inverse\r\n      refs.set(element, inverseProperty, target);\r\n    }\r\n  };\r\n\r\n  return collection;\r\n}\r\n\r\n\r\nmodule.exports.extend = extend;\n},{}],70:[function(_dereq_,module,exports){\n'use strict';\r\n\r\nvar Collection = _dereq_('./collection');\r\n\r\nfunction hasOwnProperty(e, property) {\r\n  return Object.prototype.hasOwnProperty.call(e, property.name || property);\r\n}\r\n\r\n\r\nfunction defineCollectionProperty(ref, property, target) {\r\n  Object.defineProperty(target, property.name, {\r\n    enumerable: property.enumerable,\r\n    value: Collection.extend(target[property.name] || [], ref, property, target)\r\n  });\r\n}\r\n\r\n\r\nfunction defineProperty(ref, property, target) {\r\n\r\n  var inverseProperty = property.inverse;\r\n\r\n  var _value = target[property.name];\r\n\r\n  Object.defineProperty(target, property.name, {\r\n    enumerable: property.enumerable,\r\n\r\n    get: function() {\r\n      return _value;\r\n    },\r\n\r\n    set: function(value) {\r\n\r\n      // return if we already performed all changes\r\n      if (value === _value) {\r\n        return;\r\n      }\r\n\r\n      var old = _value;\r\n\r\n      // temporary set null\r\n      _value = null;\r\n\r\n      if (old) {\r\n        ref.unset(old, inverseProperty, target);\r\n      }\r\n\r\n      // set new value\r\n      _value = value;\r\n\r\n      // set inverse value\r\n      ref.set(_value, inverseProperty, target);\r\n    }\r\n  });\r\n\r\n}\r\n\r\n/**\r\n * Creates a new references object defining two inversly related\r\n * attribute descriptors a and b.\r\n *\r\n * <p>\r\n *   When bound to an object using {@link Refs#bind} the references\r\n *   get activated and ensure that add and remove operations are applied\r\n *   reversely, too.\r\n * </p>\r\n *\r\n * <p>\r\n *   For attributes represented as collections {@link Refs} provides the\r\n *   {@link RefsCollection#add}, {@link RefsCollection#remove} and {@link RefsCollection#contains} extensions\r\n *   that must be used to properly hook into the inverse change mechanism.\r\n * </p>\r\n *\r\n * @class Refs\r\n *\r\n * @classdesc A bi-directional reference between two attributes.\r\n *\r\n * @param {Refs.AttributeDescriptor} a property descriptor\r\n * @param {Refs.AttributeDescriptor} b property descriptor\r\n *\r\n * @example\r\n *\r\n * var refs = Refs({ name: 'wheels', collection: true, enumerable: true }, { name: 'car' });\r\n *\r\n * var car = { name: 'toyota' };\r\n * var wheels = [{ pos: 'front-left' }, { pos: 'front-right' }];\r\n *\r\n * refs.bind(car, 'wheels');\r\n *\r\n * car.wheels // []\r\n * car.wheels.add(wheels[0]);\r\n * car.wheels.add(wheels[1]);\r\n *\r\n * car.wheels // [{ pos: 'front-left' }, { pos: 'front-right' }]\r\n *\r\n * wheels[0].car // { name: 'toyota' };\r\n * car.wheels.remove(wheels[0]);\r\n *\r\n * wheels[0].car // undefined\r\n */\r\nfunction Refs(a, b) {\r\n\r\n  if (!(this instanceof Refs)) {\r\n    return new Refs(a, b);\r\n  }\r\n\r\n  // link\r\n  a.inverse = b;\r\n  b.inverse = a;\r\n\r\n  this.props = {};\r\n  this.props[a.name] = a;\r\n  this.props[b.name] = b;\r\n}\r\n\r\n/**\r\n * Binds one side of a bi-directional reference to a\r\n * target object.\r\n *\r\n * @memberOf Refs\r\n *\r\n * @param  {Object} target\r\n * @param  {String} property\r\n */\r\nRefs.prototype.bind = function(target, property) {\r\n  if (typeof property === 'string') {\r\n    if (!this.props[property]) {\r\n      throw new Error('no property <' + property + '> in ref');\r\n    }\r\n    property = this.props[property];\r\n  }\r\n\r\n  if (property.collection) {\r\n    defineCollectionProperty(this, property, target);\r\n  } else {\r\n    defineProperty(this, property, target);\r\n  }\r\n};\r\n\r\nRefs.prototype.ensureBound = function(target, property) {\r\n  if (!hasOwnProperty(target, property)) {\r\n    this.bind(target, property);\r\n  }\r\n};\r\n\r\nRefs.prototype.unset = function(target, property, value) {\r\n\r\n  if (target) {\r\n    this.ensureBound(target, property);\r\n\r\n    if (property.collection) {\r\n      target[property.name].remove(value);\r\n    } else {\r\n      target[property.name] = undefined;\r\n    }\r\n  }\r\n};\r\n\r\nRefs.prototype.set = function(target, property, value) {\r\n\r\n  if (target) {\r\n    this.ensureBound(target, property);\r\n\r\n    if (property.collection) {\r\n      target[property.name].add(value);\r\n    } else {\r\n      target[property.name] = value;\r\n    }\r\n  }\r\n};\r\n\r\nmodule.exports = Refs;\r\n\r\n\r\n/**\r\n * An attribute descriptor to be used specify an attribute in a {@link Refs} instance\r\n *\r\n * @typedef {Object} Refs.AttributeDescriptor\r\n * @property {String} name\r\n * @property {boolean} [collection=false]\r\n * @property {boolean} [enumerable=false]\r\n */\n},{\"./collection\":69}]},{},[1])\n(1)\n});"]}